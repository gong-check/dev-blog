{"componentChunkName":"component---src-templates-blog-post-js","path":"/BE/찬/게시물 제목/oauth/","result":{"data":{"site":{"siteMetadata":{"title":"공책 팀 개발 블로그"}},"markdownRemark":{"id":"56c2675d-422a-5e8c-8b6b-96a4de73d7a7","excerpt":"안녕하세요. 공책 팀 백엔드 팀원 찬입니다! 저희 공책팀에선 회원가입 & 로그인 기능을 Github OAuth를 활용해 구현해보았는데요. 간단한 OAuth 소개와 흐름을 글로 남겨보고자 합니다. OAuth…","html":"<p>안녕하세요. 공책 팀 백엔드 팀원 찬입니다!</p>\n<p>저희 공책팀에선 회원가입 &#x26; 로그인 기능을 Github OAuth를 활용해 구현해보았는데요.</p>\n<p>간단한 OAuth 소개와 흐름을 글로 남겨보고자 합니다.</p>\n<h2>OAuth란?</h2>\n<hr>\n<p>회원가입 혹은 로그인 하실 때 아래와 같은 버튼을 통해 진행하신 경험이 있으신가요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.151898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVQY032OPS8EURSG7x8Rf0LUSmqJRSQ+srI+gpJGlBqFhEJCgUKu3aGh2KxFsXZRaXZ/gCASVDOzO3PtPfeRmSkkCic5OU9y3jx5lQMwHq+tXl6aPWA0cQTR23Py4ap6zeR0nqmZPOVKldXdR4aWz1nZuqVrBRPHhGGYZp1zKEmNO+h9xemBArdNpw21egULaK0ZHhkjNz7B4fEJo+s3DBRKDC6dpZJSsYjnZWytRSXQ7ZQxH/3Yrz6+25dEBt6DzzTUuH9gdm6BwvwitbsGm0dP5NYu2NirY0UIAh/f938bgsM5sJJtwiIC4rL7zySCv/wDnBMUZFGxq34AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png\"\n        srcset=\"/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/c26ae/img_2.png 158w,\n/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/6bdcf/img_2.png 315w,\n/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아마 다들 경험 해보셨을거라고 생각합니다.</p>\n<p>그렇다면 여러분들은 이미 OAuth를 사용하고 있습니다!</p>\n<p>OAuth 2.0 공식 문서인 <code class=\"language-text\">RFC 6749</code>에는 다음과 같이 OAuth를 정의하고 있습니다.</p>\n<blockquote>\n<p>The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service,\neither on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP\nservice, or by allowing the third-party application to obtain access on its own behalf. This specification replaces\nand obsoletes the OAuth 1.0 protocol described in RFC 5849.</p>\n</blockquote>\n<p>OAuth 2.0 인가 프레임워크는 리소스 소유자와 HTTP 사이의 승인을 통해 사용자를 대신하여 혹은 제3의 애플리케이션이 자기 자신을 대신하여 접근을 얻도록 하여 제3의 애플리케이션이 HTTP 서비스에 대한\n제한된 접근을 얻을 수 있도록 하는 표준 프로토콜이라고 소개하고 있습니다.</p>\n<p><code class=\"language-text\">주의 : 이 글은 OAuth2.0 기준으로 작성되었으며, RFC 5849에 기술된 OAuth1.0은 대체되었으며 사용하지 않는 상태입니다.</code></p>\n<h2>OAuth가 정의하는 역할</h2>\n<hr>\n<p>OAuth의 흐름을 알아보기 전에 OAuth가 정의하는 역할부터 알아보겠습니다.</p>\n<p>OAuth는 총 4개의 역할을 정의하고 있는데 다음과 같습니다.</p>\n<h3>1. 리소스 소유자 (Resource Owner)</h3>\n<ul>\n<li>제한된 리소스에 대해 접근 요청을 할 수 있는 사용자 입니다. 쉽게 말해 카카오, 구글과 같은 외부 플랫폼의 리소스를 소유하고 있는 사용자입니다.</li>\n</ul>\n<h3>2. 리소스 서버 (Resource Server)</h3>\n<ul>\n<li>제한된 리소스를 호스팅하는 서버로써 Access Token을 사용해 제한된 리소스에 대한 요청을 받고 응답합니다.</li>\n</ul>\n<h3>3. 클라이언트 (Client)</h3>\n<ul>\n<li>인가를 이용해 리소스 소유자를 대신하여 제한된 리소스에 대한 요청을 만드는 애플리케이션입니다.</li>\n</ul>\n<h3>4. 인가 서버 (Authorization Server)</h3>\n<ul>\n<li>리소스 소유자를 성공적으로 인증하고 인가를 얻어 클라이언트에게 Access Token을 발급하는 서버입니다.</li>\n</ul>\n<h2>OAuth 흐름</h2>\n<hr>\n<p>OAuth의 흐름은 앞서 정의한 4개의 역할의 상호작용으로 이루어집니다.</p>\n<p>아래는 타임라인 순으로 정리한 대략적인 OAuth의 인증 흐름입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/160a3/img_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.53164556962024%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4ElEQVQ4y41UyU4iURQtYoyJOyARtvoBurE3fAjxC1y4ceXWlX6DS9euJMS4a20Q0S4moSwm24ESBFRQBBGcTufc9KugaYeXPG69++4979wJLZVKYWVlBfV6HVzPz88it7e3sbq6im63C7Xu7+9FFwqFbN3LywvW1tYQDAblrLncbmiaBp/Ph06nI8r19XUMDQ2JfmZmxnb2+/2iczgcCAQColtYWBAd9+LiIqUG79iYKAzDEKO5uTlx8nq98Hg8woxM3W43XC6X2M7Pz4vt1OQknKOjcDmdGB4ehvZjeloMZmdnbSamaWJiYkL0y8vLtn5paUl04+PjSKfTomMKRkZG4HQ6sbm5CY2vb2xsoFgsIp/P408uh7Jl4efWFnZ3d8Xp9fXVBk0kEqhWq2/ynS8UxFdyyJ+zszNkMhmwQEldR840UbIstFotO/EK9OHhAY+Pj28eolT512is6zri8TiSySRi8Tis83NcXFyg2Wzi/bq5uZGcDgLyrGw10j49PZUwCEK2V1dXwu76+lqcyIibj/OOLAcBeeZDNkPmr1AoiMzlcjg+PkalUoH1L2y+zn17eyt3nwKSIUHoXCqVRBK4XC4LKHNDUO52u41arfY1QxaEOTw6OpKQGSrZUPK+3+/j6elJvjlRXwKyocPhsADT4fLyUhhmDEMKxO+TkxPJM5mqcfwvIF8mE7UUk3ang71wGL9DvxANhRCLxSQVDLnX630PcLCBGWbWNHFoGIjpuqSClSbTT0N+D6iMyCJ1cCBjGIlEZNQI+GVRPgIkw52dHcltNpuVonEAGDbvvgXI3HErI/YmwVgkOtzd3UlrcQDYBY1GQyTTwW8bUKEPrl6/L+GSEbtAVZe9yWnhuPEB9inBbIakXcjnxZlzrO/vo3h4iHq1Kk1OJ4JREpAtpADZ6JQEtGeZWTBSKRwkk4gnEtiLRpHNpHFuWeLwfhFA/duoxTMftBl+tFSRvrsJ+BeTGdhPIMOhgQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_3.png\"\n        title=\"img_3.png\"\n        src=\"/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/f058b/img_3.png\"\n        srcset=\"/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/c26ae/img_3.png 158w,\n/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/6bdcf/img_3.png 315w,\n/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/f058b/img_3.png 630w,\n/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/160a3/img_3.png 682w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>편하게만 사용했던 OAuth 뒤로 수많은 상호작용이 이뤄지고 있다는 것을 알 수 있습니다.</p>\n<p>너무 복잡하다 보니 아직 위의 흐름만 봐선 OAuth의 인증 흐름이 와닿지 않으실 수 있습니다. (제가 그랬습니다..)</p>\n<p>Github Oauth를 통해 구체적인 예시를 들어보겠습니다.</p>\n<h2>Github OAuth</h2>\n<hr>\n<h3>인증에 앞서…</h3>\n<p>Github OAuth 뿐만 아니라 다른 플랫폼을 이용하더라도 먼저 클라이언트를 리소스 서버에 등록해야 합니다.</p>\n<p>Github에선 Setting -> Developer Settings -> OAuth Apps에 가시면 리소스 서버에 등록할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4UlEQVQ4y42U6W7aUBCFUZWWgLeLbWzj3cYbJoQAaTaapK2a12gjpYv6/g9wqhljQgit+uPT4IXjWc7czuX6I9b3D7i5f8BseYXzqzusLm9xfn2Py/Unvr6++8K/rz58RjSuYDoBLDeGNYpguzGE6WK+vMTTz9/oROMJ3CiHF+UwnRC2l8D2Uo6On/KzIKnghhmjGSNI2hCysCBp1iYO+b7jJ+hMZiuU0yWK6QJ5vUCcVpBVk18i+qr5AmVgQ9UdjruQMD3vhEnJ6Xf7Au96GnPUVZ45VvF2h6OWroJjWd+KtcId6olhhxgMPUa3m/5Q+cNRxP3pKcarTPubKl4JFvUZomyKrJojzqewnGdxggSpxEPsi7FgktcYlzNUJ0uU0wV008Wbt1JTXlfhyO3Yob2mzFvRVrgTxAUMO2im6yYYWD6E4TKcoeGiKw1e0xfoHxJMixO2ySgYw/ISuCFZqPkI9ZHYn+j+dF+UXE0XKGqyzBn3kcqmj7T+klRzm8EhXmVITicbUPrvegI9Wd9gQNaGTWkb/+3+8W+wDxVh8zSpZ7tTpHtt2f+dYVbNeL2icQ0/LhGkFfykhB8XGG68SINSBg4UfQNls7ctW8FiMkc+OQOtIHlyOr9APX8PP8rRpc3pa+j2NRxLYodm0mSbdq9b0Y4XZZyFvzkggrhEmFZQB06zEZqNnnDR00ZNFKPtpmj6iN3wIkOaKPvQT2FQiW7M0XSiZgXdFLpXQvcK6H4Fwy9hjiJ+j55TpH7vlDxjy9Sn56hOFkyYFJBVA7LYlCOGW2Tt+SRqebHL+WSOMJsgLOYIyiX8/IwJyhW87JSHRAOjfQ/TCZ97+9bZnXoniivIkgVF8yGpAfqqD1kLMbAzCCuAPnT5NCLrtP36pw/Tu1Oc/LjB4sct5t/XWP26R/10ATH2YLgTCCeFpJn/ZepG8PYU1eMFpo83qL9dYfa4RvZ1BZEFGDgFhB1xLw+Vd4g/wcEZc/k/ti8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_4.png\"\n        title=\"img_4.png\"\n        src=\"/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png\"\n        srcset=\"/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/c26ae/img_4.png 158w,\n/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/6bdcf/img_4.png 315w,\n/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png 582w\"\n        sizes=\"(max-width: 582px) 100vw, 582px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 때, CallBack Url을 등록해야 하는데요. CallBack Url이란 리소스 소유자가 인증을 마치고 사용자를 redirection 시킬 url을 의미합니다. 인증이 성공하면 Authorization\nCode를 발급해 주는데 이를 redirection하는 url로 발급합니다.</p>\n<p>등록을 완료하셨다면 Github에서 Client_id와 Client_secret을 발급합니다. 이 데이터는 클라이언트가 추후에 인가 서버에 Access_token을 요청할 때 사용됩니다.</p>\n<blockquote>\n<p>주의 : 절대로 Client_secret은 유출되어선 안됩니다.</p>\n</blockquote>\n<h3>1. 리소스 소유자의 로그인 요청</h3>\n<p>리소스 소유자가 저희가 만든 서비스(공책) 에서 Github 로그인을 요청합니다. 저희는 이를 Github의 인가 서버로 보내줘야 합니다.</p>\n<p>Github의 인가 서버의 url은 <code class=\"language-text\">https://github.com/login/oauth/authorize</code> 입니다.</p>\n<p>이때, 추가적으로 인가 서버에 여러 정보를 쿼리 스트링에 담아 보내는데요. 보통 아래에 기술한 정보를 같이 보냅니다.</p>\n<ul>\n<li><code class=\"language-text\">client_id</code> : OAuth App에 등록할 때 발급받은 client_id를 의미합니다.</li>\n<li><code class=\"language-text\">redirect_url</code> : OAuth App에 등록할 때 등록한 CallBack url을 의미합니다.</li>\n<li><code class=\"language-text\">scope</code> : 클라이언트가 부여받은 리소스 접근 권한</li>\n</ul>\n<h3>2. 로그인 페이지 응답 &#x26; 아이디, 패스워드 입력</h3>\n<p>로그인 요청이 성공적으로 인가 서버에 도달한다면, 다음과 같은 로그인 페이지를 응답합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 185.44303797468353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE5UlEQVRIx5VWSY8bRRT2b4EbSCCkgFguHBCIAwGECEQ5gLggwZETFyQEEgiBFOWAIkQyJJnJCkQggqJIYSYhIWQmYZZ4xtvYHi9tt91td3vrpaq6P/Sq2h07tmegpM+vuurVV6/e4qoEprQwDMckYwwiCMbGZrXErIkgIihXqvjk08/xxVdfo21Ze5ImZlnIuZD9bw4fwca9JP5YvIYTpxbk2HDufxEOLVxcuo6ri0v44eQ8llfujFk/lZAW7wZqnufBcZx4MxqepZ/AXm3EX3sFRFooRADGhfTLNDAJHmF3PcqEhOMxDFx/Jvq7zD2o5/kMCZcIPQZnCkjR9Tn6jhf3Sc7SvU84ohTv6HhgIsDvVxYxN38e380t4NrN26D49hxP6dO6aO2ehL2BJxcf/vYYfrt8FSdO/yhBrdt3x3RnEsYKktAFEyGOnTyL46fO4cjR47hw8VJE6Pw3QucBcjr2VmYb6VwByVQO2Xwp9uk0/ZkWDr9psccCaanPg5jEY3xCd4JwOEGLSS7fXZVI5/JIZbZl/8rVJSz9eRN/r9wFDxDrOtH6CQvJN5WaDr1pYjOVxcZmCsVyFaWKhlQmh41kCpvprCQslioo7JTj48eEo/nW6Q0kES1eXU8ild3G2kYS+WIJya0Mbt5axvUbt7B8ZxU3bt3Gyj9rMnjD/IwtpF1ogqTHg9hvJH0ewvWF9CEd02MCLABECPndj4LXd4iQKwtpB18SCQn6VuOqr4Kj+lRVlKNkQC+qoMGYD32GptmGVqtDq+uoajU0mgYMsyXH6LuuN1AslVGt1WF3uvAZbcIkwRDOkJAmS5qOlfU01re2cfdeBvcyRaTyFawmc1jbzGEjVcDyWgp3NtLY0QxYfQaz66E1gp4TEdLZCwaD3gX0bihR7wSo2cHIdwi9B6mjWRyVlo9Ki0lZbTPkGz7yDReccySsvo+c7oIL5UOfqQAw+T85CQoSBUwlewgRhOi4geQQREhmNjocRYNjx1TINzzk6g5yuqPkELqDYtNFyXCx01SgPo0ZHU/6NkFlVKlqyGSzKBR3kM8X5HXJhYDvM/hMge5m2pxIUtoA27qDbM1BWnOwVR2g3nbBiFBF2cJ2sSSroliqwrQ6Mj3IvzFcJZu2h7LhoGq6qLZc1Nqu7Ld7kYUyfxhXl1AEuhuGdwgbu1cEgkAgDAXCYByu58tUUoQ+l0wh/aMGI8xDYMrYA3BlIUSJ3Rk4MLodmL1xtHpdNDoWarYJvdOG0bUndIboDlxVehDAl7e/x6On9uO5c4fw9NmDEs+cPYgnzxzAyxffx9uXPsKrv36I5y+8i6fOvBXrEGjNIydfwbH1n6OniAA+++soHp57CftOv4knFt6I8dj8a3jhp/fwzuWPsf+XD/DsuUN4fP71MZ19pw/gobkXcXT1vCIkM61+Xx6rbrcmULWaKLbqKLcb0Cxjqk7dNmH3ByrKFFF6PVAwAhEijBBECIUKVCjn78tR0Dxx0CMqQc8IIcSuLyoV+tmgIiAOkgn6oTYYDJDJ5lCuVFCr1ZHOZJEvFFDI51ExHGzVfGxpHiotKlMmkWv4KJksfkQpwujxSKXVNExYlgXLtmXfNFswjCbsPkPN4tDaDK2+gNHl0G2Ous1hdpk8nXykEuHQ1NEjhxMvupEjhsFIBag++U8dO8C/ALTjvXn7g14AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_5.png\"\n        title=\"img_5.png\"\n        src=\"/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png\"\n        srcset=\"/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/c26ae/img_5.png 158w,\n/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/6bdcf/img_5.png 315w,\n/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>리소스 소유자는 본인의 Github 아이디와 패스워드를 입력합니다.</p>\n<h3>3. Authorization Code 발급</h3>\n<p>리소스 소유자가 올바른 아이디와 패스워드를 입력했다면 인가 서버는 처음 저희가 Oauth Apps에 등록한 CallBack Url로 소유자를 redirection 시킵니다. 이 때, 깃허브는 쿼리 스트링에\nAuthorization Code를 발급합니다.</p>\n<p>저는 CallBack url을 <code class=\"language-text\">localhost:3030/callback</code> 으로 설정했으니 다음과 같은 Url로 redirection 될 것입니다.</p>\n<p><code class=\"language-text\"> http://localhost:3030/callback?code=24b7163439c514cdf123</code></p>\n<h3>4. Access Token 요청</h3>\n<p>클라이언트는 발급받은 Authorization Code를 client_id, client_secret과 함께 전달해 Access Token을 요청합니다.</p>\n<p>Github에서 제공하는 Access Token 발급 api의 형식은 아래와 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/cab43/img_6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQoz51S2W7DMAzL4462a07Ht3N2bdf//zwOVJPsADZgeyAkyxZJ2c5KFWDTCSZM0GGCjbNEE+cPLOvG9ijbgKqNKL+h0hFF45GR0A9nuO4Vcbyim29bJNL0JmtGkrK5NgmV/oradChUQFa1ASaMovC4L/F0qH7E80uN3bH5FZmyPbrpKqQs7HP1L2yEretRKo+HXSFR+wF5bdHPN7g0/5k4I4lLJxwrIwXtR9Q6IQ5nca1X+AEmTlKzaZaacj1snCRfXcodxuEih/PGyWFlO/Snm+RsoCDdcu26e+4l3nOKU3BzSCV+BY7KnK8Yx8umblaHSy4ul+9EQ5yIUQjZTFK+8KHQcqjWcVPlHX8mWkdf9zgmX58g4Tt/EelKXKrRZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_6.png\"\n        title=\"img_6.png\"\n        src=\"/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/f058b/img_6.png\"\n        srcset=\"/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/c26ae/img_6.png 158w,\n/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/6bdcf/img_6.png 315w,\n/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/f058b/img_6.png 630w,\n/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/cab43/img_6.png 755w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클라이언트(공책)에선 다음과 같은 HTTP 요청을 통해 Access Token을 요청할 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST https://github.com/login/oauth/access_token\n\n{\n    \"client_id\" : \"공책 client_id\",\n    \"client_secret\" : \"공책 client_secret\",\n    \"code\" : \"code\" \n}</code></pre></div>\n<p>올바른 데이터를 보냈다면 Acess Token을 발급할 것입니다.</p>\n<p>HTTP 응답 형식은 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bbf7/img_7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlklEQVQY032Pyw6DIBBF/QlF8QkMBWMFutBquuv//9NtKF3UpHVxcpKZyc3cTBoHGm+QxoPGAGU94qyoJXI+IOfiL+nm6IyLC0SYIdwM6T3UdUnMd1DEbZDTAu12kNvfjvvvkEMg6xRo86AlwK4PTOsTgwkoagXW6kRDYO2HJvHru+is6jTKnlAOhBhe9RasUadVzyq/AFJgblVZm752AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_7.png\"\n        title=\"img_7.png\"\n        src=\"/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/f058b/img_7.png\"\n        srcset=\"/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/c26ae/img_7.png 158w,\n/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bdcf/img_7.png 315w,\n/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/f058b/img_7.png 630w,\n/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bbf7/img_7.png 716w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>5. Github Profile 요청</h3>\n<p>발급받은 Access Token을 통해 클라이언트(공책)는 Github에게 리소스 소유자의 Github Profile을 요청할 것입니다.</p>\n<p>Github에서 제공하는 사용자 Profile api의 형식은 아래와 같습니다.</p>\n<p><code class=\"language-text\">GET https://api.github.com/user</code></p>\n<p>클라이언트(공책)에선 다음과 같은 HTTP 요청을 통해 Access Token을 요청할 것입니다. 이 때 Authorization 헤더에 발급받은 토큰을 담아 보냅니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET https://api.github.com/user\n\n\"Authorization\" : \"Bearer access_token\"</code></pre></div>\n<p>올바른 Access Token 이라면 Github는 사용자 Profile을 응답합니다.</p>\n<h3>6. Jwt Token 발급</h3>\n<p>클라이언트(공책)에선 payload에 사용자 식별값을 넣어 Jwt Token을 생성해 전달합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Accept: application/json\n{\n    \"token\" : \"jwt.token.here\"\n}</code></pre></div>\n<hr>\n<h2>마무리</h2>\n<p>이번 공책 프로젝트를 통해 처음으로 OAuth 인증 과정을 구현해 보았는데요. 생각보다 구현할 양이 많아 굉장히 놀랐습니다. 외부 API를 사용하기 때문에 테스트 작성에 대한 고민도 많았습니다. 글이 꽤 길지만\n처음으로 OAuth를 접하시는 분이라면 이 글이 도움이 됐으면 좋겠습니다. 저에게 OAuth 인증 과정을 믿고 맡겨준 공책 팀원들 너무 감사합니다!</p>\n<hr>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://datatracker.ietf.org/doc/html/rfc6749\">https://datatracker.ietf.org/doc/html/rfc6749</a></li>\n<li><a href=\"https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps\">https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps</a></li>\n<li><a href=\"https://docs.github.com/en/rest/users/users#get-a-user\">https://docs.github.com/en/rest/users/users#get-a-user</a></li>\n<li><a href=\"https://jaeseo.tistory.com/entry/OAuth-20-%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95\">https://jaeseo.tistory.com/entry/OAuth-20-%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95</a></li>\n</ul>","fields":{"slug":"/BE/찬/게시물 제목/oauth/"},"frontmatter":{"title":"OAuth 2.0 흐름","date":"2022.07.17","description":"Github Oauth를 통해 알아보는 OAuth 2.0의 흐름","tags":["OAuth 2.0","Github OAuth"]}}},"pageContext":{"id":"56c2675d-422a-5e8c-8b6b-96a4de73d7a7","previousPostId":"f10aec8f-371d-5a2c-ac40-9a886e555647","nextPostId":"ca8cf292-ee3b-563b-afc6-073e43815d22"}},"staticQueryHashes":["2841359383"]}