<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[GongCheck Tech Blog RSS Feed]]></title><description><![CDATA[함께쓰는 우리의 공간, 우리가 체크하자!]]></description><link>https://gong-check.github.io/dev-blog</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 17 Oct 2022 23:48:22 GMT</lastBuildDate><item><title><![CDATA[공책 팀의 인터랙티브 랜딩 페이지]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.
저희 팀은 우아한테크코스 4기 과정에서 공간관리 백 오피스를 개발하고 있습니다. GongCheck…]]></description><link>https://gong-check.github.io/dev-blog/FE/코카콜라/Interactive-landing-page/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/코카콜라/Interactive-landing-page/</guid><pubDate>Tue, 18 Oct 2022 08:27:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 백 오피스를 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;GongCheck 서비스를 운영하면서 처음 접하는 사용자에게 서비스에 대한 정보와 안내가 필요하다는 생각이 들었습니다. 그렇다면 어떤 방식으로 서비스에 대한 정보를 제공할까? 라는 생각을 하던 중 랜딩 페이지를 구현하게 되었는데요. 이번 포스팅에서는 인터랙티브 랜딩 페이지 개발 과정을 공유하고자 합니다.&lt;/p&gt;
&lt;h3&gt;목차&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;랜딩 페이지&lt;/li&gt;
&lt;li&gt;서비스의 정체성을 첫 화면에 보여주자 - Canvas API&lt;/li&gt;
&lt;li&gt;스크롤 위치에 따라 애니메이션 효과 적용 - Intersection Observer API&lt;/li&gt;
&lt;li&gt;마치면서&lt;/li&gt;
&lt;li&gt;참고&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1&gt;1. 랜딩 페이지&lt;/h1&gt;
&lt;p&gt;위키백과에서는 랜딩 페이지(landing page)를 다음과 같이 설명하고 있습니다.
검색 엔진, 광고 등을 경유하여 접속하는 이용자가 최초로 보게 되는 웹페이지이다. 링크를 클릭하고 해당 웹페이지에 접속하면 마케터가 의도한 행위를 하도록 하는 페이지를 의미한다.&lt;/p&gt;
&lt;p&gt;저희 팀이 구현할 랜딩 페이지는 GongCheck 서비스를 처음 접하는 사용자에게 우리의 서비스를 소개하기 위한 간략한 페이지라는 정의를 내렸고 구현 목록은 다음과 같습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;첫 화면은 서비스의 정체성을 나타내는 GongCheck 로고&lt;/li&gt;
&lt;li&gt;공간을 사용하고 체크리스트를 작성하는 사용자에게 제공하는 서비스 사용법과 정보&lt;/li&gt;
&lt;li&gt;공간을 관리하고 생성하는 관리자 사용자에게 제공하는 서비스 정보&lt;/li&gt;
&lt;li&gt;인터랙티브 웹 사이트&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;구현된 랜딩 페이지는 아래 영상과 같습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;style&gt;
    .responsive-gif {
        max-width: 630px
    }
    @media (max-width: 400px) {
        .responsive-gif {
            max-width: 360px
        }
    }
    @media (max-width: 300px) {
        .responsive-gif {
            max-width: 300px
        }
    }
    .responsive-gif {
        padding: 10px;
    }
    &lt;/style&gt;
    &lt;img src=&quot;/dev-blog/446269568b794e8964066c5208983f4c/landing.gif&quot; class=&quot;responsive-gif&quot;&gt;
    &lt;p&gt;(GongCheck 서비스는 다양한 사용자의 디바이스 환경에&lt;br&gt; 대응하기 위해 반응형이 적용되어 있습니다.)&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;h1&gt;2. 서비스의 정체성을 첫 화면에 보여주자 - Canvas API&lt;/h1&gt;
&lt;p&gt;사용자가 웹 사이트에 처음 접속하게 되면 보여줄 Hero Section은 서비스의 정체성을 담은 GongCheck 로고를 보여주도록 했습니다.&lt;/p&gt;
&lt;h2&gt;2-1. 개발 초기&lt;/h2&gt;
&lt;p&gt;처음에는 화면 가운데에 로고만 덩그러니 배치되어 있었지만 심플한 느낌이 들어 로고에 애니메이션을 줘서 흐느적? 거리는 재미난 요소를 연출했습니다. 하지만 좀 더 로고에 집중시킬 수 있는 방법이 있지 않을까? 라는 생각이 들었습니다.&lt;/p&gt;
&lt;h2&gt;2-2. 화면에 몰입감 주기!&lt;/h2&gt;
&lt;p&gt;로고에 집중시켜 몰입감을 주기 위한 연출로 “조명을 비춘다?”라는 아이디어가 생각났습니다. 조명이 마우스에 따라 움직이면 더 생동감이 있고 스크롤을 내리면 조명이 커져 화면에 동적인 효과를 줄 수 있지 않을까? 라는 생각으로 구현하게 되었습니다.&lt;/p&gt;
&lt;p&gt;정리하면 구현 요구사항은 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;로고를 비추는 조명 느낌의 연출&lt;/li&gt;
&lt;li&gt;조명이 마우스를 따라 움직이기&lt;/li&gt;
&lt;li&gt;스크롤을 내리면 조명이 커지기&lt;/li&gt;
&lt;li&gt;스크롤 움직임에 영향을 받지 않고 화면 정중앙에 위치하는 로고 이미지&lt;/li&gt;
&lt;/ul&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;style&gt;
    .responsive-gif {
        max-width: 630px
    }
    @media (max-width: 400px) {
        .responsive-gif {
            max-width: 360px
        }
    }
    @media (max-width: 300px) {
        .responsive-gif {
            max-width: 300px
        }
    }
    .responsive-gif {
        padding: 10px;
    }
    &lt;/style&gt;
    &lt;img src=&quot;/dev-blog/ed873f2cb8994a30ff09b11bc1a2faf9/logo.gif&quot; class=&quot;responsive-gif&quot;&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;h2&gt;2-3. 구현 - Canvas API&lt;/h2&gt;
&lt;p&gt;조명을 연출하기 위해 Canvas API를 활용했습니다. Canvas API는 2D 그래픽을 화면에 그리기 위해 사용되는 Web API입니다. HTML &lt;code class=&quot;language-text&quot;&gt;&amp;lt;canvas&gt;&lt;/code&gt; 요소와 JavaScript로 2D 그래픽을 그릴 수 있는 도구들을 제공합니다.&lt;/p&gt;
&lt;p&gt;화면에 그려질 조명 요소를 createCanvas로 구현합니다. 여기서 조명의 흰 부분과 조명 이외의 어두운 배경은 CanvasRenderingContext2D.clip() 메서드로 구현하면 됩니다. 마우스의 위치에 따라 조명을 움직이게 하기 위해 onMouseMove 핸들러 함수를 통해 마우스 위치를 createCanvas함수의 인자로 전달해주면 됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/clip&quot;&gt;CanvasRenderingContext2D.clip()&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// useHeroSection 코드 일부분&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useScroll &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@/hooks/useScroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useHeroSection&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; canvasRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLCanvasElement&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; scrollPosition &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;	
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; scrollPositionInt &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; scrollPosition &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SCROLL_INTERVAL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;createCanvas&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	    &lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; HTMLCanvasElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; CanvasRenderingContext2D&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;radius&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; scale &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;devicePixelRatio&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    canvas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerWidth &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; scale&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    canvas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHeight &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; scale&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scale&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scale&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;beginPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; circlePath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path2D&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    circlePath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;arc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radius&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    circlePath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerWidth&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHeight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;circlePath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;evenodd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 조명 만들기&lt;/span&gt;
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fillStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#000000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fillRect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; canvas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; canvas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	    ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;closePath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onMouseMove&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MouseEvent&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MouseEvent&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; canvas &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; canvasRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ctx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; canvas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;2d&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nativeEvent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offsetX&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nativeEvent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offsetY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; radius &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CIRCLE_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; scrollPositionInt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;token function&quot;&gt;createCanvas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;canvas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radius&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; onMouseMove&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; canvasRef &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;마우스의 위치를 알기 위해서 section 요소의 onMouseMove 이벤트 속성을 사용하고 canvas 요소의 ref 속성에 canvasRef를 사용하여 구현합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// HeroSection 코드 일부분&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;HeroSection&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; onMouseMove&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; canvasRef &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useHeroSection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;section onMouseMove&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onMouseMove&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*img 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;logo&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;logo&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;아래로 내려주세요&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;canvas css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*cavas 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;canvasRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;canvas&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;section&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API&quot;&gt;Canvas_API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.awebco.com/blog/hero-section/&quot;&gt;Hero Section 이란?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1&gt;3. 스크롤 위치에 따라 애니메이션 효과 적용 - Intersection Observer API&lt;/h1&gt;
&lt;p&gt;랜딩 페이지를 보시면 스크롤 위치에 따라 애니메이션 효과가 적용된 것을 볼 수 있습니다. 초기 개발 단계에서는 단순히 스크롤 위치에 따라 각각의 Section에서 스크롤의 위치에 따라 애니메이션을 실행시켰습니다. 예를 들어 &lt;code class=&quot;language-text&quot;&gt;HeroSection에서는 0~80&lt;/code&gt; 스크롤 값을 사용하고 &lt;code class=&quot;language-text&quot;&gt;UserViewSection1에서는 80~160&lt;/code&gt;을 사용하는 식으로 하드코딩으로 구현이 되어 있었는데요.&lt;/p&gt;
&lt;p&gt;왜 이렇게 하드코딩을 했냐고 질문을 하신다면…4차 데모 데이 전날에 랜딩 페이지를 기획하고 개발했습니다. &lt;strong&gt;단 하루 만에 구현을 하다 보니&lt;/strong&gt;…하하하 레거시를 만들어 냈네요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useScroll &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@/hooks/useScroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;Landing&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HeroSection &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ViewSection1 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ViewSection2 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ViewSection3 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ViewSection4 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ViewSection5 &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;HeroSection&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; scrollPosition &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 스크롤 위치 값&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// scrollPosition 값으로 애니메이션 제어&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;ViewSection1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; scrollPosition &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// scrollPosition 값으로 애니메이션 제어&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3-1. Refactoring 방향성&lt;/h2&gt;
&lt;p&gt;전체 페이지의 스크롤 위치 값으로 각각의 Section의 애니메이션을 동작시키다 보니 리팩토링 과정에서 다음과 같은 문제점을 발견했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;각각의 Section 높이 값을 변경할 수 없다.&lt;/li&gt;
&lt;li&gt;Section의 순서를 변경할 수 없다.&lt;/li&gt;
&lt;li&gt;각각의 Section의 높이, Section의 순서를 변경하게 되면 모든 Section의 스크롤 위치 값에 대한 애니메이션 구현 로직을 수정해야 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;페이지의 스크롤 위치 값에 의존적인 현재 상황을 개선하기 위해 각각의 Section이 독립적으로 스크롤 값을 가질 수 있게 리팩토링하기로 방향을 잡았고 요구사항을 정리하면 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;페이지의 스크롤을 움직일 때, 각각의 Section이 화면에 노출되는 시점과 화면에서 사라지는 시점을 알 수 있어야 한다.&lt;/li&gt;
&lt;li&gt;Section은 각자의 독립된 영역으로 분리되어야 한다.
&lt;ul&gt;
&lt;li&gt;독립된 영역은 스크롤 움직임에 대해 자신이 노출된 비율을 퍼센티지로 환산할 수 있어야 한다.&lt;/li&gt;
&lt;li&gt;퍼센티지로 계산된 상태값으로 애니메이션을 동작시켜야 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3-2. 화면에 노출되고 사라지는 시점 구하기&lt;/h2&gt;
&lt;p&gt;Intersection Observer API를 활용해 요소가 화면에 노출되고 사라지는 시점을 구했습니다. Intersection Observer API는 타겟 요소와 상위 혹은 최상위 요소와의 교차점을 관찰하여 교차되는지 아닌지를 구별하는 기능을 가지고 있습니다.&lt;/p&gt;
&lt;p&gt;MDN에 따르면 다음과 같은 상황에 Intersection Observer API가 필요하다고 합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;페이지가 스크롤 되는 도중에 발생하는 이미지나 다른 컨텐츠의 지연 로딩.&lt;/li&gt;
&lt;li&gt;스크롤 시에, 더 많은 컨텐츠가 로드 및 렌더링되어 사용자가 페이지를 이동하지 않아도 되게 하는 infinite-scroll 을 구현.&lt;/li&gt;
&lt;li&gt;광고 수익을 계산하기 위한 용도로 광고의 가시성 보고.&lt;/li&gt;
&lt;li&gt;사용자에게 결과가 표시되는 여부에 따라 작업이나 애니메이션을 수행할 지 여부를 결정.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Intersection Observer API를 활용해 타겟요소의 교차 시점을 isLoaded 값으로 판별할 수 있는 useIntersectionObserver hook을 구현했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; useIntersectionObserver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;targetRef&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; RefObject&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; observerRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IntersectionObserver&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;isLoaded&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setIsLoaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;intersectionCallBack&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IntersectionObserverEntry&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IntersectionObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    entries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;entry&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isIntersecting&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;setIsLoaded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;token comment&quot;&gt;// 타겟 요소가 화면에 보이는 지 체크&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IntersectionObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;intersectionCallBack&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        threshold&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 타겟 요소의 가시성 퍼센티지를 나타내는 속성&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    targetRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;targetRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;// 해당 요소가 언마운트 시 disconnect&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;targetRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isLoaded &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API&quot;&gt;Intersection_Observer_API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3-3. 독립된 영역으로 분리되어 스크롤 값 가지기&lt;/h2&gt;
&lt;p&gt;독립된 영역의 스크롤 값을 구하기 위해 useOnContainerScroll hook을 구현했습니다. useOnContainerScroll hook은 매개변수로 타겟 요소(container)와 스크롤 움직임에 따라 애니메이션을 실행시킬 onScroll을 받습니다. 아래의 코드를 좀 더 살펴보면 useIntersectionObserver hook으로 타켓 요소의 가시성을 판단하여 타겟 요소의 스크롤 값을 구할 onRunScroll 함수를 호출합니다.&lt;/p&gt;
&lt;p&gt;onRunScroll 함수는 타켓 요소의 스크롤 값을 구하는 것뿐만 아니라 애니메이션을 동작시킬 함수로 화면의 렌더링에 영향을 미치기 때문에 requestAnimationFrame으로 비동기를 처리했습니다.&lt;/p&gt;
&lt;p&gt;requestAnimationFrame 메서드는 브라우저 화면을 렌더링하는 리페인트 이전에 인자로 받은 콜백함수를 디스플레이 주사율에 맞춰 호출하기 때문에 애니메이션을 업데이트할 때 성능적으로 우수합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useIntersectionObserver &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./useIntersectionObserver&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useOnContainerScroll&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;container&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; RefObject&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLElement&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onScroll&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isLoaded &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useIntersectionObserver&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLElement&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dimension &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;scrollHeight&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;windowHeight&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;scrollInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; ScrollInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;scrollY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;progress&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; buffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; isRunning &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; latestRequestedTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onRunScroll&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    latestRequestedTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isRunning&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    isRunning &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;play&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; now &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; buffer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; scrolledY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pageYOffset &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHeight&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        scrollInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrolledY &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dimension&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;top&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        scrollInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;progress &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scrollInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollY &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; dimension&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollHeight&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;onScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;now &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; latestRequestedTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          isRunning &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;setDimension&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 현재 container의 수치로 dimension의 값을 할당 함&lt;/span&gt;
		dimension&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; container&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clientWidth&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isLoaded&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onRunScroll&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;resize&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setDimension&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setDimension&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;scroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onRunScroll&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;resize&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setDimension&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;isLoaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; dimension&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scrollInfo &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 useOnContainerScroll hook으로 각각의 Section 영역의 스크롤 값을 progress로 구할 수 있습니다. progress 값으로 애니메이션을 작동시키면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useOnContainerScroll &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;@/hooks/useOnContainerScroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ViewSection1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sectionRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLDivElement&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; dimension&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scrollInfo &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useOnContainerScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sectionRef&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; progress &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; scrollInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollY &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; dimension&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;windowHeight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// progress 값으로 애니메이션으로 실행 시키면 됩니다.&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;progress &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;progress &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;h1&gt;4. 마치면서&lt;/h1&gt;
&lt;p&gt;4차 데모데이 전날 단 하루 만에 랜딩 페이지를 기획하고 개발했었는데 프론트엔드 개발자로서 재밌었던 경험이었습니다.(그 후에 수많은 리팩토링을 했던 건 비밀…)&lt;/p&gt;
&lt;p&gt;항상 다른 사이트의 랜딩 페이지를 볼 때마다 우와.. 했었지만 우리가 직접 만들어 보니 쉽지 않은 작업이구나! 라는 생각이 들었네요 ㅎㅎ 프론트엔드 개발자 분들이 이글을 보고 계신다면 여러분의 랜딩 페이지를 한번 만들어 보시는 건 어떨까요? 매우 재미있는 추억이 되실거 같아요.&lt;/p&gt;
&lt;p&gt;공책팀의 랜딩 페이지를 구경 하고싶으시다면 &lt;a href=&quot;https://gongcheck.day/&quot;&gt;공책 사이트&lt;/a&gt;에서 확인 하실 수 있습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;5. 참고&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/clip&quot;&gt;CanvasRenderingContext2D.clip()&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API&quot;&gt;Canvas_API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.awebco.com/blog/hero-section/&quot;&gt;Hero Section 이란?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API&quot;&gt;Intersection_Observer_API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Jenkins 무중단 배포]]></title><description><![CDATA[…]]></description><link>https://gong-check.github.io/dev-blog/BE/쿼리치/nonstop-deployment/nonstop-deployment/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/쿼리치/nonstop-deployment/nonstop-deployment/</guid><pubDate>Thu, 13 Oct 2022 22:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;무중단 배포란?&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;서비스를 운영할 때 새로운 버전을 배포하는 동안 운영중인 애플리케이션이 종료되는 문제가 있다.&lt;/p&gt;
&lt;p&gt;이런 문제는 사용자에게 안 좋은 경험을 제공하기 때문에 서비스가 정지되지 않고 배포할 수 있는 환경을 구성하기 위한 여러 전략이 존재한다.&lt;/p&gt;
&lt;h3&gt;무중단 배포 전략&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Rolling Update&lt;/li&gt;
&lt;li&gt;Blue-Green Deployment&lt;/li&gt;
&lt;li&gt;Canary Release&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Rolling Update&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/21b4d/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVQoz22Sz0/TcBjG+d+4GG8aE6OJHjx48kIMFw/EBBMVQSdOhIgaJAG0QuIIqEjQsLlswAi0Xbu2W/ejY92+pWPr1q79/jRuiy7qc/+8eZ7nfYYYY5RSggKCfOh32D/CsMMoYf/TEGPM84OEWIwd6QdpXa16ZgPmLd+oB727cV4XS2eghdWqX3U82weWByijfdhuo5sL2Ssv5Olt8/wUf/9j/tpcZmRRYYwRSkdWCpemhdCX0vBDcfLT0bIYnk2GEEF9+LQFb8zLV58LTz4bF56KExvF63Py6LL2yzOhtxbVy2Eh/LV87lE6tMVz0uyr1Az+DRPK6i62HFgog31eK4Mzy4FW0+8Fa3aYZpxmsiXNsK1GW9FlJZ8h3Ra6MMaVygkMfEowRj4dqIcQAmqmYRSyWRXBgFIaBAFC6E9hDReOceqd97lEKflBehsv7UYy3HZus2uKRERuKfU6mttZEd7EijtbufV1hcME92HgwIthefjBMcev3tsdXZWWHsfH5w+e9eCXqdBEdGxDW7v7/fY7YWFmb3LqxzgisA93AhzZL68lDN3OJ/NR6UQ4NPZUS+q9SgLCcSWVA0pM+5appiUgCObhQGZCmnatVQeMsbbjAhN4be+vPbiOa9fstuMOjuQnwVULSoUvPe8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/f058b/Untitled.png&quot;
        srcset=&quot;/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/c26ae/Untitled.png 158w,
/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/6bdcf/Untitled.png 315w,
/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/f058b/Untitled.png 630w,
/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/40601/Untitled.png 945w,
/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/78612/Untitled.png 1260w,
/dev-blog/static/b7978d5e24afd954426ab14aeb985b88/21b4d/Untitled.png 1280w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;롤링 전략은 사용중인 인스턴스 내에서 새 버전을 교체하는 가장 기본적인 전략이다. 서비스중인 인스턴스 하나를 로드밸런서에서 라우팅하지 않도록 한 뒤 새 버전을 적용하여 다시 라우팅하는 전략으로 모든 인스턴스를
순차적으로 새로운 버전으로 교체하는 전략이다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;롤링 전략은 구성된 자원을 그대로 유지한 채로 무중단 배포가 가능하기에 관리가 편하다.&lt;/li&gt;
&lt;li&gt;인스턴스마다 차례로 배포를 진행하기 때문에 상황에 따라 손쉽게 롤백이 가능하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;롤링 전략은 인스턴스가 제한적일 경우에 사용되며 새 버전을 배포할 때 기존 트래픽을 감당하던 인스턴스 수가 감소하기 때문에 서비스 처리 용량을 고려해야 한다.&lt;/li&gt;
&lt;li&gt;배포가 진행되는 동안 구버전과 신버전이 공존하기 때문에 호환성 문제가 발생할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Blue-Green Deployment&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/6253a114809880355c8f5d9dcac77667/21b4d/Untitled_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.0506329113924%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACU0lEQVQoz22Sy2/TQBDG+39xRhw4c0EUgeDAgVMDN4LUQOmTtiBTKRUIJIR4qFWrPqBUqoqQALVVHxBSmsR27DgvJ078ynrttXenxA4RibqH1Xq+/c14v5kB6F2GYei63hdkjAFAtVpVVbX7CQAD/8sIoWQyyXGcaZrdIKUUABRFicfjsVgsSh1JHTi6cXB4NDQUi925u7O72w1G+/7+Acc9m5mZzWSz/XB3uRg7yMLIpoHf99u2ZWLHcR3EwnQdONIalvN262T85ebo840P2yd1A4Vl21JZs19v/hp98XHi1ed3W78t5IVUCNMQzpf1a4/WBhMrVxIrtyY3hFL7bb4fAEBarN0cW74+sjT4YPH29JraaEUlewzDDhJFQRByCHVkx3G6XRAFviDLUbo+t8FEnqojWdWRSxiwgFJgbf8ZgE+ZH4Dl2iY2bM8mAemBAUC3EMIudknwz4+oed2zT31CiUNaro87cPTgQ9keXpan1iXkQsUurGYWlv+8150mI0SsOWPrxeGlvGZS06uvZhYW029qrUobDkI/P/1snJ9IXZzc12zGN9PT3x6Of71fscpA6YFkXphKnUvsyjWiInn6+8jol3v5Jh9WDuHtY/3yXPrGfEpvMbF5Mr/3ZG7nca2lQhCkFOtqMn3p6VFRIzVUSO7Ncj8mFENqw9GcWi2cyoiiUm7Piefm8llB5olPMMau5x/npIxQoAw83+XlXC6fJb53xoRJUr6oFM80jOf5UqkEDM5oVUAZpazRaGiaFh5p1GoGocSgrtUN3QhoEEl/4VNV/DD2zU+3iAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled_1&quot;
        title=&quot;Untitled_1&quot;
        src=&quot;/dev-blog/static/6253a114809880355c8f5d9dcac77667/f058b/Untitled_1.png&quot;
        srcset=&quot;/dev-blog/static/6253a114809880355c8f5d9dcac77667/c26ae/Untitled_1.png 158w,
/dev-blog/static/6253a114809880355c8f5d9dcac77667/6bdcf/Untitled_1.png 315w,
/dev-blog/static/6253a114809880355c8f5d9dcac77667/f058b/Untitled_1.png 630w,
/dev-blog/static/6253a114809880355c8f5d9dcac77667/40601/Untitled_1.png 945w,
/dev-blog/static/6253a114809880355c8f5d9dcac77667/78612/Untitled_1.png 1260w,
/dev-blog/static/6253a114809880355c8f5d9dcac77667/21b4d/Untitled_1.png 1280w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;운영 환경에서 구 버전과 동일하게 신 버전을 배포하고 일제히 전환하여 모든 트래픽을 신 버전으로 전환하는 전략이다. 블루 그린 전략은 물리적인 서버를 대상으로 사용하기에는 비용상 버겁다. 그래서 클라우드 환경에서
쉽게 인스턴스를 생성하거나 없앨 수 있는 AWS 나 Docker 와 같은 가상 환경에서 사용하는 것이 효과적이다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;롤링 전략과 마찬가지로 빠른 롤백이 가능하다.&lt;/li&gt;
&lt;li&gt;구버전과 동일한 환경에서 신버전 인스턴스를 구성하기 때문에 실제 서비스 환경에서 신버전을 미리 테스트할 수 있다.&lt;/li&gt;
&lt;li&gt;배포가 완료된 후 남아있는 구버전 환경을 다음 배포에 재사용 할 수 있다.&lt;/li&gt;
&lt;li&gt;신버전 배포가 진행되는 동안 서버 과부화가 일어날 확률이 적다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Canary Release&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/ae694/Untitled_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVQoz2WSXU8TQRSG979544X+IxMCoiGyJibQKi0hXKkBL1QimgaRfsG2NtClac1ia2lrarbTXdLtdnbOfB2z25JgfK7OPMk7805mDExgjFFK8V9owv8SAOazgYha4+s3bzc2N+dWKYWIQshMdjv98pVMlnPJGEul0nt7+3fDumHXit9yNAwQEQCEkFLKRr1mlU4gmt1KwQHKhePvVlFwtgj/6PnZj+fpd2c1Z4iIUmlEbF37OwfnmfcVu+MmJ8fS7oy2P1R3Dy9+DW8WYbvtPt05Wsnmype9OCzjhtXWcGnr83Lmi9UcJDvGsmh3l7c+re0eXQ2829qInHPUUTIu0HHViPNA35FxBc0Q5eLOUmsSsGkkuBJTmHLFEZFLPZpEIZMgIYBAKJFImLBJyGdURAEEUgkj70wevmhY7XDK3Y3Ker77FREP6uP7pt3os3HUN09XKr9LiJi/zj0rLXmUdHxnrfSoNbo0Tlr+vSdW2QkC7pqF1eOfOUQ8rLsP1qvNQUTowCysVvtlRDzr5VOn5g31u377efGxM2oaAPyPS4ALpRXxSDgL5+/pkrFMIGNCo/ir0Ih6vqeUEkIQjwDAXyr6G93vIQW6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled_2&quot;
        title=&quot;Untitled_2&quot;
        src=&quot;/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/f058b/Untitled_2.png&quot;
        srcset=&quot;/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/c26ae/Untitled_2.png 158w,
/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/6bdcf/Untitled_2.png 315w,
/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/f058b/Untitled_2.png 630w,
/dev-blog/static/ea85ff4db5cc2698401b8227b5d90cdd/ae694/Untitled_2.png 850w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;카나리아&lt;/code&gt; 라는 새는 유독가스에 굉장히 민감한 동물이다. 과거 광부들은 유독가스에 민감한 카나리아 새를 유독가스 누출의 위험을 감지하는 용도로 사용하였다.&lt;/p&gt;
&lt;p&gt;카나리 전략은 위험을 빠르게 감지할 수 있는 배포 전략이다. 신버전의 제공 범위를 늘려가면서 모니터링 및 피드백 과정을 거칠 수 있다. 로드밸런서를 통해 신버전의 제품을 경험하는 사용자를 조절할 수 있는 것이
특징으로 신버전을 특정 사용자 혹은 단순 비율에 따라 구분해 제공할 수 있다. 이렇게 서버의 트래픽 일부를 신버전으로 분산하여 오류 여부를 확인할 수 있다.&lt;/p&gt;
&lt;h3&gt;장점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;블루 그린 전략과 마찬가지로 신배포 전에 실제 운영 환경에서 미리 테스트할 수 있다.&lt;/li&gt;
&lt;li&gt;카나리 배포는 단계적인 전환 방식을 통해 부정적 영향을 최소화하고 상황에 따라 트래픽 양을 늘리거나 롤백할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;단점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;롤링 전략과 마찬가지로 구버전과 신버전이 모두 운영되기 때문에 버전 관리가 필요하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;사전 준비&lt;/h2&gt;
&lt;hr&gt;
&lt;h3&gt;전략 구성&lt;/h3&gt;
&lt;p&gt;무중단 배포를 구현하기 위해 위 전략 중 하나를 선택해야 했고 공책 프로젝트에선 블루 그린 전략을 선택했는데 그 이유는 다음과 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;EC2 인스턴스를 여유롭게 사용할 수 있는 환경에선 블루 그린 전략이 적합할 것이라 판단&lt;/li&gt;
&lt;li&gt;사용중인 EC2 인스턴스가 두 개의 스프링 프로젝트를 동시에 구동하기엔 오버헤드가 클 것이라 판단&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;블루 그린 전략 중 하나의 EC2 인스턴스 내부에서 두 개의 스프링 프로젝트를 구동하여 포트 스위칭을 통해 블루 그린 전략을 구현하는 방법이 있는데 2번 이유 때문에 EC2 인스턴스를 늘려 IP 스위칭을 통한 블루
그린 전략을 구현하기로 했다.&lt;/p&gt;
&lt;h3&gt;블루 그린 전략 시나리오&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;인스턴스들을 &lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;group_b&lt;/code&gt; 로 구성&lt;/li&gt;
&lt;li&gt;구동중인 &lt;code class=&quot;language-text&quot;&gt;group&lt;/code&gt; 을 확인&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 가 구동중이라면 &lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 는 &lt;code class=&quot;language-text&quot;&gt;blue&lt;/code&gt; 로 &lt;code class=&quot;language-text&quot;&gt;group_b&lt;/code&gt; 는 &lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 으로 설정&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 그룹에 신버전 배포 후 실행&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 그룹에 대한 Health Check 진행&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Nginx&lt;/code&gt; Reverse Proxy 설정을 &lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 그룹으로 전환&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;blue&lt;/code&gt; 그룹 서버를 모두 종료&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Global properties 설정&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/eac55/Screen_Shot_2022-10-13_at_7.16.20_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.87341772151898%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVQ4y6WUy26DMBBF+f9f67677kigEYkLNsbvW80AwUQoBWrpMBYyl3l5irquUVUVyrKEUgr5Silhz5rPkS2cD2jbFlJKtkTXdSyeH/yLp+DH5xfKy4W9vF6v6Psezjnm6GJBPRgIIdA0DVTfZ38bD8SYENMOQkCMEQU9KFytNQuFEDLiTgK8HtgWznsYayGlgp+E/Er0PatvyEPaUN6sdWOIOwqwBadmFpRK4X5/sCWPnTuI97DOc/gccjrp1Sscci5ILv+XMWSpYIzhPKyqF1/s1ru4VDmGSZBuhRA/Y/7OYt2YQxKkHrTWch+ervKcw9nDhxB8U+aeOowPS1EomWT9tD9DmHgKErPrY5MuzRpTbrP7vXo3VZlUe60xGIO0c1S9o7DO4ft2Aw1ayt+Rwbo1vn4BJIqMNy/ykfYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-10-13 at 7.16.20 PM.png&quot;
        title=&quot;Screen Shot 2022-10-13 at 7.16.20 PM.png&quot;
        src=&quot;/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/f058b/Screen_Shot_2022-10-13_at_7.16.20_PM.png&quot;
        srcset=&quot;/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/c26ae/Screen_Shot_2022-10-13_at_7.16.20_PM.png 158w,
/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/6bdcf/Screen_Shot_2022-10-13_at_7.16.20_PM.png 315w,
/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/f058b/Screen_Shot_2022-10-13_at_7.16.20_PM.png 630w,
/dev-blog/static/7c8af764d501a7a98a829895ee1b708c/eac55/Screen_Shot_2022-10-13_at_7.16.20_PM.png 887w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;group_b&lt;/code&gt; 로 구분할 WAS 의 IP 를 명시해주기 위해 Global properties 를 설정해주어야 한다.&lt;/p&gt;
&lt;p&gt;Manage Jenkins → Configure System → Global properties 에서 설정할 수 있다.&lt;/p&gt;
&lt;p&gt;명시된 IP 들과 SSH 통신이 이루어져야하기 때문에 Publish over SSH 항목에 모두 등록되어 있어야 한다.&lt;/p&gt;
&lt;h2&gt;Pipeline 코드&lt;/h2&gt;
&lt;hr&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;pipeline &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    agent any

    stages &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;git clone&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;checkout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GitSCM&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; branches&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;*/dev&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; extensions&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;SubmoduleOption&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; disableSubmodules&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; parentCredentials&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; recursiveSubmodules&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reference&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; trackingSubmodules&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userRemoteConfigs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;credentialsId&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;github-webhook-access-token&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;https://github.com/woowacourse-teams/2022-gong-check&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;build&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;backend&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    sh &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;
                        echo &apos;=== start application bootJar ===&apos;
                        ./gradlew clean bootJar
                    &apos;&apos;&apos;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;publish ssh to server&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            environment &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                GROUP_GREEN &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;returnStdout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; script&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
                    group_a_array=($group_a)
                    alive_was_count=0
                    for i in &quot;${group_a_array[@]}&quot;
	                      do
		                        if curl -I -X OPTIONS &quot;http://${i}:8080&quot;; then
			                          alive_was_count=$((alive_was_count+1))
		                        fi
	                      done
                    if [ ${alive_was_count} -eq 0 ];then
                        echo &apos;group_a&apos;
                    elif [ ${alive_was_count} -eq ${#group_a_array[@]} ];then
                        echo &apos;group_b&apos;
                    else
                        echo &apos;currently runnig was counts are not correct&apos;
                        exit 100
                    fi&apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;backend&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    script &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; green_ips&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; blue_ips&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; envVar &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEnvironment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;group_a&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; GROUP_GREEN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            green_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                            blue_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            green_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                            blue_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; green_ips_inline &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; green_ips&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseSSHServerConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

                        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; green_ips&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sh /home/ubuntu/script/server_start.sh&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/deploy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs/*.jar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

                        sh &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
												    array=(&apos;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; green_ips_inline &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;)
												
												    for ip in &quot;${array[@]}&quot;
																do
																    url=${array[0]}
																    attempts=10
																    timeout=10
																    online=false
																
																    echo &quot;Checking status of $url.&quot;
																
																    for (( i=1; i&amp;lt;=$attempts; i++ ))
																		    do
																		        code=$(curl -sL --connect-timeout 20 --max-time 30 -w &quot;%{http_code}\\n&quot; &quot;$url:8080&quot; -o /dev/null)
																		
																		        if [ &quot;$code&quot; = &quot;200&quot; ]; then
																		            online=true
																		            echo &quot;Connection successful.&quot;
																		            break
																		        else
																		            sleep $timeout
																		            echo &quot;Connection failed.&quot;
																		        fi
																		    done
																
																    if $online; then
																        echo &quot;Monitor finished, website is online.&quot;
																        exit 0 # Build Success
																    else
																        echo &quot;Monitor failed, website seems to be down.&quot;
																        exit 1 # Build Failed
																    fi
																done
												&apos;&apos;&apos;&lt;/span&gt;

                        &lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gongcheck-reverse-proxy-dev&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
                            function parse_was_address() {
                                array=(&apos;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; green_ips_inline &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;)
                                str=&quot;&quot;
                                  for i in &quot;${array[@]}&quot;
                                    do
                                          str+=&apos;set $service_url &apos;
                                        str+=&quot;http://${i}:8080;\n&quot;
                                    done
                                echo -e &quot;$str&quot;
                            }
                            echo -e &quot;$(parse_was_address)&quot; | sudo tee /etc/nginx/conf.d/service-url.inc
                            sudo service nginx restart
                            &apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

                        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; blue_ips&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sh /home/ubuntu/script/kill.sh&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/deploy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs/*.jar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;clean up workspace&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            steps &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                cleanWs deleteDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    post &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        success &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;slackSend&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;jenkins&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#00FF00&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SUCCESSFUL: Job &apos;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JOB_NAME&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BUILD_NUMBER&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;]&apos; (&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BUILD_URL&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        failure &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;slackSend&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;jenkins&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#FF0000&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;FAILED: Job &apos;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JOB_NAME&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BUILD_NUMBER&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;]&apos; (&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BUILD_URL&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@NonCPS&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseSSHServerConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; xml &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;XmlSlurper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;JENKINS_HOME&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/jenkins.plugins.publish_over_ssh.BapSshPublisherPlugin.xml&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_nick_names &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; xml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;**&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;findAll &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_ip_address &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; xml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;**&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;findAll &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;hostname&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; server_nick_names&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_ip_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; server_ip_address&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_nick_name_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; server_nick_names&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server_ip_str&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; server_nick_name_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;블루 그린 그룹 구분&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;environment &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    GROUP_GREEN &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;returnStdout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; script&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
        group_a_array=($group_a)
        alive_was_count=0
        for i in &quot;${group_a_array[@]}&quot;
            do
                if curl -I -X OPTIONS &quot;http://${i}:8080&quot;; then
                    alive_was_count=$((alive_was_count+1))
                fi
            done
        if [ ${alive_was_count} -eq 0 ];then
            echo &apos;group_a&apos;
        elif [ ${alive_was_count} -eq ${#group_a_array[@]} ];then
            echo &apos;group_b&apos;
        else
            echo &apos;currently runnig was counts are not correct&apos;
            exit 100
        fi&apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Global properties 설정을 통해 &lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;group_b&lt;/code&gt; 변수를 사용할 수 있다. &lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 배열을 순회하면서 &lt;code class=&quot;language-text&quot;&gt;OPTIONS&lt;/code&gt; 요청을 보내 해당 그룹에 속한 서버들이 구동중인지 확인할
수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;environment&lt;/code&gt; 블럭을 통해 쉘 스크립트에서 반환한 값을 환경 변수에 담아서 외부 Groovy 스크립트에서 사용할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 에 속한 서버들이 구동중이라면 &lt;code class=&quot;language-text&quot;&gt;GROUP_GREEN&lt;/code&gt; 에는 &lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 라는 문자열이 저장된다.&lt;/p&gt;
&lt;h3&gt;그룹별 IP 배열 생성&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; green_ips&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; blue_ips&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; envVar &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEnvironment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;group_a&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; GROUP_GREEN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    green_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blue_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    green_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    blue_ips &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; envVar&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;env.getEnvironment()&lt;/code&gt; 메서드를 통해 Global properties 에서 선언한 환경 변수를 Groovy 스크립트에서 사용할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;environment&lt;/code&gt; 블럭에서 선언한 &lt;code class=&quot;language-text&quot;&gt;GROUP_GREEN&lt;/code&gt; 을 통해 &lt;code class=&quot;language-text&quot;&gt;green_ips&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;blue_ips&lt;/code&gt; 를 구분한다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;group_a&lt;/code&gt; 가 &lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 이라면 &lt;code class=&quot;language-text&quot;&gt;green_ips&lt;/code&gt; 에는 &lt;code class=&quot;language-text&quot;&gt;192.168.1.199&lt;/code&gt; 가 할당되었을 것이다.&lt;/p&gt;
&lt;h3&gt;IP 에 해당하는 SSH Server Name Map 생성&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@NonCPS&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseSSHServerConfiguration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; xml &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;XmlSlurper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;JENKINS_HOME&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/jenkins.plugins.publish_over_ssh.BapSshPublisherPlugin.xml&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_nick_names &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; xml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;**&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;findAll &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_ip_address &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; xml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;**&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;findAll &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;hostname&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; server_nick_names&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_ip_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; server_ip_address&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; server_nick_name_str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; server_nick_names&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server_ip_str&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; server_nick_name_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Jenkins 의 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 는 IP 가 아닌 SSH Server Name 으로 작업을 수행하기 때문에 IP 에 해당하는 SSH Server Name 을 알아내야 한다.&lt;/p&gt;
&lt;p&gt;Jenkins 는 Publish over SSH 항목에서 설정했던 SSH Server Name 과 IP 등의
정보를 &lt;code class=&quot;language-text&quot;&gt;${JENKINS_HOME}/jenkins.plugins.publish_over_ssh.BapSshPublisherPlugin.xml&lt;/code&gt; 에 저장한다.&lt;/p&gt;
&lt;p&gt;위 파일을 파싱하여 IP 와 SSH Server Name 이 &lt;code class=&quot;language-text&quot;&gt;key-value&lt;/code&gt; 형태로 이루어진 Map 을 생성해 스크립트에서 활용할 필요가 있다.&lt;/p&gt;
&lt;p&gt;Jenkins 는 기본적으로 작업 중지 및 재개 등을 위해 스크립트의 &lt;code class=&quot;language-text&quot;&gt;step&lt;/code&gt; 별 상태를 직렬화하여 저장하는데, XML 파싱 관련 객체들은 직렬화가 불가능하여 에러가 발생한다.&lt;/p&gt;
&lt;p&gt;때문에 XML 파싱 관련 로직을 별도의 메서드로 분리하여 &lt;code class=&quot;language-text&quot;&gt;@NonCPS&lt;/code&gt; 애너테이션을 통해 직렬화 및 저장 대상에서 제외시킨다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;218&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; frontend &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dev &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;247&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; frontend &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; prod &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;220&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; image &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; prod &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;199&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; backend &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dev &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; a &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;234&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; backend &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dev &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; b &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;201&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; backend &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; prod &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;212&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; image &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dev &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token number&quot;&gt;192.168&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;240&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gongcheck &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; reverse &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; proxy &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; dev
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;파싱된 Map 을 확인해보면 위와 같이 IP 에 해당하는 SSH Server Name 을 가져올 수 있도록 생성되어 있다.&lt;/p&gt;
&lt;h3&gt;Green 그룹 배포 및 WAS 실행&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; green_ips&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sh /home/ubuntu/script/server_start.sh&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/deploy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs/*.jar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;green_ips&lt;/code&gt; 배열을 순회하면서 &lt;code class=&quot;language-text&quot;&gt;map.get(item)&lt;/code&gt; 을 통해 IP 에 해당하는 SSH Server Name 을 통해 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 를 실행할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;green_ips&lt;/code&gt; 에 &lt;code class=&quot;language-text&quot;&gt;192.168.1.199&lt;/code&gt; 가 들어있다면, &lt;code class=&quot;language-text&quot;&gt;map.get(item)&lt;/code&gt; 을 통해 &lt;code class=&quot;language-text&quot;&gt;gongcheck-backend-dev-a&lt;/code&gt; 에 해당하는 WAS 로 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 를 실행할
것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 진행중인 application pid 조회&quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CURRENT_PID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt; -ef &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; java &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; jar &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; -v &lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; gong-check &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 진행중인 application pid : &lt;span class=&quot;token variable&quot;&gt;$CURRENT_PID&lt;/span&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -z &lt;span class=&quot;token variable&quot;&gt;${CURRENT_PID}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 구동중인 어플리케이션이 없으므로 종료하지 않습니다.&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; sudo kill -9 &lt;span class=&quot;token variable&quot;&gt;$CURRENT_PID&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;kill&lt;/span&gt; -9 &lt;span class=&quot;token variable&quot;&gt;${CURRENT_PID}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lsof&lt;/span&gt; -i:8080
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 어플리케이션 정상 종료 완료&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 어플리케이션 배포 시작&quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;JAR_PATH&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt; -t /home/ubuntu/deploy/*.jar &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; -1&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUILD_ID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;dontKillMe &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; java -jar &lt;span class=&quot;token variable&quot;&gt;${JAR_PATH}&lt;/span&gt; --spring.profiles.active&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;dev  &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&gt;&lt;/span&gt; /dev/null &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; /dev/null &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 어플리케이션 배포 종료&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 는 인스턴스 내부에 있는 &lt;code class=&quot;language-text&quot;&gt;server_start.sh&lt;/code&gt; 를 실행시키는데, 이는 위와 같다.&lt;/p&gt;
&lt;h3&gt;Green 그룹 Health Check&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;sh &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
    array=(&apos;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; green_ips_inline &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;)

    for ip in &quot;${array[@]}&quot;
				do
				    url=${array[0]}
				    attempts=10
				    timeout=10
				    online=false
				
				    echo &quot;Checking status of $url.&quot;
				
				    for (( i=1; i&amp;lt;=$attempts; i++ ))
						    do
						        code=$(curl -sL --connect-timeout 20 --max-time 30 -w &quot;%{http_code}\\n&quot; &quot;$url:8080&quot; -o /dev/null)
						
						        if [ &quot;$code&quot; = &quot;200&quot; ]; then
						            online=true
						            echo &quot;Connection successful.&quot;
						            break
						        else
						            sleep $timeout
						            echo &quot;Connection failed.&quot;
						        fi
						    done
				
				    if $online; then
				        echo &quot;Monitor finished, website is online.&quot;
				        exit 0 # Build Success
				    else
				        echo &quot;Monitor failed, website seems to be down.&quot;
				        exit 1 # Build Failed
				    fi
				done
&apos;&apos;&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쉘 스크립트를 통해 &lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 그룹에 대한 Health Check 를 진행한다. &lt;code class=&quot;language-text&quot;&gt;curl&lt;/code&gt; 요청을 통해 해당 IP 의 8080번 포트가 열려있는지 확인한다. 10번의 시도 간 서버가 응답하지 못한다면 서버
배포에 실패했다고 판단하고 스크립트를 종료한다.&lt;/p&gt;
&lt;h3&gt;Nginx 설정 변경&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 에 해당하는 WAS 가 준비가 되어 있으니 &lt;code class=&quot;language-text&quot;&gt;Nginx&lt;/code&gt; 에서 요청을 &lt;code class=&quot;language-text&quot;&gt;green&lt;/code&gt; 으로 보낼 수 있도록 설정을 변경해주어야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;server &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	server_name dev.gongcheck.shop&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	include /etc/nginx/conf.d/service-url.inc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	location / &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		proxy_pass &lt;span class=&quot;token variable&quot;&gt;$service_url&lt;/span&gt;/index.html&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;현재 &lt;code class=&quot;language-text&quot;&gt;Nginx&lt;/code&gt; 에선 &lt;code class=&quot;language-text&quot;&gt;proxy_pass&lt;/code&gt; 에 &lt;code class=&quot;language-text&quot;&gt;service_url&lt;/code&gt; 이라는 변수를 할당하고 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gongcheck-reverse-proxy-dev&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;#!/bin/bash
    function parse_was_address() {
        array=(&apos;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; green_ips_inline &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&apos;)
        str=&quot;&quot;
          for i in &quot;${array[@]}&quot;
            do
                str+=&apos;set $service_url &apos;
                str+=&quot;http://${i}:8080;\n&quot;
            done
        echo -e &quot;$str&quot;
    }
    echo -e &quot;$(parse_was_address)&quot; | sudo tee /etc/nginx/conf.d/service-url.inc
    sudo service nginx restart
    &apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 변수는 &lt;code class=&quot;language-text&quot;&gt;service-url.inc&lt;/code&gt; 를 통해 선언되고 있기에 이를 수정하는 쉘 스크립트를 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 를 통해 수행한다. &lt;code class=&quot;language-text&quot;&gt;tee&lt;/code&gt; 명령어를 통해 해당 파일을 덮어씌우거나 새로 생성할 수
있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$service_url&lt;/span&gt; http://192.168.1.199:8080&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;green_ips_inline&lt;/code&gt; 에 &lt;code class=&quot;language-text&quot;&gt;192.168.1.199&lt;/code&gt; 만 존재한다면, &lt;code class=&quot;language-text&quot;&gt;service-url.inc&lt;/code&gt; 파일에는 위와 같은 스크립트가 작성되어 있을 것이다.&lt;/p&gt;
&lt;h3&gt;Blue 그룹 WAS 종료&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; blue_ips&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sshPublisher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;publishers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshPublisherDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configName&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; transfers&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sshTransfer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cleanRemote&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; excludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execCommand&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sh /home/ubuntu/script/kill.sh&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; execTimeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; flatten&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; makeEmptyDirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; noDefaultExcludes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; patternSeparator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;[, ]+&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectory&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/deploy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; remoteDirectorySDF&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; removePrefix&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sourceFiles&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/libs/*.jar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; usePromotionTimestamp&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useWorkspaceInPromotion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;blue_ips&lt;/code&gt; 배열을 순회하면서 &lt;code class=&quot;language-text&quot;&gt;map.get(item)&lt;/code&gt; 을 통해 IP 에 해당하는 SSH Server Name 을 통해 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 를 실행할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;blue_ips&lt;/code&gt; 에 &lt;code class=&quot;language-text&quot;&gt;192.168.1.234&lt;/code&gt; 가 들어있다면, &lt;code class=&quot;language-text&quot;&gt;map.get(item)&lt;/code&gt; 을 통해 &lt;code class=&quot;language-text&quot;&gt;gongcheck-backend-dev-b&lt;/code&gt; 에 해당하는 WAS 로 &lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 를 실행할
것이다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 진행중인 application pid 조회&quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;CURRENT_PID&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt; -ef &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; java &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; jar &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; -v &lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; gong-check &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;{print $2}&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 진행중인 application pid : &lt;span class=&quot;token variable&quot;&gt;$CURRENT_PID&lt;/span&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -z &lt;span class=&quot;token variable&quot;&gt;${CURRENT_PID}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 현재 구동중인 어플리케이션이 없으므로 종료하지 않습니다.&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; sudo kill -9 &lt;span class=&quot;token variable&quot;&gt;$CURRENT_PID&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;kill&lt;/span&gt; -9 &lt;span class=&quot;token variable&quot;&gt;${CURRENT_PID}&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lsof&lt;/span&gt; -i:8080
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt; 어플리케이션 정상 종료 완료&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sshPublisher&lt;/code&gt; 는 인스턴스 내부에 있는 &lt;code class=&quot;language-text&quot;&gt;kill.sh&lt;/code&gt; 를 실행시키는데, 이는 위와 같다.&lt;/p&gt;
&lt;h2&gt;개선 사항&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;추후 WAS 를 다중화한다면 로드 밸런싱을 적용해야하기 때문에 &lt;code class=&quot;language-text&quot;&gt;Nginx&lt;/code&gt; 설정을 변경하는 스크립트를 수정해주어야 한다. 로드 밸런싱 설정 적용은 크게 어렵지 않기 때문에 추후에 서비스가 WAS 다중화를 요구한다면
그때 수정해주어도 무방하다.&lt;/p&gt;
&lt;p&gt;추가로 &lt;code class=&quot;language-text&quot;&gt;blue&lt;/code&gt; 그룹에 해당하는 EC2 인스턴스가 &lt;code class=&quot;language-text&quot;&gt;idle&lt;/code&gt; 상태로 대기하고 있기 때문에 불필요한 비용이 발생하고 있는 것을 알 수 있다. 때문에 배포가 이루어질 때 마다 EC2 인스턴스를 자동으로 생성 및
제거해주는 방식을 고려해 볼 필요가 있다.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://loosie.tistory.com/781&quot;&gt;https://loosie.tistory.com/781&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xlffm3.github.io/devops/mock-blue-green-cd/&quot;&gt;https://xlffm3.github.io/devops/mock-blue-green-cd/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://jiyeonseo.github.io/2020/03/19/jenkins-health-check/&quot;&gt;https://jiyeonseo.github.io/2020/03/19/jenkins-health-check/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[공책 팀의 사용자 경험을 위한 성능 개선 방법]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.
저희 팀은 우아한테크코스…]]></description><link>https://gong-check.github.io/dev-blog/FE/코카콜라/ux-성능개선/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/코카콜라/ux-성능개선/</guid><pubDate>Thu, 13 Oct 2022 00:30:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 백 오피스를 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;공책 팀은 사용자 경험을 개선하기 위해 다양한 시도를 하고 있는데요. 이번에는 성능 개선을 통한 사용자 경험을 향상했던 경험을 공유하겠습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;1. 최적화된 리소스 사용&lt;/h1&gt;
&lt;p&gt;적은 용량의 리소스를 사용하면 빠르게 전달 할 수 있어 화면에 빠르게 보여줄 수 있는데요. 공책 애플리케이션에서는 여러 페이지에서 이미지를 사용하여 화면을 구성하고 있고 사용자의 다양한 디바이스 규격에 알맞은 화면 비율을 제공하는 반응형을 적용한 상태입니다. 하지만 최적화된 이미지를 사용하지 않고 있어서 로딩되는 속도가 느리고 화면 비율에 맞지 않는 이미지를 사용하는 문제점을 가지고 있었습니다.&lt;/p&gt;
&lt;p&gt;정리하면 이미지 리소스 최적화를 통해 다음과 같은 문제를 해결하고자 했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;적은 용량의 이미지 리소스로 화면에 보여지는 로딩 시간 줄이기&lt;/li&gt;
&lt;li&gt;데스크탑, 태블릿, 모바일 환경의 규격에 맞는 이미지 크기 사용하기&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;1-1. 적은 용량의 Webp 이미지 포맷 사용&lt;/h2&gt;
&lt;p&gt;이미지 리소스를 최적화 시키기 위해 Webp 포맷을 선택했습니다. Webp의 특징으로는 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Webp 확장자는 인터넷에서 이미지가 로딩되는 시간을 단축하기 위해 Google이 출시한 파일 포맷이다.&lt;/li&gt;
&lt;li&gt;Webp를 사용하면 웹 사이트에서 고품질 이미지를 표현할 수 있고 PNG, JPEG등 기존 포맷보다 파일 크기가 작아진다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;하지만 Webp 포맷이 호환이 안 되는 브라우저가 있어 PNG 포맷과 함께 사용했고 브라우저 지원하는 이미지 포맷을 선택하여 사용하기 위해 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;picture&gt;&lt;/code&gt;태그를 다음과 같이 활용했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;picture&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;source type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;image/webp&quot;&lt;/span&gt; srcSet&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fallback&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GongCheck&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;picture&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture&quot;&gt;picture mdn&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;1-2. 데스크탑, 태블릿, 모바일 환경의 규격에 맞는 이미지 크기 사용하기&lt;/h2&gt;
&lt;p&gt;반응형에 따른 이미지 사이즈 최적화를 왜 해야 할까요? &lt;a href=&quot;%5Bhttps://web.dev/i18n/ko/optimize-lcp/%5D(https://web.dev/i18n/ko/optimize-lcp/)&quot;&gt;optimize LCP&lt;/a&gt;에 따르면 사용자 경험에 큰 영향을 미치는 요소 중 하나가 화면에 렌더링 되는 콘텐츠를 보기까지 얼마나 많은 시간이 소요되는 점입니다.&lt;/p&gt;
&lt;p&gt;반응형에 따라 이미지 사이즈를 최적화한다면 콘텐츠 요소가 기존보다 빠르게 렌더링 되어 더 나은 사용자 경험을 줄 수 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LCP(Largest Contentful Paint)는 화면에서 가장 큰 콘텐츠 요소가 렌더링을 완료한 시점을 말합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;아래와 같이 반응형에 따른 이미지 최적화를 했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;picture&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;source media&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;(max-width: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;screenSize&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DESKTOP&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;image/webp&quot;&lt;/span&gt; srcSet&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;320w&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;source media&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;(max-width: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;screenSize&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;TABLET&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;image/webp&quot;&lt;/span&gt; srcSet&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;240w&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;source media&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;(max-width: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;screenSize&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MOBILE&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;image/webp&quot;&lt;/span&gt; srcSet&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;160w&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;source type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;image/webp&quot;&lt;/span&gt; srcSet&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;480w&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fallback&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GongCheck&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;picture&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1-3. 이미지 서버&lt;/h2&gt;
&lt;p&gt;프론트에서는 리소스는 서버로부터 전달받아야 하는데요. 저희 공책팀의 백엔드에서는 이미지 서버를 구축하여 최적화를 진행했습니다.
백엔드 오리의 이미지 서버 글을 보시면 자세한 내용을 확인 하실 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://tecoble.techcourse.co.kr/post/2022-09-13-image-storage-server/&quot;&gt;백엔드 오리 - 이미지 서버&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;1-4. 다른 서비스에서는 이미지를 어떻게 보여주고 있을까?&lt;/h2&gt;
&lt;p&gt;공책팀에서는 사용자의 경험을 향상시키기 위해 Webp 포맷, 반응형에 따른 이미지 리사이징을 적용했는데요. 그렇다면 현재 서비스 중인 다른 서비스들은 어떤 방식으로 이미지를 보여주고 있을까요? 이 물음에 대한 궁금증이 생겨 다양한 서비스들을 확인해 봤습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/b284e80b275f818edb4ea561ac73513c/45662/pr.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 86.70886075949367%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC2klEQVQ4y3VUy3LTQBDUBQh2LOv93tV7V5Jl2YrtkFSgSDiQ4sKBD+DCf3DgK/gXPq6pHSmpJBSHrhmpdnt6pkfSvt38ws/vf/Djy2/I9oRmOEB0I6p2B7kZUW+vUe0+or/8jLQ5wktqWEkPi/Wwkg5umMH2GXQrwLnhQXODBoydEAYbmF4Cy0tguvGMCIafw4wkjFDADAqYPoeVtBMiMZ+PiHBl+tC2cYfrfATf34HJ9wjKKyTyPZzsBDs9wuYH2PxixoFgsfERbnEF1t3CK69h8z20NG4wiCOYPIFVI1J5hMc3WPvVI4ygfgExo4YZSjisgxkKOqs5cYFuvEQ3HLDZHdGPlyhlj5AVyKoWhdjADRkWKwtL3Z7xPF+sTIorM4C2tmOErEScCfhJgSgViFOBJJdIyw5ZtaF39D6TSDKJkFcU1bO6G/IGQVJiZYXQ1k4CXjQomx1ysSVkdU/IRU+ECoXcomwGinU3Trk6Kwacjh3CJMXSCKGZHqeKMSkQpEqpi9MaSSbAy5aqKxeV84YTYW2Hj8+Wx5FyH2vLxbkVQXOjHHm9QSkH1N2eYqnUyElBsz0gr3tqzY9zwoMA002w0B281X3aQWrZcBm8KEPASlLE8gbefNEN04mAlYjSmpQGSTGpzyUtNBGZTwjduIDsL3Bze4+bu3t8uv9Kl16d6Xi7snF2buHN0qS41B1SRKpW9iPZBEUYQXPCHBGvJufm2SmwoqGo1LFcwgn4rCKYCYInZE8ILT9FWrao2z3a7ZFyNQJVRLX7kKtPbLl2ifR/oJYXa4/mo4bfDSf6MUS8pqErh5WjC31qT7deqnoBpXBp+LRv4+UHbMd3SMUefrFHUI4ouhPqdpidn3YwrTpaL3Wnana0oyovRA/djiaFyl3VsjqsvpZghlL3emGQIYSlSQYpU/5t2Z1atnxOg58qDhQV1E6qf2JWbybMSlRhPy5ons/aNSZT/gJI0slBUdQ4SAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;pr&quot; title=&quot;pr&quot; src=&quot;/dev-blog/static/b284e80b275f818edb4ea561ac73513c/f058b/pr.png&quot; srcset=&quot;/dev-blog/static/b284e80b275f818edb4ea561ac73513c/c26ae/pr.png 158w,
/dev-blog/static/b284e80b275f818edb4ea561ac73513c/6bdcf/pr.png 315w,
/dev-blog/static/b284e80b275f818edb4ea561ac73513c/f058b/pr.png 630w,
/dev-blog/static/b284e80b275f818edb4ea561ac73513c/40601/pr.png 945w,
/dev-blog/static/b284e80b275f818edb4ea561ac73513c/78612/pr.png 1260w,
/dev-blog/static/b284e80b275f818edb4ea561ac73513c/45662/pr.png 1410w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;성능개선 우테코 미션에서의 코드리뷰 내용 일부분...&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;자세한 내용은 우아한테크코스 성능개선 미션의 밧드 PR에 대한 코멘트를 통해 확인하실 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/woowacourse/perf-basecamp/pull/62&quot;&gt;성능개선 코드리뷰 코멘트&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;2. Lazy Loading&lt;/h1&gt;
&lt;p&gt;Lazy Loading을 적용하여 현재 보이는 콘텐츠만 빠르게 로딩하고 그 이외의 콘텐츠는 나중에 로딩하여 페이지를 보여주는 시간을 단축했습니다.&lt;/p&gt;
&lt;h2&gt;2-1. IntersectionObserver API&lt;/h2&gt;
&lt;p&gt;Lazy Loading은 IntersectionObserver API를 활용하여 현재 관찰 대상인 이미지 요소가 뷰포트에 교차되는 순간을 캐치하여 로딩되도록 구현했습니다. 공책 서비스에서는 다양한 곳에서 IntersectionObserver API를 활용하고 있는데요. 그중 체크리스트 페이지의 이미지를 제어하는 LazyImage hook은 아래와 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;LazyImage&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;LazyImageProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; imageUrl&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;props &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; lazyImageRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HTMLImageElement&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; observerRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;IntersectionObserver&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;isLoaded&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setIsLoaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;intersectionCallBack&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IntersectionObserverEntry&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IntersectionObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    entries&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;entry&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isIntersecting&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unobserve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;setIsLoaded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IntersectionObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;intersectionCallBack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    lazyImageRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lazyImageRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; observerRef&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;isLoaded &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; imageUrl&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;lazyImageRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;데모 4차 영상을 통해 Lazy Loading에 대한 이미지 최적화를 확인 하실 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=ssseI1nySmI&amp;#x26;t=180s&quot;&gt;프로젝트 데모 4차 영상&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;3. 마치면서&lt;/h1&gt;
&lt;p&gt;이번 포스팅에서는 공책(GongCheck)을 이용하는 사용자들에게 최고의 경험을 선사하기 위한 요소 중 하나인 이미지 리소스 처리에 대해 기록했습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;4. 참고&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture&quot;&gt;picture mdn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://web.dev/i18n/ko/optimize-lcp/&quot;&gt;optimize LCP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading&quot;&gt;Lazy Loading&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver&quot;&gt;IntersectionObserver&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[공책 팀이 사용자의 소리로 ‘사용자 경험’을 빠르게 향상시키는 방법은?]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.
저희 팀은 우아한테크코스 4기 과정에서 공간관리 백 오피스를 개발하고 있습니다. 이번 포스팅은 스프린트…]]></description><link>https://gong-check.github.io/dev-blog/FE/코카콜라/ux-design/ux-design/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/코카콜라/ux-design/ux-design/</guid><pubDate>Wed, 12 Oct 2022 22:32:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 백 오피스를 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;이번 포스팅은 스프린트 2주 차에 공책 팀이 고민했던 UI/UX(디자인 부분)에 대한 내용을 담고 있습니다.
(공책 팀의 스프린트 기간은 2주입니다.)&lt;/p&gt;
&lt;h3&gt;목차&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;개발 초기 UI&lt;/li&gt;
&lt;li&gt;사용자의 피드백&lt;/li&gt;
&lt;li&gt;빠르게! 사용자 경험을 향상시킬 수 있었던 이유는?&lt;/li&gt;
&lt;li&gt;마치면서&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1&gt;1. 개발 초기 UI&lt;/h1&gt;
&lt;p&gt;GongCheck 애플리케이션은 크게 두명의 사용자가 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;공간에 대한 체크리스트를 체크하는 &lt;code class=&quot;language-text&quot;&gt;일반 사용자&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;해당 공간을 생성하고 관리하는 &lt;code class=&quot;language-text&quot;&gt;관리자&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;스프린트 1주 차에는 공간을 사용하고 체크리스트를 작성하는 일반 사용자 쪽 화면을 구현하는 게 목표였습니다. 일반 사용자 쪽 화면의 흐름을 간단하게 말씀드리면 아래와 같이 구성됩니다.&lt;/p&gt;
&lt;p&gt;비밀번호 입력 → 공간 선택 → 업무 선택 → 체크리스트&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/d362271e57af14eca6cd08932e5b5432/f0b2f/plan1.jpg&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 118.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAEDAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAfSsO6IyzBXIF//EABgQAAIDAAAAAAAAAAAAAAAAAAECABAR/9oACAEBAAEFAiqQBRMWhW1s/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/AWcb/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERIDEy/9oACAEBAAY/AuUQkZf/xAAaEAEBAAMBAQAAAAAAAAAAAAABABExQSHh/9oACAEBAAE/IfjIhADsO2fidws2kZdDPq//2gAMAwEAAgADAAAAEPg/P//EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAwEBPxAiM//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxAwtW9f/8QAHRABAAMAAgMBAAAAAAAAAAAAAQARITFBUWFx0f/aAAgBAQABPxC/1ndfycNo4B4XDQ3vqIBzVyltNG7jXIYs7Q+EOxemM//Z&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;plan1&quot; title=&quot;plan1&quot; src=&quot;/dev-blog/static/d362271e57af14eca6cd08932e5b5432/828fb/plan1.jpg&quot; srcset=&quot;/dev-blog/static/d362271e57af14eca6cd08932e5b5432/ff44c/plan1.jpg 158w,
/dev-blog/static/d362271e57af14eca6cd08932e5b5432/a6688/plan1.jpg 315w,
/dev-blog/static/d362271e57af14eca6cd08932e5b5432/828fb/plan1.jpg 630w,
/dev-blog/static/d362271e57af14eca6cd08932e5b5432/0ede0/plan1.jpg 945w,
/dev-blog/static/d362271e57af14eca6cd08932e5b5432/f0b2f/plan1.jpg 1078w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;화면 흐름을 정하기 위한 흔적들...&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;화면의 흐름을 정했지만 어떻게 화면을 설계해야 할지는 막막했습니다. 그리고 디자이너가 없기 때문에 디자인을 직접 해야 했습니다.(막막함 x2)&lt;/p&gt;
&lt;p&gt;다음과 같이 너무 못생기게 UI를 디자인했지만 우선 사용자에게 서비스를 제공하고 피드백을 통해 디자인을 수정하고 더 나은 UX을 생각하기로 결정했습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/d53ff/initial1.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACtUlEQVQoz0WS3UvTYRTHf/+JtLalgaV2I10EijpERL11duMCzUwxK2JsCr6k813nsuncpljOlwSn01YXXdSKCJsxF9TKKVNUGjZs07DwE78nsufmc56Xc873nOdIKSkpXLhwEbVazRnFGZKSkjh/PoWLaWkozp5FpVKiUCiQ36WnZ6BUq1CrVeIsOTmZjIxLqM6dE2dKpRJJp9PR3NyK3mjgflsr+fn5OJ0O4okEkd1tfp/8oquri/7+fr5F9/kU/srRzwQWywNMJhPfYwd8Dq/zI3HA1NQ0UnV1NX19feJSflRYWIjb7SYaPeDtu/fs7m1js9kYGxtDXt/39wUnJiYwm83CPjk5EfR6vUhVVVX09PTQ1tZGb2+vUOjxLDK1/Abt9Xpso2bsdjsOh0M4+Xw+QTnB4OCgsI+OjgQ9Hg9SS0sLgcAaXu8z1oIf0ZaWMu9245qa5armEjMPmrE7xrDbR4XT3t6eoNPpxGKxCDuRSPwPODAwIDbxWFRQp7vG3NwcH/wBPDMuotsbWK3DpyX7Xv1VOD4+flry4eGh4NLSElJndy+hA3i5/pMvMdCVl/PkySyLS6/RG8288gUZtlqxjf5VGI/HBeU2/Av4T+HCwgLSrfp6puefYpuYZWZ+meLiYiYnH2PqesTlK+V098i9GhDOx8fH7OzsCMof2NnZSSwWIxKJCJUulwtJq9Vy9/Ytam/e4N7dO2RlZTE0NEQgEOT58xcEg0GamprEFGxtbREIBAQ7OjpoaGggFArh9/vZ2NhgZGQEqaysDL1ej6zUYDCQnZ0tfk/OGgyuCefGxkYxBZubm6yurgq2t7djNBpFwpWVFcLhMNaHVqTMzExycnKEstzcXFJTUykqKqKmpoaKigrBvLw8CgoKqKurQx4zmfJeo9Egz3FlZSW1tbWUlJTwByE+dqHakDAQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;initial1&quot; title=&quot;initial1&quot; src=&quot;/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/f058b/initial1.png&quot; srcset=&quot;/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/c26ae/initial1.png 158w,
/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/6bdcf/initial1.png 315w,
/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/f058b/initial1.png 630w,
/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/40601/initial1.png 945w,
/dev-blog/static/05255a97ceb7a765d2f8a327f7d6aa45/d53ff/initial1.png 1068w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;스프린트 1주 차 결과물, UI 디자인 저작툴 Figma로 화면을 디자인했습니다.&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=fUG-_s4z6Ww&amp;#x26;t=448s&quot;&gt;스프린트 1주 차 데모 영상을 통해 자세히 알 수 있습니다.&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;2. 사용자의 피드백&lt;/h1&gt;
&lt;p&gt;크게 다음과 같은 사용자의 피드백을 수렴했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;현재 있는 페이지가 어디인지 모르겠다.&lt;/li&gt;
&lt;li&gt;체크리스트에서 체크 항목이 무엇을 하는지 모르겠다.&lt;/li&gt;
&lt;li&gt;체크리스트에서 체크 항목이 어디에 있는지 모르겠다.&lt;/li&gt;
&lt;li&gt;체크 항목이 몇 개 남았는지 모르겠다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;스프린트 2주 차에 사용자의 피드백을 기반으로 화면을 수정 했습니다.
바뀐 디자인을 보면 다음과 같습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/60b1058ea416ffa87a5031173091910b/d7ceb/after1.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXklEQVQozz2R20+SARiH+V9aeVvdmReioOicKSsniZrg2rio7IQym1FgrKmY80on5PJC3VSI5aFNbcJmSYWKR3QrzWxqKkMNBD7kaX1O37vn4n3f30GiqbhNiaoYmSwTqVSKWl1C0c0isrOzRS4vL0elKqag4DppadfQajWoVCqUykKuXL2CND2djAwp6dJ0UlIuIRGAMDA7M41jYICz2d7ZorKykro6Ew2NLVTrDRiNRn5t7hEMhogLcfR6PTrdXWprn2I2m5HL5Uh+C7AcibG4sERvTw9LgRW8X7z4Z2dQ5OSTX1hKZnYRFy5e5n7VA96NfGV1dY3w3yMMBgOK3BtUaO6g1z85PRiMxNg8CLISCGC1NlOoLEWeq6Tq0UOs1hY+eqb4MOahp7sPS5OZ4+QRQkJAOEmKCjs7OxkaHsTlcpGVlYXk1GCC5cUFOmx23nY7eWGx0mS1MjI8TDKZBGJED3boeGPjz/4WR5E4G7tB9PrHTEyMYW9/zfy8H0WOAsnGMXwPg8+/SFt7G1XPXnJLU0JN7T2cThfxeJxoNMrW9jY2u43jaIRYLCbK+J/d4HsXxrpqPk99Ii8vD8l6BFaPwDszJ8rv7XPS+uo5rc0NDDicHB6E2D8MM/9jk067HUEQCIVCnJyciJY9Hjc/19eYm5tDoVCcWYaVwDKDQ0PnLe/u7uFwOM45EgmLDxOJhMjh4yg1hhqxmMbGJsz19WTKZEh8vmm++abp6urCYrEw6/fj9Xrp7+/HZDLh8/lEHh0dFZfHx8dxu91MTk5SVlaGWq1Gq9Wi0+lITU3lH6ugE3j1O7YrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;after1&quot; title=&quot;after1&quot; src=&quot;/dev-blog/static/60b1058ea416ffa87a5031173091910b/f058b/after1.png&quot; srcset=&quot;/dev-blog/static/60b1058ea416ffa87a5031173091910b/c26ae/after1.png 158w,
/dev-blog/static/60b1058ea416ffa87a5031173091910b/6bdcf/after1.png 315w,
/dev-blog/static/60b1058ea416ffa87a5031173091910b/f058b/after1.png 630w,
/dev-blog/static/60b1058ea416ffa87a5031173091910b/40601/after1.png 945w,
/dev-blog/static/60b1058ea416ffa87a5031173091910b/78612/after1.png 1260w,
/dev-blog/static/60b1058ea416ffa87a5031173091910b/d7ceb/after1.png 1446w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;사용자의 피드백을 기반으로 어떻게 변경되었는지 알아보겠습니다.&lt;/p&gt;
&lt;h2&gt;2-1. 현재 있는 페이지가 어디인지 모르겠다.&lt;/h2&gt;
&lt;p&gt;스프린트 1주 차에는 공간(장소)을 선택하고 다음 페이지로 이동을 해도 내가 어떤 공간의 체크리스트를 하고 있는지 알 수가 없었습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/6937a/before1.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.291139240506325%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAADPElEQVQ4yz2TS09bRxiGz39oVDCXNSxgDTg1VqkEFQqIW4nBNhFKUCCJuvAqEgFT1FZqqkoNShspFRKXLuiii1K1EkJuHYKPbwfbOLFKiGMCJJimsgGbOsfXpzpDykijmfm+mVfPO/ONNDY2xqBliD5TH1euDNHZ0Ul1dTVVVVXU1tYyMnKNq9dG+GTAhNk6gNVipb6+nv7+fsZu3ODyoBmT+TLDw8M06ZuQAApAiaI2xePxCrGysjKMRiMnx8ek/31LOqvyf+vt7cXtdot5Opsjz1luenoa6fg4RTAQJhAIcRh/hSy7hWB5eTnNzc2kUilU9S2n6TSlIqiqSk9PD2tra+RzOUrFAsXCGYzdbkeKvk7wxfc/8ekdO/OLD1CUDSoqKgShwWAQhxKJBKurq8TjcQqFAl1dXeeE+UJBxM4F/cEInX0WutuMPLz3JRvBTSo0yxqh0UhGVSkUi5ycnJDP5wVhd3c3fr+fXC5HJpOhVCoJwcnJSaTdvQMefvMZP4wP8fr3nwn8+hsL4+N8a7OxdPcu+SdPOAqHeRqJkE6lhKhG6PP5hEg2mxWxc8K93X0WfvwF5yMvB7GXuJxOPjIYMOr1XLVaySSTJN+8QfH7OT46ElTaHbplWdBqa+1atDY1NYUUjb5i+vMH3JuZ49Hjp7hkF++XlfHehQs0XbxISlXRDBXf9dNslo8vXeKxx0O+VCKTy5F9Z/nOxATSyqqPD1tv0dJ2i6++nuPPPxzilXXlOj4wGEhsbaHu7JCKxcjEYqRfvGD8+nVCDgcn+/sko1FOYzHyh4fYb99GCgTC3P9ukZn7c6ysOFheXqayslKUTZNez47TyT+yzKHLxd/r68RlmRmbjcDSEnFFYc/t5sDhIOn3M2GzIT1/vs329hbPnv3F7u5L5ucXxE/R6XQ0Njbi3dggFIkQCIfF6AsGaW5pYXZ+HtnrxaMo+EMhItvbjN28iRQMBkUxu1wym5ubzM7OnlnW6WhoaMC1vs6GouDzelEURdRfW2sriwsL4qFkWcbr8bAZCjE6OopksVgYGBgQ3Wq10t7efv6Xa2pqRFzbYzabxTg4OEhdXR0dHR2YTCaR13LaWc3Rfy2T9ORGn3P7AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;before1&quot; title=&quot;before1&quot; src=&quot;/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/f058b/before1.png&quot; srcset=&quot;/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/c26ae/before1.png 158w,
/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/6bdcf/before1.png 315w,
/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/f058b/before1.png 630w,
/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/40601/before1.png 945w,
/dev-blog/static/9346ed7763a80b17fc0eb5a9c24255ca/6937a/before1.png 1094w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;스프린트 1주 차 문제점&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;스프린트 2주 차에는 선택한 공간을 화면에 계속 노출하는 방식으로 사용자 경험을 향상시켰습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/037e2910b6750969a024c287f8a2d16b/5819f/after2.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADdElEQVQ4y22S60+bZRjG37/Cf0FCNFGTZYk6nc6h1rUcWjDQUoYtLeUwNhnMSLI5jVkys0Qz/YAJFBVPWWJQCJPhttCVQ5EChSIRRWkpb9fz23PfFvozvNN9MLuSK8/1PHfu677y5BaqqqpoNhjQabVotTqFao2aiooK9MYmLDYzBmOTwubTBqrrqqmsrETfpEffaEBbp0NXp6NeW8/xF48jzMzMcIhccZ/8fo7SgUwqncLceZoPr11m6Jsh7N/b+eLGCN+Nfc2nw9dobTcSiotIxTCZgwSZA4kMCe7O/oLgXnIrhpFMmYQcoVjOKff2cyZeOPUsr75Wi0pVT01NI7U1Bp5+6ijmHj1z3kXGJu6xveNjL7hLVk5zZ+EWwrxrDkkOE4j8iRjzE5R8RGUR64CRUxYVnWf7MRg7eKPaiL7ZxuNPPoPlcgP226OYuj9jbtFDKCwSjIjcdIwj/DwzzlvWVlQaLfqWVt40NjD4w8d0vGPi2AkVps5+tM1Wnj9Zx7GXVBw5cQRLXwu/R9fw/r1OvBAifSAhk2XBPYswcXsMvdFMfYMJnc7MKxo1l65e5Fx/D0u/uYjmwuxJu9xPicTyEda2ljFZWvkru658jVwqcFCSFb22uoZw8+44Fy69R+/AB3T3XeTk67VcH/6EM2e7CAXDpJNpCnmZciFPKZMgFolitbYTDcXx+fxAGTEHi9u73JqeQFhwzTM5f4fPvx1h6MYI7390gVnXNN3dZ9gN7BIOh4glJPLJ+0jiBmJQpN1qw5/Yxr+3Qy6bI1+CjFxibt6J4HA6aB8YQG3spKbZzMua5xgcvk7v2+fZ8e3wH/ZLJeUMBoO0tbUhFwtIUoJcLqekPMTy8srhHjro6X0XfYuJxrpajj7xGFeuXqHvfB+BQIBwOEwqKZHfL7MuSoj/GhaLRZLJJFIyiVwsKoZL7iUE14IL7+Y2DscMs9M/8eOXg3hWPXR1dSmG0WiUeCxKulBkaSdIYE9UDEulEtlslng8rvBBwmUEl8vFo2A2m/H5/YouFArkcw8W/nCIxWIhFospCQ9RLpeJSynuOZ0IHo/nkYY2m01p+j8kSaKjo0MZkkqlHr4nszkWfnUh2O12Njc3lbgrKyusrq4qWqPRMDk5ycbGxsOa1+tlamoKtVqN2+3G4XDgdDqV2h9bW4x+Nco/cXFvb2UALGgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;after2&quot; title=&quot;after2&quot; src=&quot;/dev-blog/static/037e2910b6750969a024c287f8a2d16b/f058b/after2.png&quot; srcset=&quot;/dev-blog/static/037e2910b6750969a024c287f8a2d16b/c26ae/after2.png 158w,
/dev-blog/static/037e2910b6750969a024c287f8a2d16b/6bdcf/after2.png 315w,
/dev-blog/static/037e2910b6750969a024c287f8a2d16b/f058b/after2.png 630w,
/dev-blog/static/037e2910b6750969a024c287f8a2d16b/40601/after2.png 945w,
/dev-blog/static/037e2910b6750969a024c287f8a2d16b/5819f/after2.png 1042w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;스프린트 2주 차 개선된 화면&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;h2&gt;2-2. 체크리스트에서 체크 항목이 무엇을? 어떻게? 하는지 모르겠다.&lt;/h2&gt;
&lt;p&gt;체크리스트에서 체크 항목이 ‘대강의실’의 ‘에어컨 끄기’라면 대강의실은 어디인지? 에어컨은 어떻게? 끄는 것인지 알 수가 없습니다. 해당 체크 항목을 올바르게 수행하게 도와줄 안내 표지판 같은 컴포넌트가 필요했습니다.&lt;/p&gt;
&lt;p&gt;안내 표지판을 어떤 형태로 노출할지 팀원들과 회의를 통해 다음과 같은 고려사항을 결정했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;체크 항목에 대한 디테일한 설명이 있다면 아이콘이나 이미지로 노출한다.&lt;/li&gt;
&lt;li&gt;디테일한 설명은 모달 창의 형태로 보여 준다.&lt;/li&gt;
&lt;li&gt;설명의 형태는 단순한 텍스트뿐만 아니라 이미지, 영상으로도 보여줘야 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;다음과 같이 고려사항을 반영했습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/5f652/after3.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 104.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAExElEQVQ4y22V+09TZxjH+3fsN3/Rn5YlEIwZlwBSYphxiQlCkUspDJyiXCx3gdag47JliFOHOrGlY3Fcli0bShaTyeZYZwYCKhcBESKF0ptAacvp6Wc5bwOOZG/y5D3vc877Pd/neZ/n+6ri4+M5duwYR44cISUlZY8pviR1Evv27ePAgQNER0cLi4mJISoqisjISGERERFEREawf/9+VENDQ6yvrxOUg2xvbxMIBMQsSRKrq6u4vU5ST6QSFxfHhQsXqK+vx2g0Ul/fQEND2GpqaqiurUJzMh3VzMwMynC5XMhBif8bubm5HD58mKamJqqqqgSA0WjAYHhnTZ81kZeXh2r25UseDY1w4+b3/PnHP6w5XMzNzeLxePB6vQIwOzsbtVpNVVUNKUdT0aRnU1amp7SslPPnz1NbW8vFixfFj1XjE8/o7rNi/OIXvr77iJHR5zx/NsHo6CgjIyNsbm6i1eaiVidx5qyeeHU6yR9lk5ldwNmzRRQWnqKwsFAAa7VaVPNzc/T88DtHU2v4vK0bORjcDTUUCu0yTE5WU15RwweRSUQeTKa4uIxLlxoFMyWnly9fRqfToZqenhabfL6td0BySIApB6OMnJwckcOW5mYqKyuorKyktrZG5FMxZd3Y2BgGfDj6Mz+tdYAMUlDC4V3BL20hyyG2A9u7gImJCbS2tmIymfjWYqHT9A13TLexdFkwm820trag1eagGn/xlC08O9wISH5CISVsGQgzVHITGxtDV1eXWLs9b5mZncO2usrWVjiy3t4+MjMzUU1PTbPu3EQJfedU/RI8tm/Sa+3jyeJv6PJ0opjvdprEe+vwQ0y3rjDwYy/z87PCd6PjOmlpaagmJyd5tfqSiWcTONYcrAWWWNpcZtixzuBfgzy3WcnOyiE67kPufndbbL5Uf5qo999DHX+QOze/Er5rHe2kpZ9ANTU1xVJoEod7DduKjVnXC1Z8C0ghNwG8BNhAV5xJsiYO8+ANsflWRztZmo8pL/mUbkuYdV9fPxkZGWFA0SlOF563bpzbNpzbKyz7Fph+O8obZsjITyUhMR6zOZzDa9euUHTmE+rqKjGZO4Xv3r17aDSad4AOhwPbyjLznilWAovYA0vYfW+Q8HEyM4OYmFi6uszi27Yvm9GfK6Dk3CmuX7+6C7iHodvtFixfOWdY9rzG43PiCThEyBlZGmJj47BYLPj9fibGn/Lk72Gs1mHGx8eEmPT09OwFdDqd2O12PC4PLrsbm2cJt38N/w5gTCzd3d2iTDY2NvD5fASDMltbPvHc39+/N+SdIYdkMXsCTtYlBxJeTmZlkJCQSFtbGw8ePGBwcJD79+/vmrK+2t4uWlQAKtK1uLgo2k2WZVHTG0EXj0et2H3LZGkzSUpKwmBoID8/n5KSEsrLy9Hr9VRUVFB46jQlpWVh+VLqUDkQZVaoS4o4hMAf8tL5axdjjie7eqgIQVFRkehfRRAMRqMQiJJSPQVFp9HpclHNzoYrXcmNIlVSUP5PAsLKk6vNFQxbWlqEYldXV1NXV0eDwSCAFbFtbm4Oi8PAwIAQ07GxMaxWK68XFsTh2Gw2VmyronuUu+XQoUPiCiguLqagoEAwVVRGCVmvLxcie/z4cf4FlgnyQ7gnEnMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;after3&quot; title=&quot;after3&quot; src=&quot;/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/f058b/after3.png&quot; srcset=&quot;/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/c26ae/after3.png 158w,
/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/6bdcf/after3.png 315w,
/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/f058b/after3.png 630w,
/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/40601/after3.png 945w,
/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/78612/after3.png 1260w,
/dev-blog/static/1bff2e1870c23812aa550ffe3c98bc82/5f652/after3.png 1302w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;무엇을? 어떻게? 개선된 화면&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;h2&gt;2-3. 체크 항목이 몇개 남았는지 모르겠다.&lt;/h2&gt;
&lt;p&gt;화면의 상단에 ProgressBar로 체크 현황을 노출했습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/6af66/after4.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 208.22784810126583%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEhElEQVRIx61WbW8bRRDOr+Bf8BcQUiXUT1AhvvEBoaJKQBAVpUoL4hMVSJWioIhSqqBQlAQoiZSkTe0Ek/fgBCehwY4dxY7jt9j45Rzbd/ad7/VBs/Yml6udxhYjPZ7T7nr2mZ3Zme0BAN3UcKzmWiDPdFHNoqQWmOaQtDJUo466IaNuKDAtk0yhh36i1V3cCF7G7b0r6Au9gb7Q6/hs700MRD/C/fgtfB25iv5oLwYPb+CryHv40P8KFvLjzIBmqqipEqqKeGqwUM/gUXwQE4nvMJV+gMmj7zGdHsLv2Z/hyf4Cd3YErqNhLGdH4MkMYyL9LQ6UADOgGAoEMQ9FlRsGVVWFWtcAHUgcpLC18TfCwQME/9lDyL+HwE4QK38s4TCrwB3VsZEBNr1bGHn4AKMPv8Gq6xFkWYEiyyBbjKFhGDBMHaZlQCgKEMUKKmIZBaEAoVjEsZBDSlTRvy1hOqZjw7uA2598gM/vvYOfNu7AUE3U6/VTl03TbBg1DDZ4fHyMbDbLdKlUQqVSQUOsJk7FgA5N0xi7MwZ1vTFBO/l8PszNzWF7exu7u7sIBoONP1sWTKuxntAMbGuDBBrkLJ1iWVZLtDVIhtiuloV8Pg9BEJDJZJh2GrRv0tYguUzu0gSdXyQSQSgUQjKZPGPQyborl52GLmSQu0xIpVIoFAqMKV/YMUNyWVEUyLKMtbU1Fl2/3w9Jkro7QwJNkD7Pva5cTqfTCIfDTO/v77cNzIVcJlCEvV4votEoS3Jyv10utjTI2ZFuF9HzhN+wMwxpgIMC4wRn7wStr9VqzENmkDMibT/HVtANEwZ9UyHR9QZsXpHu4R98B2eA+PmCRd9k9cV5KDTPs+PMGRJ1Og8nYxJJNbGc1rFXAqRyAYHtFTzzLSEZj7B1zwWFZGZmBoODg0wPDQ0xjI6NYfTHHzAfFtC7puGuH3jydBy3bl7Dx1evYODuF6yMnQkKP4d4PH5SEBKJBGKxGCIHB3i2+RfCgoIvfTWM7ev4c30B13uv4e2+V9Hv/hSmZqGutqjYLxJZNVhgiFK1UkG+loZgZKBrevvyRVhdXcXU1BTTm5ubrHKfJ6qmtr56ZIzfZx51e69x3pJGc7deXLFpkhZRQtuj3lFxIEbcEAUjEAiwe0zFoavyRQzpKnFGrZh0VGDtLlerVZbk1I/t59exyzRBLOfn51kv3tnZgSiK3btMUbbf6f+lYtMiYlkul1k/KRaLz7HsqC+TMWpOHo+HXcPFxUVsbW11VrEv8hTpqmLznTj4VbR/O0FzlBU83U4qNjGjwXagI+Gwb0zf9tQ6qdg8MHqzrNvBK3K7RmYf66h88T8pioxUOonkUQy1arnJWj11mRubnZ3FxMQE68nT09OYnJxkD0+Xy8XSiMuSdwH3br6LO29dwtjwfehmI9VOGHKh9HC73Uyvr6+zNw5hfHz8JIokrvnH6Lv0Mt5/7SUM/Hqd9S7DaLZRemXlcjkGSuSaLEMUJUhSlUWPQLvTw5M9RItFJBIxrC+v4KnvNywePkb23xx7ttCa/wD1i4NUoZ1ajgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;after4&quot; title=&quot;after4&quot; src=&quot;/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/f058b/after4.png&quot; srcset=&quot;/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/c26ae/after4.png 158w,
/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/6bdcf/after4.png 315w,
/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/f058b/after4.png 630w,
/dev-blog/static/12a6b42ef87e94c381bdd606520d8cce/6af66/after4.png 640w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;ProgressBar&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;h1&gt;3. 빠르게! 사용자 경험을 향상시킬 수 있었던 이유는?&lt;/h1&gt;
&lt;p&gt;하나의 프로덕트를 구현하고 서비스를 운영해보는 게 처음이었던 저희는 사용자들에게 어떻게 더 나은 UX를 제공해야 할지 막막했습니다. 많은 회의와 다양한 디자인 시안을 만들어 봤지만, 팀 내에서 합의점을 찾질 못했습니다.&lt;/p&gt;
&lt;p&gt;그래서 일단 프로덕트를 구현해 초기 유저의 반응을 살펴보자! 라는 생각으로 스프린트 1주 차에 프로덕트의 일부분을 구현해 서비스를 운영하여 초기 유저분들의 피드백을 받을 수 있었습니다.&lt;/p&gt;
&lt;p&gt;해당 피드백을 바탕으로 스프린트 2주 차에 리팩토링했는데 디자인이 모두 변경된 점을 확인할 수 있습니다. 이 과정에서 큰 비용이 들 거라 예상했지만 코드를 작성할 때 비즈니스 로직을 따로 분리를 해놨기 때문에 새로운 디자인의 컴포넌트를 구현하는 데 어려움이 없었습니다.&lt;/p&gt;
&lt;p&gt;빠르게! 사용자 경험을 향상시킬 수 있었던 이유는 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;프로덕트의 일부분이라도 빠르게 구현하여 서비스를 운영해본다.&lt;/li&gt;
&lt;li&gt;유저의 피드백을 기반으로 서비스를 개선해 본다.&lt;/li&gt;
&lt;li&gt;비즈니스 로직을 분리하여 디자인 요소를 유연하게 구현할 수 있게 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1&gt;4. 마치면서&lt;/h1&gt;
&lt;p&gt;이번 포스팅에서는 공책(GongCheck)을 이용하는 사용자들에게 최고의 경험을 선사하기 위한 과정을 기록했습니다. 디자인으로 어떻게 UX를 향상할 수 있는지에 대해 고민했는데요. 다음 포스팅에서는 성능개선을 통한 UX를 향상하는 과정을 소개하겠습니다.&lt;/p&gt;
&lt;p&gt;공책 팀의 개발 과정은 아래의 영상들로 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=ZbXjua2uDC8&quot;&gt;프로젝트 2차 데모 영상&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=rBufGKaRtZc&amp;#x26;t=560s&quot;&gt;프로젝트 3차 데모 영상&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React Transition Group 도입기]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 온스타입니다.
저희 팀은 우아한테크코스 4기 과정에서 공간관리 체크리스트 애플리케이션을 개발하고 있습니다. 저희 GongCheck…]]></description><link>https://gong-check.github.io/dev-blog/FE/온스타/transition-group/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/온스타/transition-group/</guid><pubDate>Mon, 10 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 온스타입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 체크리스트 애플리케이션을 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;저희 GongCheck 프로젝트에는 페이지 전환 애니메이션이 적용되어있는데, 이를 위해 react-transition-group 을 이용하였습니다.&lt;/p&gt;
&lt;p&gt;페이지 전환 애니메이션과 react-transition-group 도입에 있어서 어떤 고민의 과정을 거쳤는지에 대한 글입니다.&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;우리는 react-transition-group 이 왜 필요했고, 어떻게 도입했는가?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;페이지 전환 애니메이션이 왜 필요했을까?&lt;/h3&gt;
&lt;p&gt;현재 GongCheck 프로젝트에 적용되어있는 페이지 전환 애니메이션입니다.&lt;/p&gt;
&lt;img src=&quot;/dev-blog/ecea044dd80bc8284fe8c4a63d10688e/first.gif&quot; width=&quot;280&quot;&gt;
&lt;p&gt;GongCheck 프로젝트는 위의 영상에서 보이는 공간 사용자를 위한 사이트와, 또 다른 공간 관리자를 위한 사이트가 분리되어있습니다.&lt;/p&gt;
&lt;p&gt;GongCheck의 공간 사용자를 위한 페이지에만 페이지 전환 애니메이션이 적용되어있는데, 그 이유는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;‘우아한테크코스’라는 관리자는 ‘잠실 캠퍼스’와 ‘선릉 캠퍼스’라는 두 개의 공간을 가지고 있고, 각 캠퍼스는 ‘청소’와 ‘마감’이라는 업무를 가지고 있죠.
지금은 두 개의 공간과 각 공간당 두 개의 업무뿐이지만 업무가 더 늘어난다면 사용자가 원하는 업무에 들어가기 위해 고려해야 할 사항이 점점 늘어납니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;사용자가 내가 지금 어떤 장소 페이지에서 어떤 상호작용을 하고 있는지, 페이지 애니메이션을 통해 지속해서 확인&lt;/code&gt;할 수 있도록 도와주는 것이죠.&lt;/p&gt;
&lt;p&gt;이러한 이유로 미묘한 차이지만 ‘공간 목록에서 업무 목록으로의 페이지 전환 애니메이션’과 ‘업무 목록에서 체크리스트 페이지로의 페이지 전환 애니메이션’은 다르게 해놓았습니다.&lt;/p&gt;
&lt;p&gt;이뿐만 아니라 좀 더 다양한 작업과 인터렉션이 있어야 하는 관리자 사이트와는 다르게 공간 사용자를 위한 사이트는 목적이 단순하고 명확합니다.&lt;/p&gt;
&lt;p&gt;“사용자는 원하는 공간의 체크리스트를 찾고, 체크리스트에 체크할 수 있어야 한다.”&lt;/p&gt;
&lt;p&gt;사이트의 목적이 단순하고 명확하다는 것은 ‘사용자가 할 수 있는 일이 적다’라고도 이해할 수 있는데, 이때 사용자에게 단순한 유저의 경험까지 제공한다면 사용자에겐 이용하고 싶지 않은 매력이 없는 사이트가 될 수도 있겠죠. 때문에 &lt;code class=&quot;language-text&quot;&gt;사용자 경험의 향상&lt;/code&gt;을 위해 사용자가 확실하게 느낄 수 있는 페이지 애니메이션을 적용했습니다.&lt;/p&gt;
&lt;h2&gt;react-transition-group?&lt;/h2&gt;
&lt;p&gt;react-transition-group는 react-motion, framer-motion 같은 애니메이션 라이브러리가 아닙니다.
리액트에서 컴포넌트가 DOM에 마운팅되고 언마운팅되는 상황에 애니메이션을 적용할 수 있도록 도와주는 React 팀이 자체적으로 제공하는 라이브러리입니다.&lt;/p&gt;
&lt;p&gt;react-transition-group는 Transition, CSSTransition, SwitchTransition, TransitionGroup 이라는 4개의 컴포넌트를 제공하는데, 이에 대해 가볍게만 살펴보면 다음과 같습니다.&lt;/p&gt;
&lt;h3&gt;Transition&lt;/h3&gt;
&lt;p&gt;컴포넌트의 마운트, 언마운트를 ‘entering’, ‘entered’, ‘exiting’, ‘exited’ 라는 상태를 기반으로 설명하며, 이 상태에 따라 컴포넌트를 조작할 수 있도록 도와주는 컴포넌트입니다. 단, 하나의 컴포넌트에 4가지 전환(transition) 상태만 부여할 뿐이며, 상태 부여에만 관심이 있기 때문에 전화 애니메이션에 대한 CSS를 조작하기 위해서는 이후에 설명할 CSSTransition 컴포넌트를 이용하는 것이 더 자연스럽습니다.&lt;/p&gt;
&lt;h3&gt;CSSTransition&lt;/h3&gt;
&lt;p&gt;Transition 컴포넌트의 모든 속성을 상속하며, 컴포넌트의 마운트, 언마운트 시점을 상태로 관리하며 이에 대한 CSS 효과나 애니메이션을 부여하기 위해 사용됩니다. Transition은 4가지의 상태값으로만 마운트, 언마운트를 상황을 설명하지만, CSSTransition에서는 임의적인 이름을 가진 클래스 이름의 뒤에 마운트, 언마운트 상황을 부여하여, CSS로 더 쉽게 조작할 수 있도록 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;CSSTransition nodeRef&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nodeRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;inProp&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; classNames&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my-node&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nodeRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;I&apos;ll receive my-node-* classes&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;CSSTransition&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;CSSTransition으로 묶인 컴포넌트가 마운트, 언마운트되는 상황은 my-node-enter, my-node-enter-active, my-node-exit, my-node-exit-active 의 상황으로 표현될 것이고, 이 클래스들의 이름을 이용하여 CSS를 작성하면, 전환 애니메이션을 쉽게 조작할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;SwitchTransition&lt;/h3&gt;
&lt;p&gt;Transition 또는 CSSTransition을 하위 컴포넌트로 가지는데, 상태 변화에 따라 기존의 컴포넌트가 언마운트되고 새롭게 마운트된다면 그 상태 전환 사이의 렌더링을 제어합니다.
‘out-in’, ‘in-out’으로 이루어진 두 가지 모드를 가지고 마운트, 언마운트 시점을 조작합니다. mode가 out-in일 경우, 현재 요소가 먼저 전환된 다음 완료되면 새 요소가 전환됩니다. mode가 in-out일 경우 새 요소가 먼저 전환된 다음 완료되면 현재 요소가 전환됩니다.&lt;/p&gt;
&lt;h3&gt;TransitionGroup&lt;/h3&gt;
&lt;p&gt;SwitchTransition과 마찬가지로, 상태 변화에 따라 컴포넌트가 마운트되고, 언마운트될 떄 그 상태 전환 사이의 렌더링을 조작할 수 있게합니다. 다만, 마운트 대상, 언마운트 대상을 직접 기억하고 관리하며, 애니메이션을 동시에 발생시킬 수 있도록합니다. 다만, 마운트, 언마운트될 대상 컴포넌트를 각각의 key로 관리할 수 있어야합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;TransitionGroup className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;todo-list&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nodeRef &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;CSSTransition
              key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
              nodeRef&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nodeRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
              timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
              classNames&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;item&quot;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ListGroup&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Item ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nodeRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;더욱 자세한 설명은 &lt;a href=&quot;http://reactcommunity.org/react-transition-group/&quot;&gt;http://reactcommunity.org/react-transition-group/&lt;/a&gt; 에 들어가면 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;react-transition-group이 제공하는 4가지 컴포넌트에 대해 간략하게 보았는데, 우리는 페이지 전환시의 CSS 조작을 해야했으며, 기존의 페이지와 바뀔 페이지에 대한 애니메이션이 동시적으로 발생해야했습니다.&lt;/p&gt;
&lt;p&gt;따라서, 이런 니즈에 따라 CSSTransition 과 TransitionGroup을 묶어서 사용하게되었습니다.&lt;/p&gt;
&lt;h2&gt;공책팀에서 react-transition-group을 사용한 방법&lt;/h2&gt;
&lt;p&gt;우선, TransitionGroup과 CSSTransition를 묶어서 관리할 수 있는 Transitions라는 컴포넌트를 만들었습니다.
이때 사용한 childFactory라는 속성은 TransitionGroup이 가지는 속성입니다. 이미 언마운트된 엘리먼트에 대해 접근이 필요한 경우, 리액트의 cloneElement를 통해 엘리먼트를 복제하고, 그에 대해 접근할 수 있도록해주는 속성입니다.&lt;/p&gt;
&lt;p&gt;Transitions 컴포넌트는 transition, pageKey, children이라는 props를 받고 있는데, transition은 페이지별 애니메이션을 분기 처리하기 위해 상위 컴포넌트로부터 props로 주입받고 있으며, 이는 useTransitionSelect 라는 훅을 통해 페이지에 필요한 애니메이션 효과를 받아오고 있습니다. useTransitionSelect 훅이 하는 역할과 그 필요에 대해서는 이후에 살펴보겠습니다.&lt;/p&gt;
&lt;p&gt;pageKey는 CSSTransition의 key값으로 들어갈 location.pathname의 값입니다. 이 pageKey가 변경될 때(페이지가 전환 될 때) 이전 요소와 새 요소에 대해 애니메이션 효과가 적용되게 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Transitions.tsx&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;childFactoryCreator&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;classNames&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReactElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;cloneElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;Transitions&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;TransitionsProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; transition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageKey&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;TransitionGroup className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;transitions-group&quot;&lt;/span&gt; childFactory&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;childFactoryCreator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;classNames&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; transition &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;CSSTransition key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;pageKey&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; timeout&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;CSSTransition&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;TransitionGroup&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Transitions 컴포넌트가 적용된 라우팅을 불러오는 곳은 다음과 같습니다. Transitions 컴포넌트를 통해 관심사를 분리하였고 useRouts를 통해 라우팅될 페이지를 불러오고있기때문에 상당히 간결한 코드로 페이지 전환 애니메이션과 라우팅을 처리할 수 있게되었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//App.tsx&lt;/span&gt;

 &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; content &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useRoutes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;routes&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; location&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; transition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useTransitionSelect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Transitions pageKey&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; transition&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;transition&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Transitions&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;페이지별 애니메이션 효과 분기를 위한 useTransitionSelect의 내부코드는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// hooks/useTransitionSelect.ts&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useTransitionSelect&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; location &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useLocation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; previousPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sessionStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; previousPage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPageByPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousPath &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; currentPage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPageByPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  sessionStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;passwordPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;spaceListPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;passwordPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;slide-left&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;jobListPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;spaceListPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;slide-right&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;taskListPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;left&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentPage &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;taskListPage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;right&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//styles/transitions.ts&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// right&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;enter &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    z&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;index&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;translateX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;enter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;enter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;active &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    z&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;index&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;translateX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; transform 600ms&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;exit &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    z&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;index&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;translateX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; transform 600ms&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;세션 스토리지를 이용해 이전 pathname에 대한 정보를 저장하고, 현재 pathname과 비교하여, 애니메이션이 적용될 클래스 이름을 반환합니다. 아래의 코드처럼 right, left, slide-right 등 필요한 페이지 전환 애니메이션에 대한 css 코드는 한 곳에서 작성하여 보관하고, 필요한 클래스 이름만 반환하면 원하는 곳에서 원하는 페이지 애니메이션이 발생할 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;다만, pathname을 통해 페이지의 이름을 받아오는 로직은 pathname의 ’&lt;a href=&quot;http://www.gongcheck.day/spaces/1/2&amp;#x27;%EC%B2%98%EB%9F%BC&quot;&gt;www.gongcheck.day/spaces/1/2’처럼&lt;/a&gt; ’/’ depth에만 의존을 하고 있는데,
원래 기존의 방식은 페이지가 전환될 때마다 page 컴포넌트에서 어떤 페이지인지 명시적으로 저장하는 것이었습니다.
페이지 컴포넌트를 생성할 때마다 어떤 페이지인지 저장한다는 로직을 반복적으로 부여해주었어야 했고,
페이지 컴포넌트가 애니메이션이라는 것에 의존적으로 필요 없는 로직을 갖게 되는 것이 마음에 들지 않아 현재의 방식으로 이전 페이지, 현재 페이지를 관리하고 있습니다. 이 부분에 대해서는 더 좋은 방법이 있는지 고민을 해볼 수 있겠다고 생각합니다.&lt;/p&gt;
&lt;h3&gt;정리&lt;/h3&gt;
&lt;p&gt;공책팀은 사용자의 경험과 페이지의 분리를 위해 페이지 전환효과를 공책팀만의 방식으로 적용했습니다. 공식문서에 따라 필요한 속성을 적절히 사용한 컴포넌트를 만들었고, 필요한 props만 넘겨주는 것으로 다른 페이지를 생성하게 되어도 동일한 방식으로 애니메이션을 부여할 수 있게끔 하였습니다. 페이지별 애니메이션 분기 처리에 대해서는 더 합리적인 방식이 있을지 고민 중입니다.&lt;/p&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://reactcommunity.org/react-transition-group/&quot;&gt;http://reactcommunity.org/react-transition-group/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/onfido-tech/animations-with-react-router-8e97222e25e1&quot;&gt;https://medium.com/onfido-tech/animations-with-react-router-8e97222e25e1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://codesandbox.io/s/animated-routes-demo-react-router-v6-6l1li?fontsize=14&amp;#x26;hidenavigation=1&amp;#x26;theme=dark&amp;#x26;file=/src/index.tsx&quot;&gt;https://codesandbox.io/s/animated-routes-demo-react-router-v6-6l1li?fontsize=14&amp;#x26;hidenavigation=1&amp;#x26;theme=dark&amp;#x26;file=/src/index.tsx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Server-Sent Events를 이용한 비동기 통신 구현 및 트러블슈팅]]></title><description><![CDATA[…]]></description><link>https://gong-check.github.io/dev-blog/BE/어썸오/sse/sse/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/어썸오/sse/sse/</guid><pubDate>Tue, 04 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. 공책 팀의 어썸오입니다.&lt;/p&gt;
&lt;p&gt;저희 서비스는 여러 사람이 하나의 체크리스트를 동시에 사용할 수 있어야합니다. 아래처럼요.&lt;/p&gt;
&lt;img src=&quot;/dev-blog/c6ed615dd12c22bcfaf4dc409fcfed6c/checklist.gif&quot; width=&quot;630&quot;&gt;
&lt;p&gt;내가 보낸 요청(체크리스트 상태 변경)이 아니라도 현재 체크리스트의 상태 데이터를 서버로부터 전달받아야 합니다.&lt;/p&gt;
&lt;p&gt;전통적인 Client-Server 모델의 HTTP 통신에서는 이런 기능을 구현하기가 조금 난감합니다. 클라이언트의 요청이 있어야만 서버가 응답을 할 수 있기 때문이죠.&lt;/p&gt;
&lt;p&gt;HTTP를 기반으로 이 문제를 해결하려면 세 가지 방법을 고려해볼 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Short Polling&lt;/h3&gt;
&lt;p&gt;클라이언트가 주기적으로 서버로 요청을 보내는 방식입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/fd0d860cab587b024f564f210056b29b/2eb79/polling.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 103.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACg0lEQVQ4y41Vi3IaMQzk/z8RaBpSIKRN4fyW/NqOdA8I0Gk9s9zZ2GtptfatSikQSOu9475/3+axWiuYGa01HZv7K1nsnMPLywv2+z1SSsg5L4ufQZrMEYLdbof1eo3j8ahjK/mJMWKz2WC73YKIdOK/IpR1gsPhgP3+gPP5fCWUcAWtybMo5lZbR4gVPsp/1w16ayqNzBWOWa7VPMFaC+cScgGIGxKJJg3WFby9E9avAcYVcO5I3HRObUBMjJjSstFqDn8wBpwLJIamWo1PbUxAyeiSCWdUyYozChXYwSOGuMihhLLQDBews7q4pYSeElqK6ESolzO6NeiZ0YgWQArjHVK8IZxFpkQIIaGUjpyropSGGAs+PhnHD0Kk9lCkXIo640uE8jIMA0Jk5AqwkApqV82Mqzh9shJKn3JbdDSW4P1dylIdISwli2PRpWqimfixtTFlZ7SyLecRNEpD1iI495hy8B5kzCj+THgD1LJsIoR9spbYLYTwREMSDUltI2kJJGUbKr7vEzavET6Nc/sN5Oh576feZBvZRXyYqKBUjPrlBuYKpgyiAjMkhIuHPzstVEwVKVV9GuOUUGK7+vByQZHyZ9Z06nABve1Au1fw+zvo2xZ02INPJ7QY0fhqH2fMciSXlGMIYNFCjmAeTSxAb0s6YxQTVLNxVC6XB0I97Mu1JWYfJ4s1fv5mfPwitQoeVAT8M0IRNsQ8+mzymEAuhs+h4MeJ4HwBqQ+/wtgbQj2qzLDGoEqEGl67Qj3lABqt0Tgjhwj2V9jBQEWYi9KnsNk5Fbmm9AXFWhTr9L0xT/qW0Yu1wln7mLJEOWv4v20u1dOiLNf7X679v34O7j4NfwBaunDO4rHyFgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;polling&quot;
        title=&quot;polling&quot;
        src=&quot;/dev-blog/static/fd0d860cab587b024f564f210056b29b/f058b/polling.png&quot;
        srcset=&quot;/dev-blog/static/fd0d860cab587b024f564f210056b29b/c26ae/polling.png 158w,
/dev-blog/static/fd0d860cab587b024f564f210056b29b/6bdcf/polling.png 315w,
/dev-blog/static/fd0d860cab587b024f564f210056b29b/f058b/polling.png 630w,
/dev-blog/static/fd0d860cab587b024f564f210056b29b/40601/polling.png 945w,
/dev-blog/static/fd0d860cab587b024f564f210056b29b/2eb79/polling.png 1256w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;클라이언트와 서버 모두 구현이 단순하다는 것이 특징입니다. 서버가 요청에 대한 부담이 크지 않고 요청 주기를 넉넉하게 잡아도 될 정도로 실시간성이 중요하지 않다면 고려해 볼 만한 것 같습니다.&lt;/p&gt;
&lt;h3&gt;Long Polling&lt;/h3&gt;
&lt;p&gt;한번 요청을 보내고 일정 시간동안 서버의 응답을 기다리는 방식입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/e4611/longpolling.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100.63291139240506%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7klEQVQ4y4VU7ZLiIBD0/R/Qn+qVlfNKy10TEr4G6K0G4YjZXadqxADTM0M37GKMcM6BY0oJ3nuICGj8plfrvxnDvYwLITSMHX+MMTgejzidTpjnOQPWwB6kH7lnmibs93scDgdorQsg0Ql4uVzyAv8zcwXaOlonSikMw4D7/Z7jWoXMRmB6beGdMYZ76xExhol2dUPOOLO6BOti9hASjA34M2icLwbORUhguxH1aFkZ261HsavnQkBrbVuIkW3F7DWBe36XuZDnlDIYx0cjsgFyogfcWno6VnsYQ4aXZVkDvlb4KpkVbLfGGMZSHWtAVuhcC6oWnUPQGjJN8B8fSJ1Gqx7HcczjtsJlBsg0ZSMeKQT46xXhfoPcrrDDgLDoksRaJOeglWrVbUiZJ4UoAVE8IsUtAvGCaRZo/718nLNNZmtA8dDGwgcUVj1ZTdAm4t/N4vxXY9ECL4XtzLgkzLPJN6baqkLXs/wNKVlKEot7XoiERdvMcNXiryxvGU8vfJeWKbl29X4C/EmPdSq1M/SZ4Rq7Bqyy6SqUz88sF7o5n7OESFZRgsBqnWVTiVkBGqWQ+MZZW9w5yOORQWUcs2cgSot6jDEDuq6QNSCvz/OhfWf/W3arB/nt1fvN+6u3ASwvTHxLyuvjELuOCPgFc48oHu/ifkAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;long_polling&quot;
        title=&quot;long_polling&quot;
        src=&quot;/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/f058b/longpolling.png&quot;
        srcset=&quot;/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/c26ae/longpolling.png 158w,
/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/6bdcf/longpolling.png 315w,
/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/f058b/longpolling.png 630w,
/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/40601/longpolling.png 945w,
/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/78612/longpolling.png 1260w,
/dev-blog/static/7e3a34a031897051c1c0e96ca2843ef4/e4611/longpolling.png 1298w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;실시간 메시지 전달이 중요하지만 서버의 상태가 빈번하게 변하지 않는 경우에 적합합니다. 서버로부터 응답을 받고 나면 다시 연결 요청을 하기 때문에, 상태가 빈번하게 바뀐다면 연결 요청도 늘어나게 됩니다.&lt;/p&gt;
&lt;h3&gt;Server-Sent Events(SSE)&lt;/h3&gt;
&lt;p&gt;서버와 한번 연결을 맺고나면 일정 시간동안 서버에서 변경이 발생할 때마다 데이터를 전송받는 방법입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/78612/sse.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 103.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3klEQVQ4y41V2W7CMBDM//8Z77xBlVbqhQSEEt+xPdVsEuoE03allVnbmZ09vDQpJeScQeFa/l5LeVZ+R5ntxloLYwy01nDOif4FGGOUe0opdF2H6/UqNvcb7z32+z02mw3O5/PN04w3sy7ZhxBkbdsW2+0Wu90OwzCMgEQmQ6V6eO9EJ6Q7lmuGBCah2SaZhpe4qbVBjEk0pR8wHxKsi4jpHjznJEQIRKU0o8cBvTIIgeAJblKCHY4O+2eNUxdu4FzpNMYsuS+dCCDjZ3HWDEpWYscsQEPM4tDYiGuvF7lu5pzMgHmVu0VBKpVn/sv7DwFrbbOIYFICSgFLQCZ0HbJ8xFZQCtEYhOMR4XQancWIzPZKCUbrRQfcAHlAgMTyU0PA0HVwb28C5j8+MHx9yb6cey+r7vsKYM7Ql4tcmj2TxX/EWHufQ27Y6cktQmZ/WTuyslbCL8/otBoyDQmZuSl0uFxg2xb+cIB5eoJ7f/8Jmco5UAuZhmZ+5otTDqsDYnI2CyOrhuwqIdfA1mIf5bAcW8KCL6Pv4V5fpcr25QX+83PMa1Hl+5CnppQqlyFzihgjoNKLSsk+W+vWCY/6cFGUaWr8V6pPTwD5hFAfqr+pfsRwnsJ//a+shZOqlG/BJXgnZOcigQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sse&quot;
        title=&quot;sse&quot;
        src=&quot;/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/f058b/sse.png&quot;
        srcset=&quot;/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/c26ae/sse.png 158w,
/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/6bdcf/sse.png 315w,
/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/f058b/sse.png 630w,
/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/40601/sse.png 945w,
/dev-blog/static/e9061ada0ae476d3fd73f9271d6d585d/78612/sse.png 1260w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;응답마다 다시 요청을 해야하는 Long polling 방식보다 효율적입니다(물론 상황에 따라 달라질 수 있습니다).
SSE는 서버에서 클라이언트로 text message를 보내는 브라우저 기반 웹 애플리케이션 기술입니다. SSE는 HTTP의 persistent connections을 기반으로하는 표준 기술입니다.&lt;/p&gt;
&lt;p&gt;이 외에도 웹소켓을 이용해 서버와 양방향 통신을 하는 방법이 있습니다. 서비스 상황에 맞게 적절한 방법을 선택하면 됩니다.&lt;/p&gt;
&lt;p&gt;저희 팀은 처음에는 구현이 간단한 short polling 방식을 사용했으나, 사용자에게 높은 실시간성을 제공하기 위해 0.1초마다 서버에 요청을 보내다보니 서버에도 부담이 크고, 변경 사항이 없는데도 DOM을 계속 갈아끼우는 문제가 있기 때문에 SSE 방식으로 변경하기로 결정했습니다.&lt;/p&gt;
&lt;p&gt;사실 저희 서비스의 특성 상 SSE보다는 WebSocket이 더 적절하다는 논의가 있었으나, 지금 당장은 새로운 라이브러리 추가나 프로토콜 학습 없이 바로 적용할 수 있는 SSE를 적용하기로 했습니다.&lt;/p&gt;
&lt;h2&gt;개요&lt;/h2&gt;
&lt;p&gt;SSE를 이용하는 통신의 개요는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/aea0a/sse2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABcklEQVQ4y41TWa6DMAzk/qfsV6EsZcnqbPNkI9pAW+lFMgbi2OPxpCmlgFfOGd57OOcQQgD/563d78aL9zjm+D78sZp6Y1kW3G43EPmPQGD/nqYJ9/tdANSFjvdXQu0NFjujX1tYcsi5gGKBowJLBSm9D3KyU6mqeHNFoa2Vw5zQGcI8KEyPDUYTYgK8i9BKQymFdV2htTkjZN6WdZUAtSl4Y4EYUEJAHAfER7f75xPZOeQYhUPvSSgyxpw5TCnBWott28S8cy/GcghIziMqjUzEMJBLkeHxOUbEvrZLywDxBDk4ZyRjEOYZgdERocQoRbjwo+8xjiOGYZDW+76XQk0tCyabvGcNScKa9FpeLJ1fq7kGnxBqjTCOoK5DslbQMVJGxNJhVG3bYp5ndF0n3Db12PkZuDVOGONuF4n8C6EEEgkimiZp+aqzby3XdH0Im2WSvAcpJdMsl0SH50kST/zLtXsJu245/bijdeLjpnxL+AeaBf8RD0Sy4QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sse2&quot;
        title=&quot;sse2&quot;
        src=&quot;/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/f058b/sse2.png&quot;
        srcset=&quot;/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/c26ae/sse2.png 158w,
/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/6bdcf/sse2.png 315w,
/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/f058b/sse2.png 630w,
/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/40601/sse2.png 945w,
/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/78612/sse2.png 1260w,
/dev-blog/static/c9d3a25dbd760dd65d96cdb48af73160/aea0a/sse2.png 2018w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Client: SSE Subscribe 요청&lt;/h3&gt;
&lt;p&gt;우선 클라이언트에서 서버의 이벤트를 구독하기 위한 요청을 보내야합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;http&quot;&gt;&lt;pre class=&quot;language-http&quot;&gt;&lt;code class=&quot;language-http&quot;&gt;&lt;span class=&quot;token request-line&quot;&gt;&lt;span class=&quot;token method property&quot;&gt;GET&lt;/span&gt; &lt;span class=&quot;token request-target url&quot;&gt;/connect&lt;/span&gt; &lt;span class=&quot;token http-version property&quot;&gt;HTTP/1.1&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;Accept&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;text/event-stream&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;Cache-Control&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;no-cache&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;Connection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;keep-alive&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이벤트의 미디어 타입은 &lt;code class=&quot;language-text&quot;&gt;text/event-stream&lt;/code&gt;이 표준으로 정해져있습니다. 이벤트는 캐싱하지 않으며 지속적 연결을 사용해야합니다.&lt;/p&gt;
&lt;h3&gt;Server: Subscription에 대한 응답&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;http&quot;&gt;&lt;pre class=&quot;language-http&quot;&gt;&lt;code class=&quot;language-http&quot;&gt;HTTP/1.1 200
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;Content-Type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;text/event-stream;charset=UTF-8&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;Transfer-Encoding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;chunked&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;응답의 미디어 타입은 &lt;code class=&quot;language-text&quot;&gt;text/event-stream&lt;/code&gt; 입니다. 이때 &lt;code class=&quot;language-text&quot;&gt;Transfer-Encoding&lt;/code&gt; 헤더의 값을 &lt;code class=&quot;language-text&quot;&gt;chuncked&lt;/code&gt;로 설정합니다. 서버는 동적으로 생성된 컨텐츠를 스트리밍하기 때문에 본문의 크기를 미리 알 수 없기 때문입니다.&lt;/p&gt;
&lt;h3&gt;Server: 이벤트 전달&lt;/h3&gt;
&lt;p&gt;클라이언트에서 subscribe를 하고나면 서버는 해당 클라이언트에게 비동기적으로 데이터를 전송할 수 있습니다. 이때 데이터는 &lt;code class=&quot;language-text&quot;&gt;UTF-8&lt;/code&gt;로 인코딩된 텍스트 데이터만 가능합니다(바이너리 데이터는 전송 불가능).&lt;/p&gt;
&lt;p&gt;서로 다른 이벤트는 줄바꿈 문자 두개(\n\n)로 구분되며 각각의 이벤트는 한 개 이상의 &lt;code class=&quot;language-text&quot;&gt;name: value&lt;/code&gt; 필드로 구성되며 이들은 줄바꿈 문자 하나로 구분됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;http&quot;&gt;&lt;pre class=&quot;language-http&quot;&gt;&lt;code class=&quot;language-http&quot;&gt;&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;type1&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;An event of type1.&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;type2&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token header&quot;&gt;&lt;span class=&quot;token header-name keyword&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token header-value&quot;&gt;An event of type2.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;코드로 살펴봅시다&lt;/h2&gt;
&lt;p&gt;사용된 예시 코드는 &lt;a href=&quot;https://github.com/awesomeo184/sse-sample&quot;&gt;여기&lt;/a&gt;서 확인하실 수 있습니다.&lt;/p&gt;
&lt;p&gt;기본적인 흐름을 먼저 설명하자면,&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;클라이언트에서 SSE 연결 요청을 보낸다.&lt;/li&gt;
&lt;li&gt;서버에서는 요청한 브라우저에 해당하는 SSE 통신 객체를 만든다.&lt;/li&gt;
&lt;li&gt;향후 서버에서 이벤트가 발생하면 해당 객체를 통해 클라이언트로 데이터를 전달한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;그림으로 보면 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/a88f6/sse3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABMklEQVQoz6WTjW6DMAyEef83LOooggJhhdKOfyj19FkyoqjTNO0ki8TY57OTeM/nUzBg663vLyDHG8dRuq57G9C2rfi+L9frVffLsvxoJsDr+14TQV3XUlWVPB4P3VPodrsJMSThx+Z5lmmaXowYJbSfVGiaRpxzEkWREqEeQAI5SXyJ3wO/tgwJylBggAi/KS+KQk6nk8RxLIfDQfI8Vz/ECLLxqMI0TSXLslXN9jAsiC+KIQYUO5/PMgyD5pGzEr47DFqzNi34UhQ6X/BV1/J5KdbYF0Kq0DK43+9aGdWosNNnHYahJEmi+8w5OR4/tKh1ZsTedtC0RCW7BhbEf4pgrHPnJAgCjbX49ZTtHu3nB7bXw9Ykooq9zdBMCVFFZavw75fC3MqyfHvK+6f4m6HwG4++qtCTGsIEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sse3&quot;
        title=&quot;sse3&quot;
        src=&quot;/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/f058b/sse3.png&quot;
        srcset=&quot;/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/c26ae/sse3.png 158w,
/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/6bdcf/sse3.png 315w,
/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/f058b/sse3.png 630w,
/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/40601/sse3.png 945w,
/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/78612/sse3.png 1260w,
/dev-blog/static/07d241cd25a664abebd2e6ce4154af70/a88f6/sse3.png 1900w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/0faf1/sse4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKElEQVQoz41Ti46EIAzc//9GExMXfBxqfCCKqN1Mb0vUvVy2SRXpMJ22+CAi2vedjuMgMazFt227xP4z4B5YjONI3vu4KQayNE1JKUXrujIGjnUIITpwEAVjQmstBwBsmobyPKdlWRg0z3MkQOKyLCnLMk7inIvnRBATYkMy4I0EbdsyGIoBLquKjDFUVRXH76WCgwkB1lozwb1kgFAOVNZ1zZgkSVjh7FxswYUQitw7eDYpA4S/vtPiPVk70o8xNL5VojUXQjxwUMrruo77BJ+mKRIqrUkpzYeMqSl7PiPRB2Hf95xpGAbuE96iWiZZFAUPAhUhGaa/hvBZsigEEJuYJA6iX9hDovNVwfd5Ld+REOVAFa6LTFSC317oy8W+E/71t3zrUPgCcjdcK60psBwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;sse4&quot;
        title=&quot;sse4&quot;
        src=&quot;/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/f058b/sse4.png&quot;
        srcset=&quot;/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/c26ae/sse4.png 158w,
/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/6bdcf/sse4.png 315w,
/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/f058b/sse4.png 630w,
/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/40601/sse4.png 945w,
/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/78612/sse4.png 1260w,
/dev-blog/static/cda947189eb317f424fdbcae6a969fe9/0faf1/sse4.png 1956w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;우선 클라이언트에서는 &lt;code class=&quot;language-text&quot;&gt;EventSource&lt;/code&gt;라는 인터페이스로 SSE 연결 요청을 할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EventSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:8080/connect&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;spring framework 4.2부터 SSE 통신을 지원하는 &lt;code class=&quot;language-text&quot;&gt;SseEmitter&lt;/code&gt; API를 제공합니다. 이를 이용해 SSE 구독 요청에 대한 응답을 할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;lombok&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;extern&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slf4j&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Slf4j&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MediaType&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;GetMapping&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RestController&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;web&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;servlet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mvc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;  
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sseEmitters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
  
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/connect&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; produces &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MediaType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TEXT_EVENT_STREAM_VALUE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt; emitter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
            emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;connect&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;connected!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;생성자를 통해 만료시간을 설정할 수 있습니다. 디폴트 값은 서버에 따라 다릅니다. 내장 톰캣을 사용하면 30초정도 되는 것 같습니다. 만료시간이 다되면 &lt;strong&gt;브라우저에서 자동으로 서버에 재연결 요청&lt;/strong&gt;을 보냅니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt; emitter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;이때 생성된 &lt;code class=&quot;language-text&quot;&gt;SseEmitter&lt;/code&gt; 객체는 향후 이벤트가 발생했을 때, 해당 클라이언트로 이벤트를 전송하기 위해 사용되므로 서버에서 저장하고 있어야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;주의해야할 점은 처음 Emitter를 생성할 때, 아무 데이터도 넣지 않으면 503 Service Unavailable 에러가 발생합니다. 따라서 생성할 때는 아무 데이터라도 넣어줘야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;connect&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;         &lt;span class=&quot;token comment&quot;&gt;// 해당 이벤트의 이름 지정&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;connected!&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// 503 에러 방지를 위한 더미 데이터&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;이벤트 이름을 설정해주면 클라이언트에서 해당 이름으로 이벤트를 받을 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EventSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:8080/connect&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

sse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;connect&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; receivedConnectData &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;connect event data: &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;receivedConnectData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// &quot;connected!&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SseEmitter&lt;/code&gt;를 생성할 때는 비동기 요청이 완료되거나 타임아웃 발생 시 실행할 콜백을 등록할 수 있습니다. 타임아웃이 발생하면 브라우저에서 재연결 요청을 보내는데, 이때 새로운 Emitter 객체를 다시 생성하기 때문에(&lt;code class=&quot;language-text&quot;&gt;SseController&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;connect()&lt;/code&gt;메서드 참조) 기존의 Emitter를 제거해주어야 합니다. 따라서 &lt;code class=&quot;language-text&quot;&gt;onCompletion&lt;/code&gt; 콜백에서 자기 자신을 지우도록 등록합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;  
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; emitters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CopyOnWriteArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
    &lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt; emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;emitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;new emitter added: {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;emitter list size: {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; emitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onCompletion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
            log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;onCompletion callback&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;emitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// 만료되면 리스트에서 삭제&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
            log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;onTimeout callback&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
            emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;complete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; emitter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;주의할 점은 이 콜백이 &lt;strong&gt;SseEmitter를 관리하는 다른 스레드에서 실행&lt;/strong&gt;된다는 것입니다. 따라서 &lt;code class=&quot;language-text&quot;&gt;thread-safe&lt;/code&gt;한 자료구조를 사용하지 않으면 &lt;code class=&quot;language-text&quot;&gt;ConcurrnetModificationException&lt;/code&gt;이 발생할 수 있습니다. 여기서는 thread-safe한 리스트인 &lt;code class=&quot;language-text&quot;&gt;CopyOnWriteArrayList&lt;/code&gt;를 사용하였습니다.&lt;/p&gt;
&lt;p&gt;이제 서버에서 무언가 변경 사항이 생겼을 떄, 클라이언트의 요청이 없어도 데이터를 전송할 수 있습니다. 본 예시에서는 누군가 &lt;code class=&quot;language-text&quot;&gt;/count&lt;/code&gt;를 호출하면 서버에 저장된 숫자를 1 증가시키고 이를 SSE 통신 중인 모든 클라이언트에게 전달하도록 해보겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;  
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sseEmitters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  

	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/count&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        sseEmitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;  
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SseEmitters&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AtomicLong&lt;/span&gt; counter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AtomicLong&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; emitters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CopyOnWriteArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
	
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; counter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;incrementAndGet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        emitters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;emitter &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
                emitter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SseEmitter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
                        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;count&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
                        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
클라이언트에서는 `count`라는 이름의 이벤트가 발생할 때 콘솔에 변경된 데이터를 찍도록 이벤트 리스너를 등록해둡니다.
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;sse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token char&quot;&gt;&apos;count&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; receivedCount &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;count event data&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;receivedCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
    &lt;span class=&quot;token function&quot;&gt;setCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;receivedCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 만약 다른 브라우저에서 count를 호출한다면 내 브라우저에 서버에서 변경된 값이 찍히게 됩니다.&lt;/p&gt;
&lt;h2&gt;주의점&lt;/h2&gt;
&lt;p&gt;스프링에서도 API를 지원해주고 있기 때문에 SSE 통신을 구현하는 것 자체는 굉장히 쉽습니다. 하지만 기능을 구현하고 서비스에 배포하기까지 여러 어려움들을 겪었는데요, SSE 통신을 구현하면서 진행한 트러블슈팅을 공유하면서 글을 마치도록 하겠습니다.&lt;/p&gt;
&lt;h3&gt;503 Service Unavailable&lt;/h3&gt;
&lt;p&gt;위에서 언급했듯이 처음에 SSE 응답을 할 때 아무런 이벤트도 보내지 않으면 재연결 요청을 보낼때나, 아니면 연결 요청 자체에서 오류가 발생합니다.&lt;/p&gt;
&lt;p&gt;따라서 첫 SSE 응답을 보낼 시에는 반드시 더미 데이터라도 넣어서 데이터를 전달해야합니다.&lt;/p&gt;
&lt;h3&gt;헤더에 토큰 전달&lt;/h3&gt;
&lt;p&gt;SSE 연결 요청을 할 때 헤더로 JWT를 담아서 보내줘야하는 상황이었는데, &lt;code class=&quot;language-text&quot;&gt;EventSource&lt;/code&gt; 인터페이스는 기본적으로 헤더 전달을 지원하지 않습니다. &lt;a href=&quot;https://www.npmjs.com/package/event-source-polyfill&quot;&gt;event-source-polyfill&lt;/a&gt; 을 사용하면 헤더를 함께 보낼 수 있습니다.&lt;/p&gt;
&lt;h3&gt;JPA 사용시 Connection 고갈 문제&lt;/h3&gt;
&lt;p&gt;QA를 하다가 발견한 문제입니다. &lt;strong&gt;SSE 통신을 하는 동안은 HTTP Connection이 계속 열려있습니다.&lt;/strong&gt; 만약 SSE 연결 응답 API에서 JPA를 사용하고 &lt;code class=&quot;language-text&quot;&gt;open-in-view&lt;/code&gt; 속성이 true로 되어있다면, &lt;strong&gt;HTTP Connection이 열려있는 동안 DB Connection도 같이 열려있게 됩니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;즉 DB Connection Pool에서 최대 10개의 Connection을 사용할 수 있다면, &lt;strong&gt;10명의 클라이언트가 SSE 연결 요청을 하는 순간 DB 커넥션도 고갈되게 됩니다.&lt;/strong&gt; 따라서 이 경우 &lt;code class=&quot;language-text&quot;&gt;open-in-view&lt;/code&gt; 설정을 반드시 false로 설정해야 합니다.&lt;/p&gt;
&lt;h3&gt;ConcurrentModificationException&lt;/h3&gt;
&lt;p&gt;마찬가지로 위에서 언급했듯이, &lt;code class=&quot;language-text&quot;&gt;onCompletion&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;onTimeout&lt;/code&gt; 콜백은 별도의 스레드에서 호출됩니다. 만약 이 콜백을 통해 &lt;code class=&quot;language-text&quot;&gt;SseEmitter&lt;/code&gt; 객체가 담긴 컬렉션에 연산을 한다면 해당 컬렉션은 thread-safe한 자료구조를 사용해야합니다. 처음에 그냥 &lt;code class=&quot;language-text&quot;&gt;ArrayList&lt;/code&gt;를 사용했다가 SseEmitter가 만료될 때마다 ConcurrentModificationException이 발생하는 문제를 겪었었습니다.&lt;/p&gt;
&lt;h3&gt;Nginx 사용시 주의할 점&lt;/h3&gt;
&lt;p&gt;로컬에서 잘 동작하는 것을 확인하고 배포를 했더니 SSE 통신이 동작하지 않는 문제가 발생했었습니다.&lt;/p&gt;
&lt;p&gt;저희 팀은 리버스 프록시로 Nginx를 사용하고 있었는데요&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/4b12547a044695854a0d7371e37c9051/9c1e6/arch.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB90lEQVQoz3WTzW7TQBRG84Y8CW/Ang0LhJBgwQ6xYUEFLNhURGVRhFSkCiFElTY0TuzE9owd/41nPPYclElKQ6Ne2Z7xaHR0v+/eO3LO8V9YRZ9O6ccvoI5xpvbHB/fuidHm03UdVV1TrjNMFtEMls/zrwy9gUbitkQPvQHvr36/+/dAKQRCCIpcYmSErFe8m3zCtmtQ+SHwzrq/3wLLEtPbbc4biJhCHvjX6WoH9A83wj1oT6rbl6yDP9ii2nnY0suA7ssraFIYut15g/n+AS7G3mcfvcaKGWr8HMoI1ylGayU4eviI2fun1LWgFRHKar5NT3CDoREhMl5AZ7iKTgnlD1AlIo1ps4i+0yTRNVjt/R4lWvLg7WN+nT9BrVOMXCKV5M30mN7UqI2nqwB6OAmPOEvG0GrSZIXOlxitEFmM61rvt5ecimu03klWGS69hHKFk1PwbTPgNtUWCygFtNn2rqlw2QzEBIoI1xaMbG8JF0us7f/5QjyhPX4GZXLrIQNiGSDjOaoqqOqGYeihU947Zxpf6V2GKakQvg8bMeeyikgWZ0TVBVUSkK8L6rohWIQUVU3bapqmue3Fu41tu44wjIjmM8p0xuv5KWf5OR+vXvqihMsVQTBDSnEwGXf7cXQwUm2OjX8zLH/Cxh9THQDcPVOzyfAvR6OaBdqO4ZkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;프로젝트 아키텍처&quot;
        title=&quot;프로젝트 아키텍처&quot;
        src=&quot;/dev-blog/static/4b12547a044695854a0d7371e37c9051/f058b/arch.png&quot;
        srcset=&quot;/dev-blog/static/4b12547a044695854a0d7371e37c9051/c26ae/arch.png 158w,
/dev-blog/static/4b12547a044695854a0d7371e37c9051/6bdcf/arch.png 315w,
/dev-blog/static/4b12547a044695854a0d7371e37c9051/f058b/arch.png 630w,
/dev-blog/static/4b12547a044695854a0d7371e37c9051/40601/arch.png 945w,
/dev-blog/static/4b12547a044695854a0d7371e37c9051/78612/arch.png 1260w,
/dev-blog/static/4b12547a044695854a0d7371e37c9051/9c1e6/arch.png 1734w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;원인을 찾아보던 중 Nginx는 기본적으로 Upstream으로 요청을 보낼때 HTTP/1.0 버전을 사용한다는 것을 확인했습니다.&lt;/p&gt;
&lt;p&gt;HTTP/1.1은 지속 연결이 기본이기 때문에 헤더를 따로 설정해줄 필요가 없지만, &lt;strong&gt;Nginx에서 백엔드 WAS로 요청을 보낼 때는 HTTP/1.0을 사용하고 &lt;code class=&quot;language-text&quot;&gt;Connection: close&lt;/code&gt; 헤더를 사용&lt;/strong&gt;하게 됩니다.&lt;/p&gt;
&lt;p&gt;SSE는 지속 연결이 되어 있어야 동작하는데 Nginx에서 지속 연결을 닫아버려 제대로 동작하지 않았습니다.&lt;/p&gt;
&lt;p&gt;따라서 아래와 같이 nginx 설정을 추가해야 제대로 동작합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;nginx&quot;&gt;&lt;pre class=&quot;language-nginx&quot;&gt;&lt;code class=&quot;language-nginx&quot;&gt;&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_set_header&lt;/span&gt; Connection &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token directive&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;proxy_http_version&lt;/span&gt; 1.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또 Nginx의 proxy buffering 기능도 조심해야 하는데요, SSE 통신에서 서버는 기본적으로 응답에 &lt;code class=&quot;language-text&quot;&gt;Transfer-Encoding: chunked&lt;/code&gt;를 사용합니다. SSE는 서버에서 동적으로 생성된 컨텐츠를 스트리밍하기 때문에 본문의 크기를 미리 알 수 없기 때문입니다.&lt;/p&gt;
&lt;p&gt;Nginx는 서버의 응답을 버퍼에 저장해두었다가 버퍼가 차거나 서버가 응답 데이터를 모두 보내면 클라이언트로 전송하게 됩니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;참고: &lt;a href=&quot;https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/&quot;&gt;https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;문제는 버퍼링 기능을 활성화하면 &lt;strong&gt;SSE 통신 시 원하는대로 동작하지 않거나 실시간성이 떨어지게 된다는 것&lt;/strong&gt;입니다. 따라서 SSE 응답에 대해서는 proxy buffering 설정을 비활성화 해주는 것이 좋습니다.&lt;/p&gt;
&lt;p&gt;하지만 Nginx의 설정 파일에서 버퍼링을 비활성화하면 다른 모든 API 응답에 대해서도 버퍼링을 하지 않기 때문에 비효율적일 수 있습니다. 이때 nginx의 &lt;a href=&quot;https://www.nginx.com/resources/wiki/start/topics/examples/x-accel/&quot;&gt;X-accel&lt;/a&gt; 기능을 활용하면 좋습니다.&lt;/p&gt;
&lt;p&gt;백엔드의 응답 헤더에 X-accel로 시작하는 헤더가 있으면 Nginx가 이 정보를 이용해 내부적인 처리를 따로 하도록 만들 수 있습니다. 따라서 SSE 응답을 반환하는 API의 헤더에 &lt;code class=&quot;language-text&quot;&gt;X-Accel-Buffering: no&lt;/code&gt;를 붙여주면 SSE 응답만 버퍼링을 하지 않도록 설정할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;스케일 아웃 시 문제&lt;/h3&gt;
&lt;p&gt;아직은 스케일 아웃을 하지 않아서 직접 트러블 슈팅을 하지는 않았지만, 서버를 늘리고 로드밸런싱을 하게 될 경우 현재 코드는 제대로 동작하지 않습니다. &lt;code class=&quot;language-text&quot;&gt;SseEmitter&lt;/code&gt; 객체를 서버의 메모리에서 저장하고 있기 때문입니다.&lt;/p&gt;
&lt;p&gt;서버 인스턴스를 늘릴 때 좀 더 고민해봐야겠지만 현재는 &lt;a href=&quot;https://redis.io/docs/manual/pubsub/&quot;&gt;Redis Pub/Sub&lt;/a&gt;을 이용하여 해결할 수 있을 것으로 생각하고 있습니다.&lt;/p&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;사실 저희 프로젝트 요구 사항으로는 Server-Sent Events보다는 Websocket을 이용하는 것이 더 적합하다고 생각하고 있습니다. Server-Sent Events는 서버에서 클라이언트로의 단방향 통신만 가능하기 때문에 클라이언트의 상호작용 없이 서버로부터 데이터가 전달되어야 하는 상황에 적합하기 때문입니다. 대표적으로 스포츠 중계 서비스나 SNS 피드 같은 성격의 서비스가 그러합니다.&lt;/p&gt;
&lt;p&gt;우선은 프로토콜을 추가로 사용하지 않고 바로 기능을 서비스하기 위해 SSE를 사용하였지만 추후 Websocket을 적용할 것을 고려하고 있습니다.&lt;/p&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/aliakh/demo-spring-sse&quot;&gt;https://github.com/aliakh/demo-spring-sse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/EventSource&quot;&gt;MDN EventSource&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/4.2.0.RC2_to_4.2.0.RC3/Spring%20Framework%204.2.0.RC3/org/springframework/web/servlet/mvc/method/annotation/SseEmitter.html&quot;&gt;SseEmitter API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.nginx.com/resources/wiki/start/topics/examples/x-accel/&quot;&gt;Nginx X-accel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/&quot;&gt;Nginx reverse proxy guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[JPA N+1 문제 찾아 삼만리]]></title><description><![CDATA[JPA N+1 문제 찾아 삼만리 안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 범고래입니다.
이번에 프로젝트에 JPA를 사용하면서 N+1 문제가 발생하는 곳을 찾고, 해결하는 시간을 가졌는데요. N+1 문제란? 처음 개발할 때 부터 N+…]]></description><link>https://gong-check.github.io/dev-blog/BE/범고래/N+1/nplus1/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/범고래/N+1/nplus1/</guid><pubDate>Fri, 16 Sep 2022 02:24:00 GMT</pubDate><content:encoded>&lt;h1&gt;JPA N+1 문제 찾아 삼만리&lt;/h1&gt;
&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 범고래입니다.
이번에 프로젝트에 JPA를 사용하면서 N+1 문제가 발생하는 곳을 찾고, 해결하는 시간을 가졌는데요.&lt;/p&gt;
&lt;h2&gt;N+1 문제란?&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;💡 N + 1문제란 1번의 쿼리를 실행했을 때 의도치 않게 N번의 쿼리가 추가적으로 실행되는 것을 말합니다.
예를 들어, 하나의 엔티티를 조회했을 때 그것과 연관된 다른 엔티티를 다시 조회하여 비효율이 발생하는 상황 등이 있습니다. 여러 번의 쿼리를 날리는 것이 아니라, 한번 조회할 때 한 번에 조회하는 것이 더 효율적일텐데 말이죠.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;처음 개발할 때 부터 N+1 문제는 없는지 테스트하며 사용했으면 좋았겠지만, JPA를 학습하며 프로젝트를 진행했기 때문에 당시엔 미처 파악하지 못한 메서드가 프로젝트 내에 존재했습니다.&lt;/p&gt;
&lt;p&gt;이를 해결하기 위해 어떤 방식으로 N+1 문제를 찾았고, 어떻게 문제가 발생했는지에 대한 내용을 소개해볼까합니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;처음 N+1 쿼리 문제를 찾는 과정&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/cc12bc23537d37e79f94357393f47026/e8950/img.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz22S3a6aQBSFfZiCzAzIrx5AEXFwFARRQG160T5CmzZNenHSV18NW2l6cnqxsufqy/qZSdx9hfz8CvXlN7JPv5Def2Jx+Q6v+YFl9w1OtIIbJXA9H7bnw3Vd2PbsKfudJvEqwaE+4nr7iLa/4tRcsC9K5OoAmStwIaC5C+h+BN0LobsLTJ0ATFjgjIFxDv6PJst1in1VouvvuHRXUnPpUBxrbHMF0xSY+hG0SEIPM2jRFloswZwAgnMIId5oskzWBOyvd9TNGVXdEEwdSmQyh2nNYDgBDHcONnPALBts5oJbM3I/aoBzAq5Titx2V7T9Dee2Q3NucawbbGUOYbvQgxiGtwAXJrhpPQCMPRw+NUInq3SDoq4IVp3O5O5QViirE/KdguGH0F5S6PMV9HlCd6hguA/nAZjjw3B8cv7scHB4Q91cCCp3e+z2BWS+gxHE0MIM+svm0SPBE3xYKkyDJTkfHfKxQ3UscW57WnkYJEkzpJlEtpXg3gJTLwSn7pxHZNOiLsf3W+A6JWBLC/fUH8VVB6SbLUzLooiDm2kQU7wBLDh7158Yv41UCkVZYV8c//Y33EzuYApBCw8wAvshmO39d+HB4R+P1U6oT0T+ogAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img.png&quot;
        title=&quot;img.png&quot;
        src=&quot;/dev-blog/static/cc12bc23537d37e79f94357393f47026/f058b/img.png&quot;
        srcset=&quot;/dev-blog/static/cc12bc23537d37e79f94357393f47026/c26ae/img.png 158w,
/dev-blog/static/cc12bc23537d37e79f94357393f47026/6bdcf/img.png 315w,
/dev-blog/static/cc12bc23537d37e79f94357393f47026/f058b/img.png 630w,
/dev-blog/static/cc12bc23537d37e79f94357393f47026/40601/img.png 945w,
/dev-blog/static/cc12bc23537d37e79f94357393f47026/78612/img.png 1260w,
/dev-blog/static/cc12bc23537d37e79f94357393f47026/e8950/img.png 2000w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;🤔 처음 접근했던 방식은 인수 테스트를 실행했을 때, 발생하는 쿼리를 하나하나 다 찾아 보는 것이었는데요.
이렇게 보기엔 테스트 개수도 적지 않을 뿐더러, api를 호출할 때 마다 어떤 쿼리가 몇개가 발생하는지 등 한 눈에 파악하기가 힘들었습니다.&lt;/p&gt;
&lt;p&gt;이를 해결하기 위해서, 인수 테스트 전체를 실행하면 api 호출 마다 몇 개의 쿼리가 나가는지, n+1이 의심이 가지는 않는지 등을 한 눈에 볼 수 있게 파일로 추출해주는 라이브러리가 있으면 어떨까라는 생각을 하게 됐습니다.&lt;/p&gt;
&lt;h2&gt;라이브러리 구현 설계&lt;/h2&gt;
&lt;h3&gt;StatementInspector 인터페이스 활용&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/d716ce10d6277536a6b71b1823505608/64639/img_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 24.050632911392405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAm0lEQVQY052QyQ7DIAxE+f9PTHIHhRAgO2FxNZYctVVPtfTkMcJ4jBqGgbquY/q+p33fCdFao39C3fdN13VRSokppfBjv6i1fvB9hlrN80zAOceInqaJs/f+0TFGriUvy8Ja+rCd0lrTOI5kjCFoay1flkHQIQTWOWfCRrKVIO7Y4bquBLZt40ZoTAaokc/zZOAAHMfxOAXvf/gCsyuC8rdt6s0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img.png&quot;
        title=&quot;img.png&quot;
        src=&quot;/dev-blog/static/d716ce10d6277536a6b71b1823505608/f058b/img_1.png&quot;
        srcset=&quot;/dev-blog/static/d716ce10d6277536a6b71b1823505608/c26ae/img_1.png 158w,
/dev-blog/static/d716ce10d6277536a6b71b1823505608/6bdcf/img_1.png 315w,
/dev-blog/static/d716ce10d6277536a6b71b1823505608/f058b/img_1.png 630w,
/dev-blog/static/d716ce10d6277536a6b71b1823505608/40601/img_1.png 945w,
/dev-blog/static/d716ce10d6277536a6b71b1823505608/78612/img_1.png 1260w,
/dev-blog/static/d716ce10d6277536a6b71b1823505608/64639/img_1.png 1568w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;💡 StatementInspector는 SQL문을 가로채고 수정할 수 있는 기능을 제공하는 인터페이스 입니다.

모든 Hibernate SQL문을 가로채 실행되기 전에, SQL문을 변경하여 실행할 수도 있는 신기한 친구입니다.

이것을 사용해서 현재 문제를 어느 정도 해결해 줄 수 있을 것 같다는 생각이 들었습니다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이미지 출처: &lt;a href=&quot;https://vladmihalcea.com/hibernate-statementinspector/&quot;&gt;https://vladmihalcea.com/hibernate-statementinspector/&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;문제 정의&lt;/h3&gt;
&lt;p&gt;💡 위 설명을 보고 간단하게 Interceptor와 StatementInspector를 활용하면 될 것 같은데요.
먼저 어떤 문제를 해결할 것인지를 정의해 보았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;1. 하나의 api를 실행하는 동안 걸리는 시간
2. 쿼리가 실행된 개수
3. 어떤 쿼리들이 실행되었는지 리스트업
4. n+1이 의심되는 로직 체크 (저는 동일한 select 문이 2개 이상 사용한다면, n+1을 의심해 볼 만한 상황으로 판단했습니다. )
5. 1~4번까지를 기록하여 파일로 추출&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;라이브러리 구성&lt;/h2&gt;
&lt;p&gt;생각보다 구현 로직이 간단해서 빠르게 진행해 봤는데요.
핵심 로직을 수행하는 &lt;code class=&quot;language-text&quot;&gt;JpaInspector&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;QueryCountInterceptor&lt;/code&gt; 가 어떤 역할을 하는지 간단하게만 언급하고 자세한 내용이 궁금하시다면 &lt;a href=&quot;https://github.com/sogorae/jpa-query-counter&quot;&gt;실제 코드&lt;/a&gt;를 봐도 좋을 것 같습니다.&lt;/p&gt;
&lt;h3&gt;JpaInspector로 SQL 가져오기&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/fa422719316722043492fab389c58083/eb2af/img_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVQoz32RTZbcIAyE+zBJxoAAg8H/xvb0zCL3P9CXZ/q1Z5dFIYSkEiU9tqhYo6L3mhIa+i4wbwfzWipy7tlCw5kUJV7xlmndWbadaVl/8oYR5zwPMRprNc4pvFNYURhjMCJoI2htMEYjxiBaobWucRG5rYi9/YdSQu4anuUX8/CbaRLEOrw1RG9oncGLxhmF8y3Oe8TaiotAKYVSTbVX88f1i2A1pVPMuWO6JGw7+9rz90wca88+BMoQyOPMNG/Mc2EaV1LMOOtoQ8R7X5U8ri5VlgjbOtfZLOWgH2fGpbCU87Yp9/R5Yu43hjTR+UzXJoZpIaWEvAnrLIwmyEcl2z+/WMtBOZ61wfH8ppxflPPJdnyy7mdVEWJAa/WS+5Z8E4qgxGF9IMSuInYJ71tyP9KlXP3r/bqn6y1G3vUv3JJfW1yTJds/tbBtPU3zUWNN09yDv9H8LOLNUbd8HXVzIkSrKtoQaL2/k/4PfZNehP8AVfoagBqOKPQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img2.png&quot;
        title=&quot;img2.png&quot;
        src=&quot;/dev-blog/static/fa422719316722043492fab389c58083/f058b/img_2.png&quot;
        srcset=&quot;/dev-blog/static/fa422719316722043492fab389c58083/c26ae/img_2.png 158w,
/dev-blog/static/fa422719316722043492fab389c58083/6bdcf/img_2.png 315w,
/dev-blog/static/fa422719316722043492fab389c58083/f058b/img_2.png 630w,
/dev-blog/static/fa422719316722043492fab389c58083/40601/img_2.png 945w,
/dev-blog/static/fa422719316722043492fab389c58083/eb2af/img_2.png 954w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/37048/img_3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVQoz4WRa24DMQiEfZysMWD8XDfJ/Y81lb1OlaqR+uMTY5ARDI4LgzODq2DpwggWwClc+XTVV27XvPcLIvqDsy6Y5CGwoYjNIFGhppCJBqgSRPl6R0UIDPL00/gd1+RAVY+hN9TIqH2g9RPtHEsXEwy7oeaI0k70MZBbBauAmBCYVnzhaE7wiNCnXfEui/jQrSPkHhGfEXLOlQlh2yGTbdlLO5IA6QKpu9gEMtk5T9urcOFfqx6fcSqEXAOsGqwZSheUrkgjw3paXtKbR58O8esoiQ9UOWCWkFLBVxWMosi5IueGZAlEHn5/+K/pNytW2ACa6Fi9AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img3.png&quot;
        title=&quot;img3.png&quot;
        src=&quot;/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/f058b/img_3.png&quot;
        srcset=&quot;/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/c26ae/img_3.png 158w,
/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/6bdcf/img_3.png 315w,
/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/f058b/img_3.png 630w,
/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/40601/img_3.png 945w,
/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/78612/img_3.png 1260w,
/dev-blog/static/184c1f99072ac796cc4f220b62362ff7/37048/img_3.png 1352w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;💡 StatementInspector를 implements하고 있는 JpaInspector 클래스를 작성했습니다.
inspect를 Override 하면 실행될 sql문을 가로챌 수 있는데요.

해당 메서드를 통해 API당 발생하는 `sql문을 저장`하고 `쿼리 개수`를 세주는 작업을 했습니다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;QueryCountInterceptor로 JpaInspector관리하고 필요한 정보 파일로 추출하기&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/b8bf8/img_4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVQoz22Sa3LbMAyEfZuaD4APkJIoO+n9T/V1SNlJO80PDCktASx2cSsaaOqwFKnVsL5TrFNzpSchS0RTRjWhKeFDwHmP9w6/To9zDu+u71uMka6eLXuOphybsbdCzxkrjVwMUSXNoimT9GqSNKOSUFVyqaSUmLVuKpGt3ukWsSzUFLASSdExsZTLYjaTZpScXgULKrqYLyxnRGZBjYz2i57vVPXsLbGXwGaZtg+2fdD6diUlpYijtk4xw1q/mlRb7NbIIU42wl6MXgrWGi3LYpurUa0tljNhRfDf9xgJ7zMEvA/coggSI1UjWQIhxAU4d4n9jrcBE/Nfpvz936+ia+Te7uTkkBhIGlAJ675YzIYixCgXG+8WgWnUCtEvfI08hd/LnZ4dm+lyejflUQPHGByPD8aMzRjng2Nr9Fap1in10m/pWMpLwxBJIhxbp+8ntXbG/sHYB4/nJ+fzk2OcnOfJOJ+M40nNRs7ly5C5Mm85bnPuCT7O3+vxZGNm/400zymBhKm5vhY9r5Wa+GWK57bmF1kL+i7yk+A/x7/vpil/AE4YVFOu3tLOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img4.png&quot;
        title=&quot;img4.png&quot;
        src=&quot;/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/f058b/img_4.png&quot;
        srcset=&quot;/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/c26ae/img_4.png 158w,
/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/6bdcf/img_4.png 315w,
/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/f058b/img_4.png 630w,
/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/40601/img_4.png 945w,
/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/78612/img_4.png 1260w,
/dev-blog/static/cac19cfb20f7c5198ff83f62e2189bf6/b8bf8/img_4.png 1728w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;💡 `QueryCountInterceptor` 의 preHandle에서 api 요청이 올 때 마다, jpaInspector의 start()를 호출하여 `JpaInspector` 의 `QueryCounter` 객체를 초기화 합니다.

그리고 `afterCompletion` 에서 JpaInspector에서 필요한 정보를 가져와 파일로 추출합니다.

위와 같이 크게 `JpaInspector`, `QueryCountInterceptor` 등으로 구성된 프로젝트를 jitpack을 사용해 라이브러리로 배포했습니다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;사용법&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;repositories{
    mavenCentral()
    maven{url &apos;https://jitpack.io&apos;}
}

dependencies { 
	...
	implementation &apos;com.github.sogorae:jpa-query-counter:1.0.4&apos;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 build.gradle에 &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;maven{url &apos;https://jitpack.io&apos;}&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;implementation &apos;com.github.sogorae:jpa-query-counter:1.0.4&apos;&lt;/code&gt;&lt;/strong&gt; 를 추가한 후, e2e 테스트(ex. 인수 테스트)를 실행하면 원하는 정보가 파일로 추출됩니다.
&lt;a href=&quot;https://github.com/sogorae/jpa-query-counter&quot;&gt;라이브러리 링크&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;실행 결과&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/3a0a676a38890618e577e23edff6c55a/e8950/img_5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVQoz2WRXYvbRhiF9V+abLy7lqxvaWY0ow/bsnflD8mOnGTDJiGFQkubi+SiP/8pGm8g0IuHcw4DD7yMs+padNfSjQOHsac97HjXnxi7Heuyop2oatZlybLQrPQLv/S1MTSqYCMkTnva8PB85vz7E+OXkXrXouMEk2bEQUgSBKRhROz7hK5L6HoEU3redXsekeviLhb8+eo3nPVpy+nThePTQHveYh6WFGGMEoI4F8RpTpwJMlmQCkkqFEkmbGZS2UwzgZdL/rm9w1kNG46fR959/UD3fo95XKKjFF2uyUxNkl8lmdLkhbmiDYlQCFMhdIkoNItC8+3mBmd72bF9vnD58p7Dx4HycYmIBLrYoxKF9FyUH6B83yI9D/GC9BbIxQLlL8h8n8vNa5z+0NHUJVIXSFOQS0Ho+0TeHH8+J/C8FxYs5nPmszfMZ7P/4c5mvLm9xVmNf1AfnzH7jzT9Z8z+mXxzIW8eycySpGhIitoSq+qX3dgdyeqaqiI3S5zq6QfbT//SfPhOOX4j3v+FGP5GNY/UTUPVLC1l3VBog9KGwpSWbPq0JMXzA9zpgiDAqVYlp/PA6TSwP+zZPmxoljV5nqOLAqO1Ta01QgjSJLFvUyZJTBxHBL5PEATc393hVG3LMF7Y9Se648Cm29O0W3IhKV5EUl67McbusqrsTtLUyqMoIgxDXNfFqTZr+vNbDsOJ3bGnO/TUqxYhpRVMTMJJNDGJfu5JlmUZSZJYqRU225bh7Wilk3DXD7QPHbkQKCVRStlTJ8HUJ0Ecx1Yy9TRN7Z7y/v6e/wCAo5yTnb1oLwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img5.png&quot;
        title=&quot;img5.png&quot;
        src=&quot;/dev-blog/static/3a0a676a38890618e577e23edff6c55a/f058b/img_5.png&quot;
        srcset=&quot;/dev-blog/static/3a0a676a38890618e577e23edff6c55a/c26ae/img_5.png 158w,
/dev-blog/static/3a0a676a38890618e577e23edff6c55a/6bdcf/img_5.png 315w,
/dev-blog/static/3a0a676a38890618e577e23edff6c55a/f058b/img_5.png 630w,
/dev-blog/static/3a0a676a38890618e577e23edff6c55a/40601/img_5.png 945w,
/dev-blog/static/3a0a676a38890618e577e23edff6c55a/78612/img_5.png 1260w,
/dev-blog/static/3a0a676a38890618e577e23edff6c55a/e8950/img_5.png 2000w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
위와 같이 실행된 쿼리 정보 파일을 보고 한 눈에 파악할 수 있게 되었습니다.&lt;/p&gt;
&lt;h2&gt;N+1 및 잘못된 쿼리 수정 결과&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/e8950/img_6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVQoz1WT2XKbQBBF+R1jRzAgYDYYCa0GsUiW7Th5SpX//xdOaka2Unk4dW8zcOnugqidJtpxYne+sJ0mNvPEdn9gWLeslcEWJXUlqUuJyjKkEChxU5mKf5oKTJ4T7c47uvcTH5+/6N9PbK8HjKqQWUGW56RJGhCpCJoskjvfdZokLJKEIkmI9pcDm7cTL5+/ef/zk+5jxFpNkxesjMUpQyNV8CttaaSmUTqoP3NKh+5NWVFnOdFx7uivE/vzwHHu2QwHSq1Z5ksyIcjSlCwVdxZPT/x4fLyz8Bo/8hTHgejQDfTPJ5S2SNuga0cpFfmyRPiRRUYqBGmWBZJU3PFnifjSrzran0b6+Uy9bjGNw7jVLTBfkiRp2I0n+MWC+OGBOI6J44cv4v+IduNMP19pjz1ud2TTDdh2R1U7dN2gjKVSmkprCqnCy0qlb0jFsqwoKnU7U5qoWG+x3YjrZqrNM6LekjY7ytUO5xxtu2HdtoHGOWxdB/UYYymrKoz76He7SIiMc3TjwPXtjcv1lXE+s39+xq3WSCmx1t4whrquKYuCsiypqorlchl8URTBCyGIlHMch4H55ZXejz/ObI8d1q1RStE0TQjy3quvPb57H/aNDwuBZrX6CrwynC+BbpyoV/8CjTFYe+uwri1KyXBNa30PzP0Xkaa3Dg+nE8N8oZ9mDv2JYz/QrNvwgA/xI3v1XXmVSoV1ePX3BC9l+LP+ApwjlhTywOdOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img.png&quot;
        title=&quot;img.png&quot;
        src=&quot;/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/f058b/img_6.png&quot;
        srcset=&quot;/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/c26ae/img_6.png 158w,
/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/6bdcf/img_6.png 315w,
/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/f058b/img_6.png 630w,
/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/40601/img_6.png 945w,
/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/78612/img_6.png 1260w,
/dev-blog/static/6f8766af49b829b0e7dd87471095fefb/e8950/img_6.png 2000w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
여기까지 어떻게 N+1 문제를 찾았는지에 대한 내용을 다뤄보았는데요.&lt;/p&gt;
&lt;p&gt;다음 글에는 공책 팀에서 n+1 문제, 예상치 못하게 발생한 잘못된 쿼리가 무엇이고 어떻게 해결했는지에 대해 다뤄보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;참고:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/resource/jdbc/spi/StatementInspector.html&quot;&gt;https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/resource/jdbc/spi/StatementInspector.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vladmihalcea.com/hibernate-statementinspector/&quot;&gt;https://vladmihalcea.com/hibernate-statementinspector/&lt;/a&gt;, &lt;a href=&quot;http://knes1.github.io/blog/2015/2015-07-08-counting-queries-per-request-with-hibernate-and-spring.html&quot;&gt;http://knes1.github.io/blog/2015/2015-07-08-counting-queries-per-request-with-hibernate-and-spring.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[합성 컴포넌트로 재사용성 높이기]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.
저희 팀은 우아한테크코스…]]></description><link>https://gong-check.github.io/dev-blog/FE/코카콜라/composition-component/composition-component/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/코카콜라/composition-component/composition-component/</guid><pubDate>Tue, 30 Aug 2022 22:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 체크리스트 애플리케이션을 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;프론트엔드 개발을 하다 보면 &lt;strong&gt;“어떻게 하면 컴포넌트의 재사용성을 높일 수 있을까?”&lt;/strong&gt; 에 대해 많이 고민하게 될 텐데요. 저희 프론트엔드 팀에서는 다양한 페이지에서 사용되는 &lt;strong&gt;공통의 도메인을 가지는 컴포넌트에&lt;/strong&gt; 대한 재사용성을 높이기 위해 &lt;strong&gt;Compound Component Pattern&lt;/strong&gt;을 적용했습니다. 또한 이런 과정에서 &lt;strong&gt;올바른 추상화&lt;/strong&gt;에 대해 다시 한번 생각하게 되었는데요. 이번 경험을 공유해 보고자 합니다!&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;1. 반복되는 컴포넌트를 마주한 순간&lt;/h1&gt;
&lt;p&gt;GongCheck 애플리케이션은 크게 두명의 사용자가 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;공간에 대한 체크리스트를 체크하는 &lt;code class=&quot;language-text&quot;&gt;일반 사용자&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;해당 공간을 생성하고 관리하는 &lt;code class=&quot;language-text&quot;&gt;관리자&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;아래 이미지들은 &lt;code class=&quot;language-text&quot;&gt;관리자 페이지들&lt;/code&gt;입니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/f98ee/spaceInfoCreateBox.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 86.70886075949367%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABtklEQVQ4y5WUWW/iMBRG+/9/FU8z88YTSeiMJlBBaUNIiLM53s7IZmkoiwZLnyxH957czX4BR1pBUoB1DqUdcoBB+d2F/ZG8zcEO6mbgpRrg56dg8v7BpgVnHP0FkLPTo/MZqC38ytb8yP7QKDB6HNnBWGkwlrCfnLX5Ol8AHbBpYNNVDLZHn50OhsZAWe5ZLN/YVwK/+q7j431JLcTFTwKwbRp8HU/rew09MMs+WS6XdF0XbIxWNHUZwFcp76uaqm4oqxqpzBE0AloPzFiv1wyDDNC+95kYnLuRshwGuq5HaR26PAb20oXYy6IgjiKSJGE+nxNFEWn6F2PsjS4LQVGWaGPuAvM8ZzabkSQHmAcvFultoGjakHIvFYO2SGWvgLs8D5DpdMpkMuH19Tdpegfoi+zr0rYt1ppjU9zNCH26XnEc34/Qua8O+26Pu3yuYVkQx1GoY3TUXWDAOBfE1dXzA+zCvBVFgVIqyHdZSvkYeCtCv/uxWa1WoWZ1LRBCYK0N1ta6Z4GHwfaQbLsl3+3YbnP6XgYfrZ+McHyX/d09afzKPB3h99fl9G2spyP8H3nbptX8A6xnKXsbi9UCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfoCreateBox&quot; title=&quot;spaceInfoCreateBox&quot; src=&quot;/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/f058b/spaceInfoCreateBox.png&quot; srcset=&quot;/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/c26ae/spaceInfoCreateBox.png 158w,
/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/6bdcf/spaceInfoCreateBox.png 315w,
/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/f058b/spaceInfoCreateBox.png 630w,
/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/40601/spaceInfoCreateBox.png 945w,
/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/78612/spaceInfoCreateBox.png 1260w,
/dev-blog/static/b426593fb299c57ac6733e3f6e5ccdd7/f98ee/spaceInfoCreateBox.png 1808w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;공간 정보 생성 페이지&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/565cc/spaceInfoDisplayBox.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC3klEQVQ4y32T3WsdRRjGz//ilVeK4I3+DV75JxQFr6x45ZWColiokAgVhEahV7XiV6jVYmKgtrEViggnNuWYk5Ck5+yec/Zjdnd2dr5+MnuyyUlSOvAw+87OPPO87/NODzw7OfRnYL1HG4/SoA00GurGYzTM6ojf429Zj7/nj9lNRFURxTPSaQJrq3DzOlUq6IkGNqOcjdGIw9IHfmRtEIVESo2xHmNgT1T00wF7xYBB8og8F0ynCZmQjB8PGW89Js0lPetgMx5xLx4gGk8Ys9mM7e1tRqNRG0ttWd0xPIzBazjce8Jwd5fhzn/EWcnPEfw0gd2kpue9J5YQ14LG1XgPaZoSxxHnhrdo46iVQoV6AEkDaSIg2kfKml5ZluDdfL+fQ0rJlSsrXF25wa1fN9hYW+efv/7EWodzkGY5qZif62fwsL8Pd29TSkUvEwVZUZLmgroxOA9VWfHGm+9x8d3LfPrZNZaXvmb1u1stobHuRHC4HX8cy1rR001DXUusNa28oEBrw53Nf7n7YMBvd7b5ZeMRf29FOBcMci3RnKzLak7cEkZpwZNpilCWQntsqGFW8sGlH/jq+n0uvv8NHy3dZuPeDsbY1vWOZBHHCvcSye6s4kAYDgpHbaEsKl569S2ee/ECz798gRdeeZvXXn8Hpeo2g7NkpwjDh6oltazwzra3h5Q//+IGH1+6yuWla3z4yQrLy1+itcZa/2zCdmGhyO6obSaT823j/LyG3d7F1E8p7Badm28ej8esra/T728dtcocfoFw0d2nEnabwlu2lrZWtnXc0SyiORNrhzNtYamqMwo7BVEUs79/0EKp5ijdk8bv0LXkVuL4cWg5TE8pPCEsioI8zxBCYIw5TvlpCK9lKi3D3JIU9emUwxxcDIQBSinC08yyrJ2rqiLPc5IkaeMOSpZYVVEW5XnCzuVwOMRN0zCZTLDW4qxD6pJUTRBNSqambRyMC/+DKf8D7A0Hc70luVEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfoDisplayBox&quot; title=&quot;spaceInfoDisplayBox&quot; src=&quot;/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/f058b/spaceInfoDisplayBox.png&quot; srcset=&quot;/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/c26ae/spaceInfoDisplayBox.png 158w,
/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/6bdcf/spaceInfoDisplayBox.png 315w,
/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/f058b/spaceInfoDisplayBox.png 630w,
/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/40601/spaceInfoDisplayBox.png 945w,
/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/78612/spaceInfoDisplayBox.png 1260w,
/dev-blog/static/0c396cd07348509d2b5f8f72101fb479/565cc/spaceInfoDisplayBox.png 1806w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;공간 정보 보기 페이지&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/a130084471917132c2a2cf16b814959a/24def/spaceInfoUpdateBox.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACO0lEQVQ4y5WUz2sTQRTH+z95EQRB0JOo9OJFPFQ86VGk4Emx+Ad4UVsUKSpRSvEkSiHWg7ZKETVY2oVSkk2pSZNskt3ZHzOz+5Gd3TQ/LXbgsSy8+bzve9+ZmYKEPQ8sB5IkQaqEMIJIpt/EfI+KNCfLA09IpjwJ6zXBp/06FTeGOCGIkgEgh5sG/4OoX3AIqGPYaOzzrWHhhBDrQWXZZqlMHZTGgJQEYtAK080QEMB2YddtE2ofpRiqnBZ0nDblso3jdNJ0GkJTtBWVToxWvY5yoO/7Wbl8jc5Qa2i1WlSrVXxfmBxXQamVUBMaJXv5OdBpd+m4gnbXJZQqB/WBaasprFT6bRR2uy6B1wWZCkkIwkzdIVBGEUEQIKUcc1kE2ihaWSkyc+02cw8e82ThJYvzT1l9/4E4nuByo+Pxp9nGizRBPvQoB/pBNoq1te/cvb/A/LN3vHpTZGl5lUKhiBChMWwIuNsU7DYE1a6m6iV0ggSZuiuzdtJl7dT4vFHm6489ni9tsP6zxmLhC07bNc6PuZwO2/M8Yq1Rqn9shJ+1/OL1R85Nz3H1xiPOTM8xe2+JW7MP8TwxrjCdmwmzdWSGOXD57SonTl3n7PmbXLp8h5OnZ7hw8Qpa6/EZHgKTcWDP5YODJr9KFjs7FbatMpubFnalMtkUgzkCmJ5D265gWdtEUcjg6gM5HrBer7O1tY1tV1E6RiltQuv4eMDeXU6d7N3lwYdi9NH4L4WTXpvROAbw34omKRS+4i9f9g5dOULZ4gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfoUpdateBox&quot; title=&quot;spaceInfoUpdateBox&quot; src=&quot;/dev-blog/static/a130084471917132c2a2cf16b814959a/f058b/spaceInfoUpdateBox.png&quot; srcset=&quot;/dev-blog/static/a130084471917132c2a2cf16b814959a/c26ae/spaceInfoUpdateBox.png 158w,
/dev-blog/static/a130084471917132c2a2cf16b814959a/6bdcf/spaceInfoUpdateBox.png 315w,
/dev-blog/static/a130084471917132c2a2cf16b814959a/f058b/spaceInfoUpdateBox.png 630w,
/dev-blog/static/a130084471917132c2a2cf16b814959a/40601/spaceInfoUpdateBox.png 945w,
/dev-blog/static/a130084471917132c2a2cf16b814959a/78612/spaceInfoUpdateBox.png 1260w,
/dev-blog/static/a130084471917132c2a2cf16b814959a/24def/spaceInfoUpdateBox.png 1812w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;공간 정보 수정 페이지&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;각 페이지에서 반복되는 컴포넌트가 있는데 혹시 눈치를 채셨나요?&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/a232921cf2824318105a32af136d3222/85053/spaceInfo.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACxklEQVQ4y1WT32/bVBTH/X8hhBDaJEDiTxmgSfAA4gFpD/x4bEfhYahSOzGE1k1atq6lqgBtLWmyNs6vJm6bhoYkS+zYjuPEvrbvB93rLRpHOrrH55z7ved8j49hVpu0rUtZMRsobZ6ecXB4xNl5l1K5wtj2EQksomypUfymLdUpX/mlsbF5Tx6f1Hj8ZJcHDwv88ecBG5v32Nnd19/DlxMNGEUZWSJfAUjiBGIB8ygjEZI0kVL5DSEyRmNHphlaZkGgT4kCSbBtFyFSvHnKhZMwV2Aiw3ZcnIlHlkr6XiK7k4RYSGl4nkevd4WUEqRkFriE4RwhJLY9Zjr19QMCuPAywijTDzjOmDiOdMxN4MrPiOMMw/d9/ul2cRyH8XhMEEwRSaYrtNoW97ceUzyqUDs5JvRsVCdJkvH06R6PCnuUyxVa5jFxGGhqjNlsRqPRoF6vU61W6XQuiBRBQKl0wo1PbrG69is/rm3Sap5rvwJcXV3ni69WubO+xU9rd7HalzpmBEFAu92mXC5jmqZuP45TXWGnO2Jnv8mDbZPCXgt7EpFlEMUpz4sW2/tNfitUuF8wMaudHFBVqKqr1fIKLy87ehhKnuwUefv6Td55/zPe/eBztneeab968MbNFd669invffQl1z78mN3f/8oB1QB6vR6j0YjBYKC5VBeUtK0u33z/Mys//MLXt9Y4PDxatrz1cI+V23dZ33jEt9/dxrLOckDXdRkM+sRxTCLE8oKa8nDYZzIZ86aoScYiZTj8lzAM/hdbRClGFAlc19c6X8T5JaEAwXFcrq76mgLFqfqzcsCM0cimP3ipOVX+nNsMo1o71StXrbU4OCzxd/EFs1AwX6Tar1az0bQoHh1TfmESxeBPF5RKFU4qdeoNi2fPi5y2zvXmGCro+XOd5Hqhtl/vqbKVToNomZOvXrrMzWMhwSzSsf8AoHG1A3B1K8YAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfo&quot; title=&quot;spaceInfo&quot; src=&quot;/dev-blog/static/a232921cf2824318105a32af136d3222/f058b/spaceInfo.png&quot; srcset=&quot;/dev-blog/static/a232921cf2824318105a32af136d3222/c26ae/spaceInfo.png 158w,
/dev-blog/static/a232921cf2824318105a32af136d3222/6bdcf/spaceInfo.png 315w,
/dev-blog/static/a232921cf2824318105a32af136d3222/f058b/spaceInfo.png 630w,
/dev-blog/static/a232921cf2824318105a32af136d3222/40601/spaceInfo.png 945w,
/dev-blog/static/a232921cf2824318105a32af136d3222/85053/spaceInfo.png 1225w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div align=&quot;center&quot;&gt;
    &lt;style&gt;
    .responsive-gif {
        max-width: 630px
    }
    @media (max-width: 400px) {
        .responsive-gif {
            max-width: 360px
        }
    }
    @media (max-width: 300px) {
        .responsive-gif {
            max-width: 300px
        }
    }
    .responsive-gif {
        padding: 10px;
    }
    &lt;/style&gt;
    &lt;img src=&quot;/dev-blog/72aa52dca512684e3677f779ca7ea1d7/spaceInfo.gif&quot; class=&quot;responsive-gif&quot;&gt;
    &lt;p&gt;다양한 기능을 가지는 공간 정보 컴포넌트&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;한눈에 보이듯이 반복되는 컴포넌트는 공간 정보 컴포넌트입니다. 어떻게 구현해볼 수 있을까요?&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;2. 최초 구현&lt;/h1&gt;
&lt;p&gt;공간 정보 컴포넌트를 최초 구현할 때 많이 고민했습니다. 공간 정보 컴포넌트를 사용하는 페이지에 따라 Type으로 분류한다면 크게 Create, Read, Update로 구분할 수 있습니다.&lt;/p&gt;
&lt;p&gt;공간 정보 컴포넌트는 각각의 페이지에서는 다음과 같은 기능과 요구사항을 가지고 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;공간 정보 생성 페이지
&lt;ul&gt;
&lt;li&gt;Create&lt;/li&gt;
&lt;li&gt;공간 이름 입력하기&lt;/li&gt;
&lt;li&gt;공간 이름이 입력되면 생성하기 버튼이 활성화 된다.
&lt;ul&gt;
&lt;li&gt;생성하기 버튼을 클릭하면 공간이 생성되고 공간 정보 보기 페이지로 이동한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;이미지 추가 및 수정하기
&lt;ul&gt;
&lt;li&gt;이미지 추가 유무에 따른 텍스트와 컴포넌트를 보여준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;공간 정보 보기 페이지
&lt;ul&gt;
&lt;li&gt;Read&lt;/li&gt;
&lt;li&gt;공간 정보 보기&lt;/li&gt;
&lt;li&gt;수정하기 버튼을 클릭하면 공간 수정 페이지로 이동한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;공간 정보 수정 페이지
&lt;ul&gt;
&lt;li&gt;Update&lt;/li&gt;
&lt;li&gt;기존의 공간 이름, 공간 이미지를 보여준다.&lt;/li&gt;
&lt;li&gt;공간 이름 수정하기&lt;/li&gt;
&lt;li&gt;공간 이름이 입력되면 수정완료 버튼이 활성화 된다.
&lt;ul&gt;
&lt;li&gt;수정완료 버튼을 클릭하면 공간 정보가 수정되고 공간 정보 보기 페이지로 이동한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;이미지 추가 및 수정하기
&lt;ul&gt;
&lt;li&gt;이미지 추가 유무에 따른 텍스트와 컴포넌트를 보여준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;공간 정보 컴포넌트의 하위 컴포넌트들을 Type에 따라 시각적으로 분리하면 다음과 같습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/7de21/spaceInfoGroup.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPElEQVQoz22TS2sUQRSF+xeJK9eSnQs3irpQouhW3UgUIagoiuIDRMhO0fhYiLhQk43BB5IQJmLEGZxE5xXTmUl3T89MP6a7q1+fVHUmZmHB4d6i6p46VfeUFkYZkcgoYr4jFrmEiMHqOmy0LbUmsa4b9AdD4gQVG00dfxijjYpGkJuDMEHEGUmSb0Uw3Zi6FZJlkKZQ6wqcEPIMnCCl2vEQCWgFQVaQRGmhTuYiI45z4iTH8wXNVodf9T+Ypo1hOtSbbX7XGgwGPvqGTa2xjq630WQxeU4KdAIUkXyCUcxzqOkGN6ffcO7GdV69fsrctyqTU885ffEslZUKj2bmmbjzgNv3r6EZ9oAvpTKzH+ZYWl5SBJEQZJkky5Cj/LPO4WOnOLJ3N8+m7vHk5QwH9+9jfGwXpcUS5y/f4sDYHq6eOY5WqTU4OXmXQyfGmX48pQgkmRy5ZAdMy2F5cYHyx7esrVbV9cvz76l8nsUye5S//6D86R2rXxfQqit1Ll2Y4MrRMWZePERSJEmqyCTSNFfd6zkBtivwgxR/KOh7MYMgZRgmOG5I14lwhgma7wdYpkGeRGRpumWLfxYScY7rRbTWNmi21un1Pey+h942aW9aaq3dsajXWximLbucqVNky2VH/2cjqXDgBAqy42ruBjheyDCQCoMthNKH+baaEYEQCWladLjwItg9H7PrqlzuMSwHx42UsV1P0NnsqXpt5y8ZQZpZqo0VWfFrpDLPj7YPlsqCsHgipdIL1fwvXNorpivIuXUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfoGroup&quot; title=&quot;spaceInfoGroup&quot; src=&quot;/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/f058b/spaceInfoGroup.png&quot; srcset=&quot;/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/c26ae/spaceInfoGroup.png 158w,
/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/6bdcf/spaceInfoGroup.png 315w,
/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/f058b/spaceInfoGroup.png 630w,
/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/40601/spaceInfoGroup.png 945w,
/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/78612/spaceInfoGroup.png 1260w,
/dev-blog/static/73ecefab7c8caa6d4e20739083150ea0/7de21/spaceInfoGroup.png 1839w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;간단해 보일 수도 있지만 실제 코드를 작성하다 보니 Type에 따른 이벤트 처리 및 상태 값에 따른 분기 처리가 복잡해졌습니다. 간략히 코드를 보면 다음과 같습니다.(부끄럽네요…)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// SpaceInfo 컴포넌트&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceInfoProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;read&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;create&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;update&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  inputText&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  data&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; imageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfoProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;read&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; inputText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; onChangeSpaceName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onClickEditSpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSpaceInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceInfo 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;공간 정보&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;read&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClickEditSpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;수정하기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;submit&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;create&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;생성하기&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;수정완료&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;공간 이름&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;read&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nameInput&quot;&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;data&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; readOnly &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input
                name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nameInput&quot;&lt;/span&gt;
                placeholder&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;이름을 입력하세요&quot;&lt;/span&gt;
                type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;
                defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;data&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; inputText &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChangeSpaceName&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                required
            &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;공간 정보 컴포넌트를 사용하는 페이지의 코드는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 공간 정보 생성 페이지&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceCreate&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; onSubmitCreateSpace &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSpaceForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceCreate 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form onSubmit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onSubmitCreateSpace&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; encType&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;create&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 공간 정보 보기 페이지&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;DashBoard&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    spaceData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useDashBoard&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*DashBoard 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;read&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;spaceData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위처럼 코드를 구현하다 보니 가독성이 떨어지고 유지보수하기 어려워졌습니다. 또한 공간 정보 생성, 수정 페이지에서는 button의 type이 ‘submit’인 반면에 보기 페이지에서는 ‘button’이기 때문에 공간 정보 컴포넌트를 사용하는 곳에서 form 태그로 감싸줘야 하는 경우가 발생했습니다.&lt;/p&gt;
&lt;p&gt;또한 코드를 작성하고 코드리뷰를 하는 과정에서 다음과 같은 의견이 나왔습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;코드를 이해하기 어렵다.&lt;/li&gt;
&lt;li&gt;공간 정보 컴포넌트를 사용하는 곳에서 어떻게 사용해야 할지 모르겠다.&lt;/li&gt;
&lt;li&gt;로직이 어떻게 되는지 알수가 없어 코드 분석을 하는 비용이 많이 든다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2-1. 왜? 이렇게 구현했나요?&lt;/h2&gt;
&lt;p&gt;SpaceInfo 컴포넌트가 상황에 따라 각기 다른 요소들을 제어해야 하므로 이런 문제가 나왔다는 생각이 드는데요. 그럼 CreateSpaceInfo, ReadSpaceInfo, UpdateSpaceInfo로 컴포넌트를 분리해서 사용하면 안 되나? 라는 생각이 들 수도 있습니다.&lt;/p&gt;
&lt;p&gt;하지만, 3가지 컴포넌트로 분리하자니 중복되는 코드들이 많이 생기는 문제점이 있었습니다. 또한 컴포넌트를 분리하면 독립된 환경이 되어 응집성이 떨어지므로 나중에는 완전히 다른 컴포넌트가 되어 &lt;strong&gt;컴포넌트 파편화가 발생하는 문제가 생깁니다.&lt;/strong&gt; (예를 들면 폰트, 컬러, width 등 디자인 요소가 제각각 변경될 상황이 있습니다.)&lt;/p&gt;
&lt;p&gt;결과적으로는 완전히 추상화가 잘못되었다는 것을 알 수 있었는데요. 이때 &lt;code class=&quot;language-text&quot;&gt;&quot;올바른 추상화가 무엇일까?&quot;&lt;/code&gt; 에 대해 다시 한번 생각하게 되었고 다음과 같이 생각을 정리했습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;올바른 추상화란? 다른 개발자가 컴포넌트를 사용처에서 선언적으로 사용할 수 있어야 한다. 컴포넌트가 어떤 로직을 수행하는지에 대해 명시적으로 알 수 있어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1&gt;3. 합성 컴포넌트 도입&lt;/h1&gt;
&lt;p&gt;합성 컴포넌트 패턴은 하나의 컴포넌트를 여러 가지 집합체로 분리한 뒤, 분리된 각 컴포넌트를 사용하는 쪽에서 조합해 사용하는 컴포넌트 패턴을 의미합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;select name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pets&quot;&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pet-select&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;option value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;Please choose an option&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;option&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;option value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;dog&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Dog&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;option&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;option value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;cat&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Cat&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;option&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;select&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;합성 컴포넌트 패턴의 예시로 위의 코드를 보시면 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;select&gt;&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;option&gt;&lt;/code&gt; 태그의 조합으로 이루어져 사용되는 것을 볼 수 있습니다. &lt;code class=&quot;language-text&quot;&gt;&amp;lt;select&gt;&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;option&gt;&lt;/code&gt;은 각각 독립적인 요소이고 큰 의미를 가지지는 않지만 사용하는 곳에서 요소들을 자유롭게 조합함으로써 화면에 의미 있는 요소로 표현됩니다.(&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/HTML/Element/select&quot;&gt;참고: select MDN&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;이처럼 사용하는 곳에서 컴포넌트의 조합을 활용할 수 있다면 높은 재사용성을 만족하면서 다양한 상황에 사용할 수 있다는 생각이 들어 도입해 보게 되었습니다. 앞에서 설명했던 최초 구현 시 구현했던 컴포넌트를 합성 컴포넌트로 어떻게 적용했는지 간략하게 설명해 보겠습니다.&lt;/p&gt;
&lt;h2&gt;3-1. 서브 컴포넌트 구현&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;option&gt;&lt;/code&gt; 태그에 해당하는 서브 컴포넌트를 구현합니다. 우선 SpaceInfo 컴포넌트가 가질 수 있는 하위 컴포넌트를 아래의 이미지처럼 SpaceInfoHeader, SpaceInfoImage, SpaceInfoInput으로 서브 컴포넌트를 분리했습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/b7877/spaceInfoSeparation.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 105.69620253164558%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACzUlEQVQ4y42UvU8UQRjG7w+xtbO0sNHKaGFjNDSo0cQODTFiQ6FWJsR/wAKiUWOhxkRjgV8IHN9CwAgqB4eI4mfUu727/ZjdmfmZmWEve8chTvJkZnfffeZ5P3OR0GyFMFIW5ux5AV4lpFz2+fW7QqnsU/Z8qjXRYJtLD/9CImHhbYH8yARTU7Pk8xOMT8zwcnCED6vr9nud8F8KHZxCEWuqtZAgjFEaEqlJEoW0+4ZHQm+tMNiAe9YIIfG8GkEQobVGaW13e1bu4rrLm2OmQCpkrBriKGKs0qxtM3JxrPGDiGo1tC5opahEkvxnwXJJIhNtFZrgB6G0qFQju2dDkiIXJ1Cr+VQqPunSQNGHrwHEQtqgv5l/z+DQCKNjUwwNjzE4NMqTpwOUvcAqTz3LSQWlUoXBgTzDA8OMT84wMz3NyMt+/vz8YjwnCJUNvImh70f2XZwohEhcUmQmhlrBys/v9Nx6Qd/tx1x/NMTprk6OHN3D6OhTq7gWJCgFvh8ghKB5mcSkcc0Z/15/LNJ94x6X+u7Qc/c+HRe7uHS5g+m5cfuDH0irIkuQwiyX5ZQQmByf4lTHBQ61n+Ng2xmOt5/gwN7d9D/ZUOg717IkDYS6iXBs7BVtJ8/TefIwZ/fvonPfDo7tzNH/6GEDYbO6lgrNq8+rq9y5eYvnD3p5dq2b/t4r3L3aReHdvP0hCGSdsNVqiKEpGxPsPyWPRG02dtlz7WWUtILMZllK8CpVCssfWFwqEoYBaIWSib3ZdIYhdJ0g68VtkO2yemFHkasx6bqNODEkingD6c2muM1QMNC43dhvar36MAgdWvWn6YT19R8sF9cs3i8WKSytsvbp26a+3nZ8GaNYQnFljdnZN3YuLiwsMvd6nsLSCiYHrp+d+9sO2JTULCFihGFoynBD2fzPgHVZVnZs2PpTCq1V68LenlBnsulcE5lvouniv/rAN1zRs7xtAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;spaceInfoSeparation&quot; title=&quot;spaceInfoSeparation&quot; src=&quot;/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/f058b/spaceInfoSeparation.png&quot; srcset=&quot;/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/c26ae/spaceInfoSeparation.png 158w,
/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/6bdcf/spaceInfoSeparation.png 315w,
/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/f058b/spaceInfoSeparation.png 630w,
/dev-blog/static/1d74c614c55d2999c4a634b61b5e3314/b7877/spaceInfoSeparation.png 891w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;위의 이미지처럼 서브 컴포넌트로 분리했고 추가로 공간 이름을 보여주는 SpaceNameText 컴포넌트를 서브로 분리했습니다. SpaceInfo 컴포넌트의 구성요소가 될 수 있는 부분들을 서브 컴포넌트로 분류했고 사용하는 곳에서 서브 컴포넌트의 조합과 children으로 유연하게 SpaceInfo 컴포넌트를 구현할 수 있게 했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceInfoHeaderProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReactNode&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceNameTextProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReactNode&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceInfoHeader&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfoHeaderProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceInfoHeader 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceNameText&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceNameTextProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceNameText 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ... SpaceInfo 서브 컴포넌트&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3-2. 메인 컴포넌트 구현&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;select&gt;&lt;/code&gt; 태그에 해당하는 메인 컴포넌트를 구현합니다. SpaceInfo의 서브 컴포넌트들을 유연하게 묶어서 화면에 보여주는 Wrapper의 성격을 가지고 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceInfoMainProps&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReactNode&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceInfoMain&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FC&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfoMainProps&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceInfoMain 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3-3. 메인 &amp;#x26; 서브 컴포넌트를 묶어서 export&lt;/h2&gt;
&lt;p&gt;구현한 메인, 서브 컴포넌트를 묶어서 export 합니다. 사용하는 곳에서는 다음과 같이 간단하게 사용할 수 있습니다. 이렇게 구현하면 같은 도메인끼리 컴포넌트가 응집되어 사용됨으로써 가독성에 도움이 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SpaceInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SpaceInfoMain&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; SpaceInfoHeader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;ImageBox&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; SpaceInfoImage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;InputBox&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; SpaceInfoInput&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;nameText&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; SpaceNameText&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Usage&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;생성하기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3-4. 완성된 합성 컴포넌트를 사용해 화면 구현&lt;/h2&gt;
&lt;p&gt;다양한 사용처에서 합성 컴포넌트로 유연하게 화면을 구현할 수 있습니다. 이렇게 구현함으로써 코드를 직관적으로 확인이 가능해 가독성이 좋아졌고 유연하게 서브 컴포넌트를 추가할 수 있어 다양한 요구사항에 쉽게 반영할 수 있습니다.&lt;/p&gt;
&lt;p&gt;또한 합성 컴포넌트를 활용해 SpaceInfoCreateBox, SpaceInfoDisplayBox, SpaceInfoUpdateBox로 컴포넌트를 추상화 시켜 명시적인 컴포넌트를 구현했습니다. 최초 구현 시에는 이렇게 컴포넌트를 분리하면 &lt;strong&gt;컴포넌트 파편화&lt;/strong&gt;가 발생한다고 했는데 합성 컴포넌트로 사용되는 컴포넌트를 &lt;strong&gt;한 곳에서 제어하고 응집시킴으로써&lt;/strong&gt; 고려했던 문제를 해결했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 공간 정보 생성 컴포넌트&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceInfoCreateBox&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; isActiveSubmit&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onSubmitCreateSpace&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onChangeSpaceName &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSpaceCreateForm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; imageUrl&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onChangeImage &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form onSubmit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onSubmitCreateSpace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; imageUrl&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; encType&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;multipart/form-data&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;submit&quot;&lt;/span&gt; css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;isActive&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; isActiveSubmit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            생성하기
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;header&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ImageBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ImageBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ImageBox&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;changeBox imageUrl&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;imageUrl&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; onChangeImage&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChangeImage&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ImageBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ImageBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* 유연하게 여기저기에 서브 컴포넌트 or Element를 추가해서 
        SpaceInfo컴포넌트를 수정 하지 않고 구현할 수 있습니다. */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;InputBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input
            css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nameInput&quot;&lt;/span&gt;
            placeholder&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;이름을 입력하세요.&quot;&lt;/span&gt;
            type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;
            maxLength&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onChangeSpaceName&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            required
          &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;InputBox&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SpaceInfo&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 공간 정보 생성 페이지&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;SpaceCreate&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;FC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div css&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*SpaceCreate 스타일*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* 공간 정보 생성 컴포넌트 */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SpaceInfoCreateBox &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;h1&gt;4. 마치면서&lt;/h1&gt;
&lt;p&gt;요구사항이 복잡하고 다양한 상황을 고려해야 했던 컴포넌트를 재사용하기 위해 많이 고민했는데 합성 컴포넌트를 도입하면서 고민했던 문제를 해결할 수 있어 좋았습니다.&lt;/p&gt;
&lt;p&gt;하지만 합성 컴포넌트가 만능이라고는 말할 수 없습니다. 단순히 render prop 패턴으로 props를 공유해서 구현하는 방식이 좀 더 직관적으로 코드를 구현할 수 있습니다. 개발할 때 요구사항에 따라 적절하게 합성 컴포넌트를 도입해보면 좋을 것 같습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;고민 끝에 구현된 결과물은 &lt;a href=&quot;https://gongcheck.day/&quot;&gt;공책 사이트&lt;/a&gt;에서 경험 하실 수 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1&gt;5. 참고&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://fe-developers.kakaoent.com/2022/220731-composition-component/&quot;&gt;https://fe-developers.kakaoent.com/2022/220731-composition-component/&lt;/a&gt;
&lt;a href=&quot;https://jbee.io/web/components-should-be-flexible/&quot;&gt;https://jbee.io/web/components-should-be-flexible/&lt;/a&gt;
&lt;a href=&quot;https://wishket.tistory.com/12&quot;&gt;https://wishket.tistory.com/12&lt;/a&gt;
&lt;a href=&quot;https://kentcdodds.com/blog/compound-components-with-react-hooks&quot;&gt;https://kentcdodds.com/blog/compound-components-with-react-hooks&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[테스트코드 개선 - 2. 테스트 상황에서의 정확한 격리]]></title><description><![CDATA[…]]></description><link>https://gong-check.github.io/dev-blog/BE/오리/supportrepository/supportrespository/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/오리/supportrepository/supportrespository/</guid><pubDate>Sun, 14 Aug 2022 20:55:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 오리입니다.&lt;/p&gt;
&lt;p&gt;지난번에 이어서 테스트코드에 대한 개선기를 이야기하려고합니다.
이번에 이야기할 주제는 “얼마나 실제 환경과 동일한 환경에서 테스트하고 있는가?”입니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;지금까지 잘 테스트하고 계신가요?&lt;/h2&gt;
&lt;h3&gt;Context을 위한 많은 repository&lt;/h3&gt;
&lt;p&gt;저희 팀에서는 테스트에 대한 Context를 설정하기 위해서 많은 데이터가 필요합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Host&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Space&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Section&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;Job&lt;/code&gt;이 연결되어있기 때문에 &lt;code class=&quot;language-text&quot;&gt;Job&lt;/code&gt;을 위한 테스트를 진행한다라고하면 모든 데이터값이 세팅되어야하죠. 그래서 이전 테스트코드에서는 다음과 같은 풍경을 볼 수 있어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HostRepository&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceRepository&lt;/span&gt; spaceRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionRepository&lt;/span&gt; sectionRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JobRepository&lt;/span&gt; jobRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;너무 난잡하지 않나요? 제가 테스트하고자하는 클래스는 &lt;code class=&quot;language-text&quot;&gt;JobService&lt;/code&gt;뿐인데 너무 많은 dependency를 주입받아야 해요. 무얼 테스트하는지 불투명해지는 거죠.&lt;/p&gt;
&lt;p&gt;그렇다고 &lt;code class=&quot;language-text&quot;&gt;@Sql&lt;/code&gt;을 사용하자니 지금 테스트에 사용하고자하는 각각의 테스트 Context에 대해서 명확해야하는데 sql 파일을 일일히 찾아가야하거나 너무 많은 상황에 대한 sql 파일이 생겨 문제가 발생합니다.&lt;/p&gt;
&lt;h3&gt;쿼리의 문제&lt;/h3&gt;
&lt;p&gt;보통 &lt;code class=&quot;language-text&quot;&gt;@Service&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;@Respository&lt;/code&gt;를 테스트한다라고 했을 때 저희는 “테스트 격리”를 많이 생각하고는합니다.
대표적인 방법으로는 아래와 같이 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 다는 것이겠죠. (&lt;code class=&quot;language-text&quot;&gt;@DataJpaTest&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 같이 사용하고 있구요.)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HostServiceTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 테스트 클래스단에 달고나면 하위에 잡혀있는 모든 테스트들이 돌아간 이후 rollback을 통해서 다른 테스트에 영향을 미치지 않게 됩니다. 잘못된 방법이라기보다는 대표적으로 사용하는 방법이고 큰 문제가 발생하는 케이스는 잘 없습니다.&lt;/p&gt;
&lt;p&gt;근데 문제는 Jpa를 사용하게된다면 다른 위치에서 발생합니다. “영속성” 때문이죠. 다음 예시를 한번 볼까요?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; findSpaces_메서드는 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; 존재하는_Host의_id를_입력받은_경우 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; host&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt; expected&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1234L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;잠실 캠퍼스&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;선릉 캠퍼스&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;양평같은방&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; spaces &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; spaceRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;space_1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space_3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            expected &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spaces&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 해당_Host가_소유한_Space를_응답으로_반환한다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; spaceService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;usingRecursiveFieldByFieldElementComparator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 테스트는 보유한 &lt;code class=&quot;language-text&quot;&gt;Spaces&lt;/code&gt;를 찾는 기능을 테스트하고 있습니다. 테스트 시에 원하는 테스트값이 들어갔는지 확인을 하기 위해서 &lt;code class=&quot;language-text&quot;&gt;setUp&lt;/code&gt;에서는 데이터를 미리 넣는 것을 볼 수 있어요.&lt;/p&gt;
&lt;p&gt;뭐가 문제일까?라는 생각을 하게 되지만 실제로 쿼리가 어떻게 날아갈까요? (아래는 실제 날아간 테스트코드에 대해서 정리한 쿼리문입니다.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;setup 메소드 시작&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;host save 메소드로 인한 insert문 1개&lt;/li&gt;
&lt;li&gt;space saveAll 메소드로 인한 insert문 3개&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;setup 메소드 끝&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;테스트 메소드 시작&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;테스트 메소드 끝&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이제는 큰 문제가 보이시나요? 저희가 테스트할 &lt;code class=&quot;language-text&quot;&gt;findSpaces()&lt;/code&gt; 메소드가 쿼리가 실제로 날아가지 않습니다. setup에서 날아간 메소드들에 의해서 영속성 컨텍스트들에 해당 값이 들어가기 때문에 같은 영속성 컨텍스트안에 머물고 있던 테스트 메소드에서도 공유하고 있는거죠. 그래서 &lt;code class=&quot;language-text&quot;&gt;findSpaces()&lt;/code&gt;에서는 쿼리가 날아가지 않습니다.&lt;/p&gt;
&lt;p&gt;여기서 하나의 의문을 가지게 될 수 밖에 없습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;테스트는 격리도 물론 중요하지만 최대한 실제 상황에 맞추어서 테스트하는 것이 중요하다.
findSpaces()라는 테스트할 행위에 대해서 결과물도 중요하지만 그 과정에서 쿼리가 어떻게 실제로 날아가는지 테스트하는 것도 목적이다.&lt;/p&gt;
&lt;p&gt;하지만 영속성 컨텍스트로 인하여 “실제” 상황을 대변하지는 못한다. 과연 테스트 상황에 대한 격리가 제대로 되었다고 말할 수 있을까?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그래서 저희 팀에서는 이를 해결하고자 하나의 특수 클래스를 통해 Context를 설정하는 방향을 잡아보려했어요.&lt;/p&gt;
&lt;h2&gt;테스트 시 실제 상황을 위한 SupportRepository&lt;/h2&gt;
&lt;p&gt;거두절미하게 먼저 코드부터 보고 이야기를 하겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SupportRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EntityManager&lt;/span&gt; entityManager&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;persist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; entity&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; entities&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; entity &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; entities&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entity&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; entities&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사실 거창하게 이야기했지만 해결책은 간단합니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;save하는 메소드 실행 후 영속성 컨텍스트를 비운다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;지금 발생한 문제는 “하나의” Transaction안에서 JpaRepository를 상속받은 메소드들을 사용했기 때문에 하나의 영속성 컨텍스트를 공유한다라는 문제가 있어요.
이를 해결하고자 한다면, save메소드 동작 시 flush와 clear를 동시에 진행해주는 거죠. db에 반영함으로써 테스트 데이터는 넣고, clear를 바로해주면서 영속성 컨텍스트로 다음 테스트들이 영향받는것을 막아줍니다.&lt;/p&gt;
&lt;p&gt;다만 여러개의 &lt;code class=&quot;language-text&quot;&gt;JpaRepository&lt;/code&gt;를 주입받고있는 상태에서 어떤 타입의 Entity를 주입받을 수는 없으니 &lt;code class=&quot;language-text&quot;&gt;EntityManager&lt;/code&gt;를 사용하여 persist-flush-clear를 동시에 해주는 방식으로 진행해주었습니다.&lt;/p&gt;
&lt;p&gt;또한 이로인해 테스트코드에서 수많은 repository를 &lt;code class=&quot;language-text&quot;&gt;@Autowired&lt;/code&gt;하고 있다면 &lt;code class=&quot;language-text&quot;&gt;SupportRepository&lt;/code&gt;만 두어서 대체할 수도 있는거죠.&lt;/p&gt;
&lt;p&gt;개선한 이후에는 아래와 같이 명확하게, 그리고 필요한 객체만 주입받도록 변경할 수 있었어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpaceService&lt;/span&gt; spaceService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Autowired&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SupportRepository&lt;/span&gt; repository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; findSpaces_메서드는 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; 존재하는_Host의_id를_입력받은_경우 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; host&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt; expected&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; repository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1234L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;잠실 캠퍼스&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;선릉 캠퍼스&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space_3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;양평같은방&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; spaces &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; repository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;space_1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space_3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            expected &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spaces&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 해당_Host가_소유한_Space를_응답으로_반환한다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;SpacesResponse&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; spaceService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;usingRecursiveFieldByFieldElementComparator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpaces&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;조금 더 확실하게 분리하기&lt;/h2&gt;
&lt;p&gt;위와 같은 방법으로 인해서 잘 격리하고있다라고 생각했던 테스트에서 영속성 컨텍스트에 대한 문제까지 격리를 할 수 있었어요.&lt;/p&gt;
&lt;p&gt;다만 적용을 하다보니 “실제 상황”에 테스트를 하기위한 고민을 더 하게 되었습니다. 아직까지도 격리가 잘 되고있는 것인가에 대해서 말이죠.&lt;/p&gt;
&lt;p&gt;일단 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 통해서 현재 테스트 메소드가 다음 테스트에 대해서 영향을 미치는 문제에 대해서는 막고 있다라고 생각했어요. setUp과 테스트메소드 모두 현재 테스트가 종료되면 롤백되거든요.&lt;/p&gt;
&lt;p&gt;다만 검증의 이야기를 하면 조금 달라져요. 아래의 케이스를 보겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Job&lt;/span&gt;과_관련된_Section_Task_RunningTask를_함께_삭제한다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    jobService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeJob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; job&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jobRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;job&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sectionRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;taskRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;runningTaskRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;runningTask&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTaskId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트를 하기 위해서 &lt;code class=&quot;language-text&quot;&gt;removeJob&lt;/code&gt;를 실행하고 실제로 실행되어있는지 find해서 비어있음을 확인하는 테스트입니다.&lt;/p&gt;
&lt;p&gt;문제는 이 코드가 왜 &lt;code class=&quot;language-text&quot;&gt;flush&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;clear&lt;/code&gt;를 동작시켰을까요? 그건 &lt;code class=&quot;language-text&quot;&gt;removeJob&lt;/code&gt;안에 있는 &lt;code class=&quot;language-text&quot;&gt;deleteAllInBatch&lt;/code&gt; 때문입니다. 이문제에 대해서는 상세하게 다루지는 않고 간단하게 이야기드리면 &lt;code class=&quot;language-text&quot;&gt;deleteAllInBatch&lt;/code&gt;는 모든 삭제를 batch로 올리기는 하지만 영속성 컨텍스트에서 삭제된 entity는 반영되지 않습니다. (조금 이상한 구조라고 생각합니다.)&lt;/p&gt;
&lt;p&gt;그럼 이제 무엇이 문제인지 보이나요?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;테스트하고자하는 테스트가 검증하는 메소드에 영향이 갈 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그래서 &lt;code class=&quot;language-text&quot;&gt;removeJob&lt;/code&gt;이 다른 검증 메소드에 영향이 끼치지않게 하기 위해서 임의로 entityManager를 호출하고 있는거죠.&lt;/p&gt;
&lt;p&gt;이와 같은 동작을 하는 테스트코드들이 여러개 있었고 모든 테스트에 대해서 flush clear를 호출하기는 번거로웠고 그렇다고 특정 문제되는 코드에 대해서 신경쓰기도 힘들었어요.&lt;/p&gt;
&lt;p&gt;그럼 문제 해결책은 다시 돌아와서 “실제 상황”을 더 명확하게 만드는 것에 있습니다.&lt;/p&gt;
&lt;p&gt;테스트하고자하는 메소드인 &lt;code class=&quot;language-text&quot;&gt;removeJob&lt;/code&gt;에 대해서 본인의 트랜잭션만 부여하고 commit하게끔하면 영속성 컨텍스트를 공유하는 등과 같이 다른 테스트에 영향을 끼치지 않는거죠.&lt;/p&gt;
&lt;p&gt;따라서 테스트 격리를 위해서 클래스단에 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 사용하고 있는 것조차도 문제가 되기 때문에 해당 어노테이션을 지우는 방향으로 도달하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Target&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ElementType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TYPE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Retention&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RetentionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RUNTIME&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@ExtendWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DatabaseCleanerExtension&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApplicationTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;DatabaseCleanerExtension&lt;/code&gt;은 저희가 만든 extension으로 &lt;code class=&quot;language-text&quot;&gt;afterEach&lt;/code&gt;로 데이터베이스를 초기화해준다라고 보면 돼요. 해당 어노테이션을 사용하면 &lt;code class=&quot;language-text&quot;&gt;@Transactional&lt;/code&gt;을 함께 사용했을 때와는 다르게 동작하는 “테스트할 행위”가 독립된 트랜잭션으로 돌아가기 때문에 이제는 진짜로 실제 상황과 동일하게 테스트 상황을 만들어줄 수 있게 됩니다.&lt;/p&gt;
&lt;h2&gt;추가적인 유틸 메소드&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Context을 위한 많은 repository&lt;/code&gt;에서도 이야기를 하였지만 사실 &lt;code class=&quot;language-text&quot;&gt;SupportRepository&lt;/code&gt;를 추가한다고 많이 사라지지는 않습니다. 검증을 위한 수많은 &lt;code class=&quot;language-text&quot;&gt;findBy&lt;/code&gt;메소드들 때문이죠.&lt;/p&gt;
&lt;p&gt;검증을 하기 위해서 찾게 되는 repository들을 주입하는 것도 귀찮지만 &lt;code class=&quot;language-text&quot;&gt;findBy&lt;/code&gt;로 반화되는 Optional을 처리하기도 사실 귀찮습니다.&lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;SupportRepository&lt;/code&gt;에서는 아래와 같은 기능도 제공하고 있어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; entityClass&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofNullable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityClass&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; entityClass&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ofNullable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;entityClass&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EntityNotFoundExcpetion&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EntityNotFoundExcpetion&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EntityNotFoundExcpetion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Entity를 찾을 수 없습니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이전과 동일하게 entityManager를 통해서 찾을 수 있도록 편하게 제공하는거죠. 해당 메소드로 인해서 저희 팀에서는 무수한 repository들을 제거하고 편하게 테스트할 수 있게 되었습니다.&lt;/p&gt;
&lt;h2&gt;한계는 존재합니다.&lt;/h2&gt;
&lt;p&gt;지금까지 말하고 한계가 존재한다라고하니 웃기기는 하지만 결국 이렇게 repository를 줄이고도 검증단계에서 복잡한 쿼리가 필요하다라면 그때는 repository들이 필요하게 되거든요.&lt;/p&gt;
&lt;p&gt;해결책이라고하면 테스트를 위한 동적 쿼리를 만들어주는 메소드를 만들거나(좀 하드하네요), querydsl을 사용하는거죠(러닝커브가 있습니다).&lt;/p&gt;
&lt;p&gt;팀내에서는 지금까지의 방법만으로도 충분하기 때문에 학습에 필요한 러닝커브를 따지기보다는 지금의 구조로 두었지만 검증에 대한 불편함이 있다면 더 도전해보는 것도 좋은 방법일 것 같습니다.&lt;/p&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://cheese10yun.github.io/jpa-test-support/&quot;&gt;https://cheese10yun.github.io/jpa-test-support/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://dev-gorany.tistory.com/348&quot;&gt;https://dev-gorany.tistory.com/348&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[테스트코드 개선 - 1. DCI 패턴]]></title><description><![CDATA[안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 오리입니다. 저희 팀은 테스트코드에 대해서 중요하게 생각하고 있고 이를 항상 개선해나가려고 노력하고 있는데요.
그 중 첫번째로 DCI…]]></description><link>https://gong-check.github.io/dev-blog/BE/오리/dci/dci/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/오리/dci/dci/</guid><pubDate>Sun, 07 Aug 2022 18:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 오리입니다.&lt;/p&gt;
&lt;p&gt;저희 팀은 테스트코드에 대해서 중요하게 생각하고 있고 이를 항상 개선해나가려고 노력하고 있는데요.
그 중 첫번째로 DCI 패턴을 적용하여 테스트코드를 개선해나간 이야기를 해볼까 합니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;이전 테스트 코드의 문제점&lt;/h2&gt;
&lt;p&gt;지금까지는 사실 팀원들 각자의 테스트코드에 대한 생각이 달랐고, 여러가지의 테스트코드가 작성되었습니다.
그 중 몇가지 예를 가져왔어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 다른_Host의_Space의_Job_목록을_조회할_경우_예외를_던진다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; host1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1234L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; host2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2345L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; spaceRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;잠실&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThatThrownBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; jobService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findJobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isInstanceOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;존재하지 않는 공간입니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;가장 많이 볼 수 있었던 유형의 테스트코드에요. 테스트 메소드 하나가 모든 테스트코드를 담고 있는 코드죠.&lt;/p&gt;
&lt;p&gt;지금과 같이 짧은 테스트코드의 경우 테스트를 진행하기 위해 어떤 값을 필요로 했는지, 어떤 행위를 테스트하고자하는지 눈에 잘 보이기도 하는데요. 문제는 테스트코드가 길어지면 길어질수록 하나의 테스트코드를  바라보았을 때 어떻게 값을 세팅했는지, 어떤 행위를 테스트하고자하는지 읽기 힘들어지는 경우가 많아집니다.&lt;/p&gt;
&lt;p&gt;이를 위해서 setup 메소드를 두기에도 다른 테스트코드와 중복되지 않은 코드에 대해서는 setup을 하지 못하기 때문에 해결책이 되지는 않습니다. 값을 세팅하기 위한 메소드를 만들기에도 어떻게 값을 세팅하였는지 테스트가 길면 가독성에 이상이오기는 마찬가지였어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Job&lt;/span&gt;을_수정한다 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; host&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Space&lt;/span&gt; space&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TaskCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; tasks&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;JobCreateRequest&lt;/span&gt; jobCreateRequest&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; savedJobId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1234L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        space &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; spaceRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Space_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;잠실&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        tasks &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TaskCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;책상 닦기&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TaskCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;칠판 닦기&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        sections &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;대강의실&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tasks&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        jobCreateRequest &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JobCreateRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;청소&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        savedJobId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jobService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createJob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; space&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; jobCreateRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 기존의_존재하는_Job을_삭제한_후_새로운_Job을_생성하여_수정한다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; updateJobId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jobService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;updateJob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; savedJobId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; jobCreateRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;updateJobId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNotNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그래서 개선해서 나온 테스트코드입니다.&lt;/p&gt;
&lt;p&gt;어떠한 테스트하고자하는 메소드에 대해서 &lt;code class=&quot;language-text&quot;&gt;@Nested&lt;/code&gt; 로 묶고 해당 메소드가 사용하는 값에 대해서 setUp으로 공통된 부분을 최대한 처리하는거죠.&lt;/p&gt;
&lt;p&gt;해당 방법도 문제가 있기는 마찬가지였어요. 각각의 테스트코드가 필요로 하는 setUp 값이 다른 경우가 많았거든요. 테스트마다 상황은 항상 다르게 일어나니까요. 그리고 구체적인 작성 패턴이 없다보니 팀 내부에서 받아들이는데 시간이 오래걸려서 테스트코드에 대한 일관성이 많이 깨졌습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;새로운 테스트 방법을 찾는 과정&lt;/h2&gt;
&lt;p&gt;이러한 테스트코드에 대한 문제점을 해결하고자 다음과 같은 기준하에 여러 방법을 찾아봤어요.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;팀에서 공통적으로 학습하고 통일성있게 작성할 수 있는 작성 패턴을 찾는다&lt;/li&gt;
&lt;li&gt;테스트 코드는 처음보는 사람이 무엇을 테스트하고자하는지 알 수 있을만큼 가독성이 높아야 한다.&lt;/li&gt;
&lt;li&gt;실패한 테스트에 대해서 어떤 테스트가 실패했는지 찾기 쉬워야 한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;다양한 테스트 개발론이 있지만 기본으로 위와 같은 기준점으로 잡고 갔기 때문에 BDD 개발론을 충실히 수행할 수 있는 패턴이었으면 좋겠다라는 생각을 했어요.&lt;/p&gt;
&lt;p&gt;팀원 모두 일단 BDD방법론 중 given-when-then 패턴에 대해서 익숙하기 때문에 도입에 있어서 큰 어색함이 없을 것이라 생각했거든요. 테스트에 대한 행위를 중심으로 테스트코드를 작성하면 위의 3가지 목적에 부합한다라는 생각도 했구요.&lt;/p&gt;
&lt;p&gt;다만 given-when-then의 방법을 그대로 사용하기에는 문제가 있었습니다. given-when-then이 물론 좋은 방법이기는 했지만 결국 처음 이야기했던 테스트가 given-when-then 패턴을 따라가고 있었기 때문이에요. 상황에 대한 시나리오도 좋지만 테스트의 주 행동에 대해서 더 구체적이고 분리하면서 테스트를 작성하고 싶었거든요. 그래서 해당 패턴을 사용한다고 해도 지금의 문제를 크게 해결해줄 것 같지는 않았습니다.&lt;/p&gt;
&lt;p&gt;그래서 더 좋은 방법이 없을까라고 찾아보다가 DCI 패턴을 알게되었어요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;DCI 패턴&lt;/h2&gt;
&lt;p&gt;Describe-Context-It 패턴은 정확하게 하나의 테스트 메소드에 대한 행위를 검증하는데 있어요. 테스트할 대상을 두고(&lt;code class=&quot;language-text&quot;&gt;Describe&lt;/code&gt;) 대상이 실제로 놓이게 되는 상황을 설정하고(&lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt;) 대상을 실행하고 검증하죠(&lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;given-when-then과는 다르게 시나리오적인 요소보다는 실제 테스트할 대상에 대해서 두고 분리하기 때문에 조금 더 가독성있을 것 같다라는 생각을 했어요.
또한 작성법을 타 언어와 같이 DCI를 제공하지는 않지만(kotest 등) &lt;code class=&quot;language-text&quot;&gt;@Nested&lt;/code&gt;를 사용하여 각각의 계층에 대해서 분리함으로써 원하는 부분에 대해서 쉽게 제어가 가능할것이라고 생각했구요.&lt;/p&gt;
&lt;p&gt;그럼 실제로 적용하면서 DCI 패턴에 대해서 이야기를 이어나가겠습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;DCI 패턴 적용&lt;/h2&gt;
&lt;p&gt;일단 팀 내에서 공통적으로 사용할 테스트 작성법이 필요했기 때문에 DCI 패턴을 사용할 때도 저희의 기준을 정하기로 했어요.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Describe&lt;/code&gt; : 테스트할 대상을 display
&lt;ul&gt;
&lt;li&gt;테스트할 메소드를 명시한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt; : 테스트할 대상이 실제로 놓이게 되는 상황을 설정
&lt;ul&gt;
&lt;li&gt;테스트 대상을 실행하기 전 입력값으로 놓이는 값, 대상이 놓이게 되는 환경을 구성한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt; : 테스트 대상을 실행하고 검증
&lt;ul&gt;
&lt;li&gt;테스트할 메소드를 실행한다.&lt;/li&gt;
&lt;li&gt;테스트할 메소드를 검증한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;각각의 구조에 대해서는 &lt;code class=&quot;language-text&quot;&gt;@Nested&lt;/code&gt;를 통해서 계층으로 분리를 진행하였는데요. 이렇게 구분된 상황들을 실제로 테스트를 돌려보면 아래와 같은 모습을 볼 수 있습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 353px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/fc9e968cbfcfcabd746c4d2c16237cc2/6c115/1.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrElEQVQoz32S6XajMAyF81ZNQzCYJWExxpidkPb0/R/i9kiu08m0Mz90ZBnzSVfSIRASIskQXTNkbYHOThiWFXac0NoBph9Ra4NCaefrBum1xEsQ4ngWCCLJdhIx+wMfhMRZJgjzBBddYdvf0U8Lw7phgrY9+2Fese53/natFSptGORhDPymJwwN8ghVp/lnb6YfYKeZIWXTolDNl+n/Ad1FICUyXWBab5jWDXacWT5VeKlqfhOnOc5xwrJ/SPYBPRBZiqhOMC4bw5TpGEjSKV73N+6rgyu8hhH+LuhA/TtF8aP0YyhwuoYs1fVtYSjBSCJBvHnYE5CCME4f1Rk7MmC57dz8fl546m0/QHe9m34/oFQaL79N2QehTBHlGWSTYb9/YNpuXCEZSSfvE5F8F0/fvf+XZDqLKmHJ2/0dM4FHJz25FJyYjHruB+N3kvzzUNIUYSFhxoGroAH45W46y6vSGMtW6Raq7fg7KaD+0v3T2nDWXEL1BiPLGlk6Aala8lXjQASnPtKZdpOmTnt68LCHZIovEUrVom4NZ6WHNIi8rJ3Es2CJXubxj/gTMF+6Eo2g5/gAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;1&quot; title=&quot;1&quot; src=&quot;/dev-blog/static/fc9e968cbfcfcabd746c4d2c16237cc2/6c115/1.png&quot; srcset=&quot;/dev-blog/static/fc9e968cbfcfcabd746c4d2c16237cc2/c26ae/1.png 158w,
/dev-blog/static/fc9e968cbfcfcabd746c4d2c16237cc2/6bdcf/1.png 315w,
/dev-blog/static/fc9e968cbfcfcabd746c4d2c16237cc2/6c115/1.png 353w&quot; sizes=&quot;(max-width: 353px) 100vw, 353px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;일반적인 테스트코드와는 결과가 많이 다른것을 볼 수 있습니다. 계층형으로 각각의 테스트를 진행하기 때문에 일반적인 테스트보다 더 각각의 테스트가 어떤 테스트를 진행하고 있는지 확인하기 쉽고, 필요없다면 특정 테스트를 폴딩하여 숨길수도 있습니다.&lt;/p&gt;
&lt;p&gt;여기서 가장 중요한 것은 DCI를 적용한다해서 각각의 네이밍이 따로 노는 것이 아닌 한줄로 이어보았을 때 어떤 테스트 상황을 명시하는지 확인하기 쉽도록 네이밍을 지어야한다는 것인데요. 보통 작성하는대로 각각의 메소드 네이밍을 따로두게 된다면 읽을 때 하나의 흐름으로 읽지 못하게 됩니다. 따라서 &lt;code class=&quot;language-text&quot;&gt;Describe&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;이 하나의 흐름으로 이어지게끔 네이밍을 주는 것이 좋습니다. 그럼 아래와 같이 읽을 수 있는 테스트코드가 만들어지거든요 :)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Describe : createEntranceCode 메소드는
Context : 존재하지 않는 Host의 id를 받는 경우
It : 예외를 발생시킨다.

전체 문장
createEntranceCode 메소드는 존재하지 않는 Host의 id를 받는 경우 예외를 발생시킨다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그럼 코드를 보면서 조금 자세하게 코드로 적용할 수 있는지를 알아보겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; changeSpacePassword_메소드는 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Nested&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; 존재하는_Host의_id와_수정할_패스워드를_받는_경우 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; ORIGIN_PASSWORD &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; CHANGING_PASSWORD &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;4567&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; GITHUB_ID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1234L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacePasswordChangeRequest&lt;/span&gt; spacePasswordChangeRequest&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; hostId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@BeforeEach&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            spacePasswordChangeRequest &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SpacePasswordChangeRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CHANGING_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            hostId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Host_&lt;/span&gt;생성&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ORIGIN_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GITHUB_ID&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 패스워드를_수정한다&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            hostService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;changeSpacePassword&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hostId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spacePasswordChangeRequest&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Host&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hostRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hostId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpacePassword&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CHANGING_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Describe : changeSpacePassword_메소드는&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Context : 존재하는_Host의_id와_수정할_패스워드를_받는_경우&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// It : 패스워드를_수정한다&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;먼저 &lt;code class=&quot;language-text&quot;&gt;Describe&lt;/code&gt;는 테스트할 대상을 명시하기 때문에 대부분의 케이스에서 “메소드”에 해당합니다. 특정한 시나리오에서라기보다는 테스트할 대상의 행위에 초점을 맞추고있는 디자인패턴이기때문에 메소드를 명시함으로써 저희가 테스트할 대상을 확실히 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;다음으로 &lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt;입니다. 테스트 대상이 놓여있는 상황을 구성하는 방법은 여러가지가 있을 수 있는데요. 저희팀에서는 아래와 같은 기준에서 상황을 구성하기로 했어요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;1. 테스트 값을 구성하는 경우 setUp() 메소드에서 진행하도록 한다.
    - 단 값을 구성하는 과정이 길어 setUp()에서 넣기 부담스럽다면 Describe에서 공통적으로 세팅하는것이 아닌 생성 메소드로 분리하여 사용한다.
    - Describe에서는 오로지 테스트할 대상을 명시하는 용도로만 사용하며 값 구성은 전부 Context에서 진행하여야 한다.
2. It에서 사용해야하는 의미있는 변수의 경우 Context의 클래스 변수로 두고, 사용하지 않는다면 setUp()에서만 사용하고 클래스 변수로 지정하지 않는다.
3. It에서 사용해야하는 의미있는 값은 Context에서 상수로 지정한다.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이를 통해서 얻고자하는 바는 실패하는 테스트를 보거나 테스트를 수정하는 상황이 되었을 때 수정점을 알기 쉽게 분리하기 위함입니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it에서 사용하는 테스트 검증 값&lt;/li&gt;
&lt;li&gt;테스트 대상이 놓인 상황을 구성하는 영역&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;위와 같이 구분함으로써 테스트의 모든 영역에 대해서 읽는 수고를 들이지 않더라도 한번에 제가 원하는 영역을 찾아 수정할 수 있게 되는 것이죠.&lt;/p&gt;
&lt;p&gt;이렇게 &lt;code class=&quot;language-text&quot;&gt;Describe&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Context&lt;/code&gt;를 구성하게 된 이후 &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;은 아주 간단해집니다. “테스트 대상의 실행”, “실행에 대한 검증”&lt;/p&gt;
&lt;p&gt;사실 지금까지 정확한 기준점을 잡았던 이유는 &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;을 위함이라고 생각합니다. 즉, &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;은 의도적으로 간단하게 만들어놓은거죠. 테스트에서 가장 중요한 것은 내가 어떤 테스트를 진행했고 그 테스트가 잘 수행되었는지 확인하는 것인데요. &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;을 통해 그 행위를 검중함과 더불어 간단하게 &lt;code class=&quot;language-text&quot;&gt;It&lt;/code&gt;을 구성함으로써 보다 쉽고 빠르게 테스트 검증 메소드부분을 확인할 수 있는거죠.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;마냥 장점만 있는 것은 아니다&lt;/h2&gt;
&lt;p&gt;지금까지 DCI 패턴을 적용하기 위한 과정들을 이야기했으나 결론은 DCI 패턴이 좋으니 적용하자는 아닙니다.&lt;/p&gt;
&lt;p&gt;DCI 패턴이 물론 장점이있기는 몇가지 상황에는 다른 방법이 더 좋을 수도 있거든요. 예를 들면 굳이 특정 대상을 명시하지 않아도 되었던 documentation테스트, BDD가 아닌 하나의 단위에 대한 TDD를 진행해야하는 테스트, 진행하는 시나리오가 더 중요한 인수테스트 등이 있을 수 있습니다.&lt;/p&gt;
&lt;p&gt;따라서 저희팀 내에서도 아직까지는 DCI 패턴을 모든 영역에 대해서 적용하지 않고 application, repository 영역에 대해서만 진행하고 있습니다.
적절한 상황에 대해서 논의하고 적절한 방법을 사용하여 테스트를 진행하는 것이 무엇보다 중요하니까요.&lt;/p&gt;
&lt;p&gt;지금까지 저희팀에서 적용하면서 반신반의하며 DCI 패턴을 적용함으로써 개선될까하는 부분들이 많았지만 도입을 하고 익숙해진 지금 대부분의 팀원이 호의적인 반응이었던 것 같아요. 아직까지도 DCI 패턴을 잘 사용하며 공통된 영역을 잘 분리하지는 않았지만 주기적으로 리팩터링하며 테스트를 만들어나가다보면 안정적인 저희만의 테스트를 만들어나갈 수 있을거라 생각이 듭니다 :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[공책 팀의 백엔드 인프라 및 CI/CD]]></title><description><![CDATA[안녕하세요 공책팀의 백엔드 개발을 맡고 있는 범고래입니다.…]]></description><link>https://gong-check.github.io/dev-blog/BE/범고래/CICD/CICD/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/범고래/CICD/CICD/</guid><pubDate>Sun, 24 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 공책팀의 백엔드 개발을 맡고 있는 범고래입니다.&lt;/p&gt;
&lt;p&gt;2차 스프린트까지 진행하면서 서비스 배포 및 인프라 구성을 하게 됐는데요.&lt;/p&gt;
&lt;p&gt;이번 포스팅은 현재 공책 서비스의 백엔드 인프라 소개 및 설명에 대해 작성해보려 합니다. (참고로 백엔드 인프라에 대한 설명만 포함하고 있습니다.)&lt;/p&gt;
&lt;h2&gt;현재 공책 서비스 인프라&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/ca3c3/cicd.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABuklEQVQoz32TXWtTQRCG93vPR7bpOZAmx7RNJSalEbRQSCQQqja5ERURe++tFxG88S/4C/y9j+yepg0VejHMzmH2nZln5wglJZ2qT//snPfv3rJer1ksFgghEFK2fs/ko/g/iwl5qKmaU6aTCaPRiPF4/PSlp+0hCCGw2Wzw3rfdVGcIW951Jam9YBwe8o0xOOco8gxrLVrrVlAqlRKWyyXb7Zb54k2K9WiOmX3AZSVSaVaN5OOpINidoKYTAtOXr7HWJVFxN3dK8JlnOBxSlAXWGKQ26LK+L9jLBMelQO06tI7CaW6mB2gt9wT3rN/vJ19XFUe9Xjv6o8dRSiUssWCVO748t+TetXn5oSevPXmV4zKLi1WrInWtpMJnGUpp5rMXPOvViVNkl5BITdb1dGcdbGbRSiNm3y+4/H3J8GZAp+mghWO4GuCDvwcf/Y+vt1xNpukccTjv0MJyeOGY/2nwlcJIi1h9+8Xnn38JVcNBPWBytU6MdkI2ecWnV0ecNwEhDXF349jaOKoDze11gbGqZZgXgaLs4pxPH5xvV2DHTcYHU5brY8VJN66F3ltiRTezrE8iKpN+hH8rQ+UEtQZHDQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;cicd.png&quot;
        title=&quot;cicd.png&quot;
        src=&quot;/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/f058b/cicd.png&quot;
        srcset=&quot;/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/c26ae/cicd.png 158w,
/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/6bdcf/cicd.png 315w,
/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/f058b/cicd.png 630w,
/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/40601/cicd.png 945w,
/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/78612/cicd.png 1260w,
/dev-blog/static/c4055faed414e501cfbb55374bbfb51f/ca3c3/cicd.png 1850w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;현재 공책 팀의 CI/CD 구성과 인프라 설계도 인데요.&lt;/p&gt;
&lt;p&gt;백엔드는 jenkins 서버, 개발 배포 서버, 운영 배포 서버 이렇게 세 개의 ec2 인스턴스를 사용하고 있습니다.&lt;/p&gt;
&lt;p&gt;개발 서버는 운영 서버에 배포하기 전, 문제가 없는지 QA에 대한 진행을 하는 용도로 사용 되고 있습니다. 운영 서버에 배포한 후에 문제가 발생하면 실 사용자가 있을 시 문제가 생길 수 있다는 판단하에 이와 같이 구성했습니다.&lt;/p&gt;
&lt;p&gt;또한 아직 DB 서버는 존재하지 않고, h2를 사용하고 있습니다. 이 과정은 3차 스프린트 때 추가될 것 같습니다.&lt;/p&gt;
&lt;h3&gt;sonarcloud를 도입한 이유&lt;/h3&gt;
&lt;p&gt;저희는 CI과정에서 github actions와 sonarcloud를 사용했습니다. PR을 요청한 코드가 문제가 없는지 모든 백엔드 크루가 리뷰를 하며 검증 후, 모두가 approve가 완료되면 merge하는 과정을 거쳤습니다만&lt;/p&gt;
&lt;p&gt;이 과정에서 실수로 놓치는 상황을 없애기 위해 sonarcloud를 통해 code smell을 체크하는 과정을 도입했습니다. 또한 추후에 sonarcloud를 활용하여 추가적으로 다른 기능을 활용할 수 있다는 점도 고려 요소 중 하나였습니다.&lt;/p&gt;
&lt;h3&gt;github actions를 사용한 이유&lt;/h3&gt;
&lt;p&gt;우테코에서 프로젝트를 진행하면서 ec2 인스턴스를 중간에 부여받았는데요. 우테코에서 서버를 받기 이전에 저희는 Github Actions를 통해 CI를 어느정도 구축을 해놓은 상태였습니다. 서버를 받은 이후에 CI 과정을 jenkins로 옮길 수 있었지만, 저희의 CI 과정(PR부터 merge)은 github에서 수행되기 때문에 github에 좀 더 친화적인 github actions를 계속 유지해도 좋을 것 같다는 판단으로 github actions로 CI 하는 것을 유지했습니다.&lt;/p&gt;
&lt;h3&gt;CI/CD 과정 요약&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;PR을 날리면 Github actions가 빌드 과정을 거친다.&lt;/li&gt;
&lt;li&gt;빌드 완료 후 sonarcloud가 PR을 날린 정적 코드를 분석하여 code smell을 체크한다.&lt;/li&gt;
&lt;li&gt;1번과 2번의 과정을 거친 후, 문제가 없을 시 merge를 한다.&lt;/li&gt;
&lt;li&gt;merge를 하게 되면 github가 webhook을 jenkens서버로 날리게 된다.&lt;/li&gt;
&lt;li&gt;요청을 받은 jenkins 서버는 프로젝트를 clone한 후, 빌드 과정을 거쳐 jar 파일을 서버로 보낸다.&lt;/li&gt;
&lt;li&gt;jenkins를 통해 jar파일을 받은 서버는 해당 파일을 배포한다.&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Slack Bot 만들기]]></title><description><![CDATA[개요 안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 쿼리치입니다. 2차 스프린트를 진행하면서 저희 공책 프로젝트에 새로운 기능들이 많이 추가될 예정인데요. 제가 이번에 추가하게된 기능은 Slack Bot 을 연동하여 제출 시 Slack…]]></description><link>https://gong-check.github.io/dev-blog/BE/쿼리치/spring-slack/spring-slack/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/쿼리치/spring-slack/spring-slack/</guid><pubDate>Mon, 18 Jul 2022 22:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 쿼리치입니다.&lt;/p&gt;
&lt;p&gt;2차 스프린트를 진행하면서 저희 공책 프로젝트에 새로운 기능들이 많이 추가될 예정인데요.&lt;/p&gt;
&lt;p&gt;제가 이번에 추가하게된 기능은 Slack Bot 을 연동하여 제출 시 Slack 알림이 울리는 기능입니다.&lt;/p&gt;
&lt;h3&gt;메시지 봇을 만드는 방법&lt;/h3&gt;
&lt;p&gt;Slack 에서 제공하는 API 로 메시지 봇을 만드는 방법은 총 두 가지가 존재합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;토큰&lt;/code&gt; + &lt;code class=&quot;language-text&quot;&gt;채널명&lt;/code&gt; 으로 메시지를 보낸다.&lt;/li&gt;
&lt;li&gt;Webhook URL 을 통해 메시지를 보낸다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;하나하나 방법을 알아보면서 두 가지의 차이점을 먼저 알아보겠습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;토큰 + 채널명으로 Slack Bot 연동하기&lt;/h2&gt;
&lt;hr&gt;
&lt;h3&gt;앱 생성하기&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/aaf7f/Screen_Shot_2022-07-13_at_5.54.10_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACq0lEQVQoz1XTTW8aVxTG8dlXSdQAM8zcl7kD8wL28GLAmLo4DBiIa3AUHEVqIlVOmtrYLptKVbddtF/Aq/QTtE2/5L9ibEXt4qdzj47u4uo+xxplQ1arFfu9fcIwRAqZM75hr71Hu9Um3U3/p7GVprRabTqdDo20Qa/Xw9c+Vte0OEgO6AQdqrqKrzVGawLfJzCGahBQMYbA+Bhf4yuFjpsElZimadCtdGmbPerVOlorrNjEuAUX5SickkOpWMRzXZxSCVF2KBWKubLtoKVCCYnSFaTUGGEIRECoKiihUFJh/bjZ8ObtWy4uLri5vmG9vubqas3N1SXfvjzl/bvvufzhkrOzF/kFIzWBVARCEggP6bq0Y0GoPZTwsIaDQ05mc2aTKcvTBeNnI7KjZyxOThl+dT9bfrM9f430BFpptJQoE6LjFipqoh+oqIF1fbXm8sMHNre3eb1Zr9ncbnj33QWnz0948sUj7KdFysUSwvUQnodwXTwd4kV7eGHrM1XrYC2zJcujJbODOYvhgtXynDfnC+bHY/rdAbu7u+zUd6g/qCU14igmjiKSKKKexLl0p470XKzXL1/z6uwV54sVx8NjpuMpp89nHA4GHA4Omc9mZKMRs+mM+XzOZDwhyyYMh0eMszGjUcYkO2aSTfCVwWq126S1iKODNtP5HKMNxUIBt+zi2NtfL1G2bRy7RNmxKTsO5WoDx1PYJRvX9kjsGnWnTlM2se7u7vjj40d++elnYhXnT9o+MYlikjj53NeTGlGlilEao/ycrzRVX1OvGLT00VJj/fnX33z65xO//fo7vVqP/n6ffr+fpz9N03yDct0eSRjhi/vobGmhCH1FGmrEdsOkxDLOlzx+9AT7aSGPg/buSSGIRIT2NFJ4qO1suyX/4T/UbT79h/5flU50HlMVdLsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.54.10 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.54.10 PM.png&quot;
        src=&quot;/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/f058b/Screen_Shot_2022-07-13_at_5.54.10_PM.png&quot;
        srcset=&quot;/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/c26ae/Screen_Shot_2022-07-13_at_5.54.10_PM.png 158w,
/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/6bdcf/Screen_Shot_2022-07-13_at_5.54.10_PM.png 315w,
/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/f058b/Screen_Shot_2022-07-13_at_5.54.10_PM.png 630w,
/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/40601/Screen_Shot_2022-07-13_at_5.54.10_PM.png 945w,
/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/78612/Screen_Shot_2022-07-13_at_5.54.10_PM.png 1260w,
/dev-blog/static/b8d62cd6ec2c5764b95054dade228396/aaf7f/Screen_Shot_2022-07-13_at_5.54.10_PM.png 1668w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://api.slack.com/&quot;&gt;Slack API 페이지&lt;/a&gt; 접속 후 &lt;code class=&quot;language-text&quot;&gt;Create an app&lt;/code&gt; 을 클릭합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/ad997/Screen_Shot_2022-07-13_at_5.54.34_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhElEQVQ4y52T626CQBCFef9X84cxYioURNFGo6IIyFWd5pt2LDG9b3KYhdk9zJw963RdJ77ni+/7slgsJIoixfV6ldvt9mvAc7lcxOERhqGMRiMJngNxXVfnfx1t2yqpEuZ5LlVVSVEUUte1xv1+L2mayna7ld1uJ6fTSZIkkcPhoDgej/pOjjV0xHAo18jKslRyNhPP57NkWabE5O17nuUaydl6ClNCJmwgyZ8p/b+D4hxaRLvZbCaTyUTiOL7/GVCZtXlI3qIVQMvsZ6CfElLharWSZbyUzWajBwT4Bjknj0ZoZsS0+EgIjxLyIMkGNGROVehXvOvDmu9G32KOvTxqAa6faNSP7H30q2roeZ5Mp1MZDocyHrsyGAwkCAJ5ekkkPdfSNo2UVaXt4YimaXTeL8SIHcScz+eqVRiECuZgHkUa1+v13Y8Aj6K3WeXN2N2Hhght5kVLE51TJveTVfpS3G+KEZjBsYbdBnL2M6ojfnWnHbvYjzC9AGYHfQ371fUJXwF6kjob8HayOwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.54.34 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.54.34 PM.png&quot;
        src=&quot;/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/f058b/Screen_Shot_2022-07-13_at_5.54.34_PM.png&quot;
        srcset=&quot;/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/c26ae/Screen_Shot_2022-07-13_at_5.54.34_PM.png 158w,
/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/6bdcf/Screen_Shot_2022-07-13_at_5.54.34_PM.png 315w,
/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/f058b/Screen_Shot_2022-07-13_at_5.54.34_PM.png 630w,
/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/40601/Screen_Shot_2022-07-13_at_5.54.34_PM.png 945w,
/dev-blog/static/39e57dd70cf1e4d94d34e68af3e11d9c/ad997/Screen_Shot_2022-07-13_at_5.54.34_PM.png 1012w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;From scratch&lt;/code&gt; 를 눌러 새로운 앱을 만들어보겠습니다.&lt;/p&gt;
&lt;h3&gt;워크스페이스 지정&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/3dde1/Screen_Shot_2022-07-13_at_5.55.21_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 96.20253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQ4y5VUy44SQRTtH3Kne7/Kje7cG+MjMfE7TDRxJxogTnAIMJDIm4aGAaqr300/jjmX6Q4DqEwll3urq+65r1MYnueh3+9jsVhgPp9jNpuJTCYTWJYlMhqNMJ1OsVwukWUZuPI8vydJkog2XNfF1c8rtFot1Ko1NBoN3HRuUK1Wcf3rGs1mE/V6HZVKRe6kaXoCyBVFkQQzeMFxHGity+j/WwXIub0RhqGUNB6PsVqtwD3b4Hs+drvdiTCBc1KWzB/btgWM/aJmD2kz40uFgFIyozraEVBmx55q25YWMNPtdgttayilEMexODGjLEvvwNISVDLkpa1SAkQnAtOm5p7AxRmD/7O3yGEEQQBzOMJ6uRJqsJekh2maQp25ORdK8bvv+5LFPsPTsssergcWht3f0K5z0YSPJcuzMpiRJDuYSkM5Lpy78mTKvi+27F2v/H54TinO2I6yhwvTxO1qJRNmeSy50Jw2X1BhUxfnm81GbAYoOCzEVsouh8EhkOgF2YtBUcvEtRYg7o8fgmTIVOlAgMKZTnRm5If2UzI87Nmhzff50GUcPy2CkOCFPrZFohh+GCEII4RRJDa/0d9gqeTbcDiUN93r9dDtdtHpdNBut+WvjZwcDAaYTiYYT02MrS2Giw1mSwVrrTG1FG63DoLA3/Pw0n+Xe3fzHGESQ4e+iBeHyPmW/9bcswROU8nWnJlwAx9PP77Eo9fP8Pjdczx5/wJzR+0zvBgwy4QBZEK8i/Gh9hWvvn3Cm++f8fbHFzhRgD9U17L5IeoYDwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.55.21 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.55.21 PM.png&quot;
        src=&quot;/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/f058b/Screen_Shot_2022-07-13_at_5.55.21_PM.png&quot;
        srcset=&quot;/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/c26ae/Screen_Shot_2022-07-13_at_5.55.21_PM.png 158w,
/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/6bdcf/Screen_Shot_2022-07-13_at_5.55.21_PM.png 315w,
/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/f058b/Screen_Shot_2022-07-13_at_5.55.21_PM.png 630w,
/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/40601/Screen_Shot_2022-07-13_at_5.55.21_PM.png 945w,
/dev-blog/static/6d8712565f7ca399a4816cf6ee2422f8/3dde1/Screen_Shot_2022-07-13_at_5.55.21_PM.png 1018w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이름을 정하고 봇을 추가할 워크스페이스를 지정하겠습니다.&lt;/p&gt;
&lt;h3&gt;권한 설정&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/798d4/Screen_Shot_2022-07-13_at_5.56.15_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 175.31645569620252%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD6klEQVRIx6WWe1PqWgzF/f5fyb+ujueMOsqb8uoDKALSloKAgELu/ALptKhn7tzTmdBNd1gkayXZvZL/cR2Pxx/tar/fS6VckUajIff39+I0HfE8T2rVmriuK+12W4IgkGq1Ks1mU3rdnoIeDge1L4AfHx/SclpSq9WkUqlIqVQSx3Hk6elJGvWGgvf7fel2uwrqe/4fo77i4+3tTZIkkdVqpes4jiVNU10vFgs19ubzucxmM7VoFsl4PJbJZKJ7BnpF2MPhUAaDgf47ERENa1IN/EA6nY70ej3xfV/X7LPHM/xfXl6KgKTUD/oCn1DAHdvtdtl9u93Kfnda23d9dt7PAPkwp7+5Mg7/BsSUxgoReq6n6sILHHGHV4zvlA9cGX/1el0Fs4vUEYpLOcS51WrJaDTSugMAkXjOvddzpd8fKFi301XfPKDRlgHOk7lEUaTlQvm8vr5KOBzKPEkkjiiRmcRRdLrHsUaDD2ISBCVWUDkchhoNKVImQdCX4TQRb5JKME3FHc+lHSb6bLfdaiWYfX5+fuWQDSMXh5PTUT4zO2SWV9TWBpypTJq0lRUv0eZNRXFdFQv+zMcEfH9/V1MODZBepvkxiG82mlKv16Req0m1UpGW46goDBEqAr9yuaxcAobSGeByuRS35+q/E6XregrU9ofS8EbS9EJx/Bfpup4Evq+VADgCrddrtQLgZrORJE7UGAAYUafLlSTLtSxWG72n6UKVZy+JYwUhOn5fKBsI/aGf1A4QfhYkf5nC+dmogKScnyab9ebcWkc5nn9IVKQ66A/UZzqdZu1n96xscL6+vpa7uzu5vb1VVS9HPeT//vVLp/rDw4M8Pj5mBV0AtAhRj/GvCjaa2gVwI7kIKS2Eo5cxhAG0kDIfPGT8j8KRRsIUZhrbJMYZQP4UagC1EuO4sEjx0whRijFPxX834yxCzcJxNDr4tCgpm6z1LuebtZ6ZARItvc64JwtqkCwI5ovKP5ZNrlcvo/9u2BY4RAzU7bRPB1K71da0AMKHkaXHqutp2uxZ2gjI2aKFjTP8PT8/n4BwbLWl9FxSzqx46R58jEOMXrZAsjMFZyJkE6Ux1MORoWvpsMaH4meoxlEsYRjKZDzJ6MhUtmPRGh2zGjQOId/U/I7ngih2/trQvDzVALQzOH9e5/s4A+SHlMDNPzdaEgbAD0x9az3ed6AC4wWLiC9fmE6inDsFBU8T2pNyuaJFa62HcNVKVQcxnYJgcI04+UFR6GUc6ddROJTNZiXL5VsGiMpMGYqbic4aUSh4+C2oTOhscgZz/qZzDu19li6Axlv+3SffEIXCPnwzPJmFebL/65vsv1hLZQUIsP1SAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.56.15 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.56.15 PM.png&quot;
        src=&quot;/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/f058b/Screen_Shot_2022-07-13_at_5.56.15_PM.png&quot;
        srcset=&quot;/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/c26ae/Screen_Shot_2022-07-13_at_5.56.15_PM.png 158w,
/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/6bdcf/Screen_Shot_2022-07-13_at_5.56.15_PM.png 315w,
/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/f058b/Screen_Shot_2022-07-13_at_5.56.15_PM.png 630w,
/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/40601/Screen_Shot_2022-07-13_at_5.56.15_PM.png 945w,
/dev-blog/static/a9735a1d6265c38d0aa9290b5ee520e8/798d4/Screen_Shot_2022-07-13_at_5.56.15_PM.png 976w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;봇이 채널에 채팅을 남길 수 있도록 &lt;code class=&quot;language-text&quot;&gt;Permissions&lt;/code&gt; 에서 권한을 설정해주겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/09e48/Screen_Shot_2022-07-14_at_11.02.29_AM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 96.20253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7klEQVQ4y6VU27KiMBDk//+LfbHEBx92DxYcwUUlIBcFlWtv9Vhho7IP52yqRoYQO909k1iYGeM4fjuspmngOA6WyyVs24bnef8Fag3DAKUUgiBAGIYoikLzxFfGBNj3vQAmSmEfRYjjGFEUYbPZyCb7/V422u122G638n44HCTnXBiEULGaQAXweDzikFUI0hpxkgoAwc7nsyzqug5cZ4Y5R5VPgGmaQqkESZqK5CzLkOf5l+Te73fJLSYsiLN08MO2sV6vsVgssFqtBLyualRVJVHX9fTUrDiY3263ByBfKI1BALI9nU64XC5iRZIkj1CJrDmlJ/GZkjU7k6nFH/5Zh7mzyYDfCNi27RPAa4sJYFmWOJclijyXP3COIAzmnNPeamkawCQwAYZpDT++YJtUaPvhbTF9Zruwvdgy7ABao2XT0+v1+vBQKtT2Ek3bv8ng4GL2ZZ5lwpbvBNMbkj1VCiBPRNv16Ppenoxr075JJguCmOxnJQ/jCO9Y4leU4yMq8PN3LrnJkL7pk/Hpf8L9cEW6LhC/T31oln3ubGoPCUjvCMrQLcU1lKzvAOtvyfGImQqSAY8jg8V4beq3KpM6rzEG2fDJOe3TqwrTw9fc4gK2A+9B3/Phui583xeP5hp3boOn6+tfHn73kv0DRtjFNhkMjcIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 11.02.29 AM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 11.02.29 AM.png&quot;
        src=&quot;/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/f058b/Screen_Shot_2022-07-14_at_11.02.29_AM.png&quot;
        srcset=&quot;/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/c26ae/Screen_Shot_2022-07-14_at_11.02.29_AM.png 158w,
/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/6bdcf/Screen_Shot_2022-07-14_at_11.02.29_AM.png 315w,
/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/f058b/Screen_Shot_2022-07-14_at_11.02.29_AM.png 630w,
/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/40601/Screen_Shot_2022-07-14_at_11.02.29_AM.png 945w,
/dev-blog/static/e209c9578e8e63638bb975871c3e75b2/09e48/Screen_Shot_2022-07-14_at_11.02.29_AM.png 974w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Scopes 설정에서 &lt;code class=&quot;language-text&quot;&gt;chat:write&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;chat:write.public&lt;/code&gt; 을 활성화해줍시다.&lt;/p&gt;
&lt;h3&gt;앱 설치&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/845aff689518262ce7a53032a7869da6/d0c2f/Screen_Shot_2022-07-13_at_5.58.49_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXElEQVQoz4VR207CQBDtr/rmF/juR5j47JN/IGkEMUAqITEBJaEXaGNtS6Gk2xt0eztmVtvgi05yMrMzk9kzZ6S1x+C4LnzfR5ZlSNMUiqJAlmUMn4boP/YxnU4xmUwwGo0wm83Qe+jBMAyUZYnj8YjT6dRBchwHpmmKQlEUIkm+qirUdY08z7v43J+D+gmcc0jGeo335RKu54GxqBsQx7EAsU6SBGmSIooiEZOnPNXp3TQNyIixtN+68N1PgTxLUBZc/GaZJnRdh6ZqUFUVm80Ghm585zRNrNx6y7LEcCIiPb+uICtzjOcGlh8BwjhFXVXwvC2CIBCaUjOxasEY6+IwDAWIqRh4dTfG9f0LLm8HuLgZYGUHABoEwQHRjwSkK63zn4mV2WGPMNiBHXZi5YJzoQn96HmeuL5t24INWavXuf3SUNN1LBZvCEOGnPPuylQk0Bpt/Beoj678BTOtW+QEnG3QAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.58.49 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.58.49 PM.png&quot;
        src=&quot;/dev-blog/static/845aff689518262ce7a53032a7869da6/f058b/Screen_Shot_2022-07-13_at_5.58.49_PM.png&quot;
        srcset=&quot;/dev-blog/static/845aff689518262ce7a53032a7869da6/c26ae/Screen_Shot_2022-07-13_at_5.58.49_PM.png 158w,
/dev-blog/static/845aff689518262ce7a53032a7869da6/6bdcf/Screen_Shot_2022-07-13_at_5.58.49_PM.png 315w,
/dev-blog/static/845aff689518262ce7a53032a7869da6/f058b/Screen_Shot_2022-07-13_at_5.58.49_PM.png 630w,
/dev-blog/static/845aff689518262ce7a53032a7869da6/40601/Screen_Shot_2022-07-13_at_5.58.49_PM.png 945w,
/dev-blog/static/845aff689518262ce7a53032a7869da6/78612/Screen_Shot_2022-07-13_at_5.58.49_PM.png 1260w,
/dev-blog/static/845aff689518262ce7a53032a7869da6/d0c2f/Screen_Shot_2022-07-13_at_5.58.49_PM.png 1362w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Install App 으로 이동 후 &lt;code class=&quot;language-text&quot;&gt;Install to Workspace&lt;/code&gt; 를 통해 워크스페이스에 앱을 설치해보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/99661/Screen_Shot_2022-07-13_at_5.59.26_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAByElEQVQoz5WTy27aQBSG84bJK0TKtlLeoC+AssiumypKVSmLZBNVWbSJlAuIAo49MRdjF4VGBAOywfFgYzAe/9UcBMIkLDrS7+M5M/Pp/HPZSdMU6xJpCiCF2Zsid/WMOHTAeQBvzBH8LGF09B2js1+QLU0ENtfvbCYSsQCW/vg4OL5D7D3jtefAH7lgHRdfHwzotTYBhdgC/LgJAPNMph8LVPwZRltWEFD+dDod5PN51Ot1VMoV6LoOTWNgTzqKxSIsy4JhGKhqGgz1EUxRUKvV8MQYlIqCcrmMN++NoASM4xhhGKLdbhNMVVUoikKw0u8SNE3D3e0tCoUClEcV9/cPuLm+oTnD4RBRFGE+X7jJWJZJ3/fBOV/FIAhInudRfynXdSn3zrL8yPIZY2S5Wq2i2Wyi0WhQ3zItGjdNE0bDoFyr1cLL35cVZFnUCjibzUiydBnH4zGm02lGy/HJZEJOkiTJgDKW5f7Jyf1+n/ZkMBhQdBwHPbtH0XEdynftLkHXr42Mcv27PfyftnkHM5Y/lEipSrtrg4cB9i++YO80h91vOdh8cRhirZitL2Vd8jQlNIwifL4+x6fLExz+OIUT8BVw86X8A/t3i4A47cvrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-13 at 5.59.26 PM.png&quot;
        title=&quot;Screen Shot 2022-07-13 at 5.59.26 PM.png&quot;
        src=&quot;/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/f058b/Screen_Shot_2022-07-13_at_5.59.26_PM.png&quot;
        srcset=&quot;/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/c26ae/Screen_Shot_2022-07-13_at_5.59.26_PM.png 158w,
/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/6bdcf/Screen_Shot_2022-07-13_at_5.59.26_PM.png 315w,
/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/f058b/Screen_Shot_2022-07-13_at_5.59.26_PM.png 630w,
/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/40601/Screen_Shot_2022-07-13_at_5.59.26_PM.png 945w,
/dev-blog/static/4d6fd057c2b76ffa96a7606efac6e5f8/99661/Screen_Shot_2022-07-13_at_5.59.26_PM.png 1098w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt; 해줍시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/798d4/Screen_Shot_2022-07-14_at_11.03.08_AM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtUlEQVQ4y51T2ariQBANiIjgx/lnfoAvc/HJDxD0A+YqohG3iYhGkrazJ2pcJy5nqHJ0rjp7w0lVurtOV9epVvA0LpcL/nVQzA3K6XSCqqqo1+vodrvo9/t4//yOdrsN7YuG0WjE6+PxGI1GA81mE2pbRavVQq/Xw263eyBVzuczoihCEARYRAus12v2ozDCcrlEHMe8TiA/DEOGbdtsj8fjK6HrupjP5wwpJRzHged5/C+EebWmCcMwYFkWhBBsCavV6pWQSOhKuq7DNE3oU/174ByGKSAtG47rQkoLjm1zdrSPDqX4B0L6UOpEQJkRfN+HJSW8IILhxZDhGsKP8TVJQDX/CCJ8EYWu7NgONpsN13C73bL9W8Vv++6EwhRcl2q1imKxiFKphLdPbyiXy6jVajz/DJqvVCpcpiRJsN/vH1Wm4ubzeSiKglwuh2w2i0wmg1Qq9VOk02neWygUWCy65Q/CxbVFSBjqv06nwz1Gp89ms1+C1imObkntcxflcDhw3W49dSv2/7wYhZzADzAcDqFpGiaTCfuDwQDT6ZRfApE/q3s6X+1Hhe8Z/k7N57b4E74BbgG0BnR99WQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 11.03.08 AM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 11.03.08 AM.png&quot;
        src=&quot;/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/f058b/Screen_Shot_2022-07-14_at_11.03.08_AM.png&quot;
        srcset=&quot;/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/c26ae/Screen_Shot_2022-07-14_at_11.03.08_AM.png 158w,
/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/6bdcf/Screen_Shot_2022-07-14_at_11.03.08_AM.png 315w,
/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/f058b/Screen_Shot_2022-07-14_at_11.03.08_AM.png 630w,
/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/40601/Screen_Shot_2022-07-14_at_11.03.08_AM.png 945w,
/dev-blog/static/ca3cc2bc80dc9b8585225e2a454ed00f/798d4/Screen_Shot_2022-07-14_at_11.03.08_AM.png 976w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;성공적으로 설치가 완료되면 &lt;code class=&quot;language-text&quot;&gt;xoxb&lt;/code&gt; 토큰을 발급 받으실 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/35a31/Screen_Shot_2022-07-14_at_11.06.47_AM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.949367088607595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMklEQVQY012Py0oCARSG5wFaZs040+hYk9eZvIwXjB4ggqSLm7IoRAzCCsPMICLIsCLCIqhVqxaBIUQQ0b4e64uZJMTFzznfOfyH8wsT/hBTsSSi7EGU1V4d7PtY8SKOikyuHrB890nhosPS+SsrV13mbz8Q/CGDTHaGQNh0ZLMeiBAyogRC5v/cZnsXNKK4JZlw8YhS7pjSXJ1Grkp1dp/adQfBpweJJzOEzRhmzHL6WCJFMjNN3EoTTaSw0lmMaAJV09H0IJIooRdqVCuP1La3qC8U2dNy5Ms3CIpnnMhU3JH9heLx4R7THMmqD1nVeux1IkuKF5drBHPzhO/nNm+HizTXd/g5XeP+oYtgm/x90WyzpPwZB2UfVVSNoWGZxu4G7+0yVrFJvvXC5VmFr6cWv6OQqysw2IJcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 11.06.47 AM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 11.06.47 AM.png&quot;
        src=&quot;/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/f058b/Screen_Shot_2022-07-14_at_11.06.47_AM.png&quot;
        srcset=&quot;/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/c26ae/Screen_Shot_2022-07-14_at_11.06.47_AM.png 158w,
/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/6bdcf/Screen_Shot_2022-07-14_at_11.06.47_AM.png 315w,
/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/f058b/Screen_Shot_2022-07-14_at_11.06.47_AM.png 630w,
/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/40601/Screen_Shot_2022-07-14_at_11.06.47_AM.png 945w,
/dev-blog/static/99b62261ba0d0a05218b3358c966bc62/35a31/Screen_Shot_2022-07-14_at_11.06.47_AM.png 1028w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/d4377/Screen_Shot_2022-07-14_at_11.07.33_AM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 12.658227848101264%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAT0lEQVQI12NQVtP6r66l+19JVeO/pKzCfymyseJ/SRn5/wy6+vr/peWU4ILkYGk5xf8y8kr/QY5jsLG2/K+gogE2HWSopAzpGGaonoHJfwBi71F8rPrs1wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 11.07.33 AM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 11.07.33 AM.png&quot;
        src=&quot;/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/f058b/Screen_Shot_2022-07-14_at_11.07.33_AM.png&quot;
        srcset=&quot;/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/c26ae/Screen_Shot_2022-07-14_at_11.07.33_AM.png 158w,
/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/6bdcf/Screen_Shot_2022-07-14_at_11.07.33_AM.png 315w,
/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/f058b/Screen_Shot_2022-07-14_at_11.07.33_AM.png 630w,
/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/40601/Screen_Shot_2022-07-14_at_11.07.33_AM.png 945w,
/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/78612/Screen_Shot_2022-07-14_at_11.07.33_AM.png 1260w,
/dev-blog/static/04967e4f412dc755d0151a474ad90dc2/d4377/Screen_Shot_2022-07-14_at_11.07.33_AM.png 1294w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;봇을 설치하고 싶은 채널에서 &lt;code class=&quot;language-text&quot;&gt;Add an App&lt;/code&gt; 클릭 후 만든 봇을 &lt;code class=&quot;language-text&quot;&gt;Add&lt;/code&gt; 해줍시다.&lt;/p&gt;
&lt;p&gt;여기까지 완료했다면 토큰 + 채널명을 기반으로 한 봇 사용이 가능합니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;Webhook URL 을 통해 Slack Bot 연동하기&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Webhook 의 경우 권한 설정까지는 동일하게 설정해주고 시작해줍니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/b67f3/Screen_Shot_2022-07-14_at_2.49.26_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpklEQVQ4y01UaWvbQBD1/y6U9kN/SkMp9EsJgRZymJJQSqANzaE4ss7VSqtrJcs6LMl6ZUaxqeHh2d3Zt28uLayohAwjJHGMtm2x3W5xe3uLq6srnJ+fY7lcMs7OznB5cYnv375BCIHdboemaeY7TX20F0IEcF2XN8iJNruuQz8MGMeR1/v9Hvtp4jVhmibQj+yh79nGBPR9j8XaNPHw8IA4jrHZbJiMHNMkQRRKVp5nKWKloJRCEATwfR9RFKFtGjRjj3cXX/DDMZh3QfI9z4PjOCiKYlbX93BFiMeVBcN08GL7eF69YLV6hmEYjCfDgKJUFRonv5Z4lO5MGAgB0zT5ZSKiEEmhygoIlUEmGn6UQUazQilD9j2odSwLWkaodDETykCyOq01q2PCYYDvOnCsNVzbgu95/KhprjnfBIrKtm2IUOHJdLCptjNhGIZcNUKe50w6DAOirESQaIRxBikln8sgYFW0phwSaVZssGlHjPuJK7MwjGf8/nOHLNdoO2qFOWRypLAzXSJJYigV8YNpmiJNUmRZxrbOczT1loWwwk2eII9DjF0NYI9+96owpFwJ/g8TzblUKmal6rXiZVkyUV3XnH8m/Hp9j9Obe5xe/8XFnYtYV5j2I1ecFDGKErqskCTJcY/ajFRWVXVsNyZ8e3KD959u8OHzT7z5eIMnPwWmEWEUcfIPzl3XspLZ7niiaBhoj+wjYZEq5LFEEgq0lcbQ7zhkCoeUkFK6QGsi10XBqoiIOoP26OwYskvldxxYlo2MqzwTUvUPrTG3igPPdeB7LiMQPsyXFdbrNVee7syErgvLshiUF5pnOiQyGjEipEuu58MWCrYfwRIRTFdi5QhOTZ5lx/leHPqJQPZhlik/hy8IhVc3LepuYGz/w0wDJiT8A/1yY80f9JtsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 2.49.26 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 2.49.26 PM.png&quot;
        src=&quot;/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/f058b/Screen_Shot_2022-07-14_at_2.49.26_PM.png&quot;
        srcset=&quot;/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/c26ae/Screen_Shot_2022-07-14_at_2.49.26_PM.png 158w,
/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/6bdcf/Screen_Shot_2022-07-14_at_2.49.26_PM.png 315w,
/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/f058b/Screen_Shot_2022-07-14_at_2.49.26_PM.png 630w,
/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/40601/Screen_Shot_2022-07-14_at_2.49.26_PM.png 945w,
/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/78612/Screen_Shot_2022-07-14_at_2.49.26_PM.png 1260w,
/dev-blog/static/19ee065800afb6eeab25ebd605c3d9b0/b67f3/Screen_Shot_2022-07-14_at_2.49.26_PM.png 1338w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Incoming Webhooks 설정에 들어가 Activate 해줍시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/5bf79/Screen_Shot_2022-07-14_at_2.50.01_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA00lEQVQoz41Q2Q6DMAzj/3+PQ7zA2g4JcV/iRnhypqK9sC2SG7dNXDfOeZ5omgZ1XWMYBsnLsuAuxnFE13WY5xnTNEk9+4/jkHuHSxzHCIIAURQhDENkWSYFFF7X9QL3Wml4nockSfA0T7iuC9/3UVXVW5AO27aVgzzPJRdFIdzmNE3lEdZt23aJE9wT5NQSQdq3X2D+bCC35/u+41uIIImdBWGdci5936MsS+GcG8XZ9A0iyGL1UNBawxgjsyTnV5VSMmOjjbi0Tm4FLfknfrmj4AtJVh1o2sotsgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 2.50.01 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 2.50.01 PM.png&quot;
        src=&quot;/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/f058b/Screen_Shot_2022-07-14_at_2.50.01_PM.png&quot;
        srcset=&quot;/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/c26ae/Screen_Shot_2022-07-14_at_2.50.01_PM.png 158w,
/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/6bdcf/Screen_Shot_2022-07-14_at_2.50.01_PM.png 315w,
/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/f058b/Screen_Shot_2022-07-14_at_2.50.01_PM.png 630w,
/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/40601/Screen_Shot_2022-07-14_at_2.50.01_PM.png 945w,
/dev-blog/static/8d70d223b2dafaf2894fbe763ffd6f40/5bf79/Screen_Shot_2022-07-14_at_2.50.01_PM.png 966w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Webhook 이 활성화되면 아래에 &lt;code class=&quot;language-text&quot;&gt;Add New Webhook to Workspace&lt;/code&gt; 를 눌러줍시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/7a3d6/Screen_Shot_2022-07-14_at_2.50.55_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.70886075949367%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACXklEQVQ4y61Uy47SUBjmWXwBn8KNL+PSlRtjjMa4MHHjxrhzYaKJsxFDpECQcJOZgA6U+3WgF1ootKX09DP/3ykDDOPKk3zp+S/n+2+nJxYEAU4BCOBsA3i+QLRcX+CP6aCsr6G6W9Ydn4sdK4QI2LE6sPDgRRmyfAHHdtCWGxiYFr6NLby+1PBTWbGfOEW4H0lcZzfSbDz/WIAyluFutjANA7bn4t3v73hS+ISWcXVNKA4JSen7/o40WoHwmXhPxfbhUkffUuH6Hin2KhM3hOPxGIVCAcViEaVSCblcLtyXf6HRaDDy+TzOK+eoFMuoVS5QrVZRqVTYv1arodVsYbVahYSyLCMlpdiYTCaRSqUgSRKTpNNpSEkJ8XicdZlMBl/PzthGSCQSSKfSyGazmE6nYQ91XWdB0zQoigLDMDCbzVgmdLtdqKrKOvJVFRXz+Zx9CVThZDKBbdthhv9zxShS/bKO6dUUg8EAvV4PrVaLv4ROp4N2u43hcIjRaMSZ0BCjQUTYTdmyLCagtImw3+/zQSqT9s1mk4nZ1utzC06tHeF2G954x3G4d8vlEqZpggKt12v+ks1aWmwjmaoiH5Kpp5vNZkcao/QJdJiM0SBMw+QApFssFpjrIUkE0hF0TYPruocXmzaUKU2yXq9z5FsXHQF8IUIE4qBcypBw8C9Tlp7nsYHISY6aTSTHK6oswu5PuXldbjeZe2dZgC+Q68t4+uMzniW/4H1J2sv88Ezs7ucL3D+52YRwXLzNxXHv1SPcf/MYDz+8PPl0/ZPwgDwI4G49KKsFY+nadxL+BTUGCfAjtbypAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 2.50.55 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 2.50.55 PM.png&quot;
        src=&quot;/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/f058b/Screen_Shot_2022-07-14_at_2.50.55_PM.png&quot;
        srcset=&quot;/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/c26ae/Screen_Shot_2022-07-14_at_2.50.55_PM.png 158w,
/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/6bdcf/Screen_Shot_2022-07-14_at_2.50.55_PM.png 315w,
/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/f058b/Screen_Shot_2022-07-14_at_2.50.55_PM.png 630w,
/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/40601/Screen_Shot_2022-07-14_at_2.50.55_PM.png 945w,
/dev-blog/static/eef85e88e91e0764fcb5b156e3bd5c72/7a3d6/Screen_Shot_2022-07-14_at_2.50.55_PM.png 990w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;메시지 봇이 활동할 채널을 지정해줍시다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Allow&lt;/code&gt; 를 누르면 해당 채널에 자동으로 App 이 설치됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/90712/Screen_Shot_2022-07-14_at_2.51.42_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0ElEQVQY032Qb4uDMAzG+/2/my/k6sQNvKLCPG09WxXrvz4jGY7tXlzg14TwJGki8jxHFEWQUiLLMvbruuI4Duz7/iKEAOccEpkgjmM0TYPbNUMiv7jGGAMy4b3HMAzMOI4MxVT8jrWW89M0sbfWoW5/cW87OPfU+9lDkOAUU/Js/hfSbdvGA2kDskoPUD89jhB4i67rIOhR3wplWTJKKRRF8aKua16pqipunKYp+r7nhrptYHTL55jnGZfkAkFT/4N+sywLQ4WnUUx31Np85B/qLny6QoRhPQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 2.51.42 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 2.51.42 PM.png&quot;
        src=&quot;/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/f058b/Screen_Shot_2022-07-14_at_2.51.42_PM.png&quot;
        srcset=&quot;/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/c26ae/Screen_Shot_2022-07-14_at_2.51.42_PM.png 158w,
/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/6bdcf/Screen_Shot_2022-07-14_at_2.51.42_PM.png 315w,
/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/f058b/Screen_Shot_2022-07-14_at_2.51.42_PM.png 630w,
/dev-blog/static/4b28f9d340e1373d1bbe819384a19921/90712/Screen_Shot_2022-07-14_at_2.51.42_PM.png 882w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Webhook URL 이 생성되었습니다.&lt;/p&gt;
&lt;p&gt;해당 URL 을 통해 메시지를 보내줄 수 있습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;Spring Boot 프로젝트에 연동하기&lt;/h2&gt;
&lt;hr&gt;
&lt;h3&gt;build.gradle&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;implementation &apos;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;squareup&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;okhttp3&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;okhttp&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4.10&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.0&lt;/span&gt;&apos;
implementation &apos;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;slack&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;backend&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.22&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.2&lt;/span&gt;&apos;
implementation &apos;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;slack&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;api&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;model&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.22&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.2&lt;/span&gt;&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slack 에서 제공하는 API 를 활용하기 위해 의존성을 추가해줍니다.&lt;/p&gt;
&lt;p&gt;첫번째 의존성은 Webhook 을 사용할 때 필요하기 때문에 토큰 기반을 사용한다면 필요없는 의존성입니다.&lt;/p&gt;
&lt;h3&gt;메시지 형식 커스텀하기&lt;/h3&gt;
&lt;p&gt;Slack API 에서는 메시지를 보낼 때 attachments 라는 필드를 통해 메시지를 JSON 형식으로 전송하고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://api.slack.com/reference/messaging/attachments&quot;&gt;Slack 메시지 형식 페이지&lt;/a&gt;에 들어가보면 메시지가 어떤 형식으로 보여지는지 확인해 볼 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attachment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;📝 체크리스트가 제출되었습니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#99CCFF&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pretext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;📝 체크리스트가 제출되었습니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token class-name&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;제출자명 : &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAuthor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token class-name&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;공간이름 : &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSpaceName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token class-name&quot;&gt;Field&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;작업이름 : &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getJobName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;thumbUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://d3ihz389yobwks.cloudfront.net/1597428501575899426169503000.jpg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;footer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;제출시간&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;valueOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LocalDateTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slack API 가 제공하는 &lt;code class=&quot;language-text&quot;&gt;Attachment.builder()&lt;/code&gt; 를 통해 원하는 형식의 메시지를 만들어봅시다.&lt;/p&gt;
&lt;h3&gt;토큰 + 채널명을 통해 메시지 전송&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sendMessageWithToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt; slack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;TOKEN&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chatPostMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;CHANNEL&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SlackApiException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/04ad9460fefee94779eb091f85998b5b/9cea8/Screen_Shot_2022-07-14_at_3.01.34_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 24.68354430379747%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQY032Qy06DUBCGeYwmJrUHOBQql1I4UKEUsN62LlzVy8KVW2NMdO9DGJ+hO1/Ahc/1GU5SQ9LYxZ+ZzD/55s8Ym+8fXl7fOD27IE5y4iTDD2ccBTFjL8C0XSzp7aibb72uDoVkZDoY1/cP3NzdUtctiTpG5QXZvNTgiT/9F9gHO65PnheEUYoxGBzgq4ZFvdIglZd6sbsmrPFOmr5s6TEcSZqm5evzg8f1GsOyXbLlJUXVks0XRLH6A21h+xIeCklZVbw/P3F1co4hTIdZsSLNSsIoIZymBFGCOwn3wrTX+6Ewpe5/AZw2nHIN5oSYAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.01.34 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.01.34 PM.png&quot;
        src=&quot;/dev-blog/static/04ad9460fefee94779eb091f85998b5b/f058b/Screen_Shot_2022-07-14_at_3.01.34_PM.png&quot;
        srcset=&quot;/dev-blog/static/04ad9460fefee94779eb091f85998b5b/c26ae/Screen_Shot_2022-07-14_at_3.01.34_PM.png 158w,
/dev-blog/static/04ad9460fefee94779eb091f85998b5b/6bdcf/Screen_Shot_2022-07-14_at_3.01.34_PM.png 315w,
/dev-blog/static/04ad9460fefee94779eb091f85998b5b/f058b/Screen_Shot_2022-07-14_at_3.01.34_PM.png 630w,
/dev-blog/static/04ad9460fefee94779eb091f85998b5b/40601/Screen_Shot_2022-07-14_at_3.01.34_PM.png 945w,
/dev-blog/static/04ad9460fefee94779eb091f85998b5b/78612/Screen_Shot_2022-07-14_at_3.01.34_PM.png 1260w,
/dev-blog/static/04ad9460fefee94779eb091f85998b5b/9cea8/Screen_Shot_2022-07-14_at_3.01.34_PM.png 1278w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;앱 Webhook URL 을 통해 메시지 전송&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sendMessageWithAppUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt; slack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt; payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;GONG_CHECK_APP_URL&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/7960f/Screen_Shot_2022-07-14_at_3.02.36_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 24.050632911392405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4UlEQVQY032QTUrEQBCF+yAyY8yPk9+O6XSSDj2DIqKMiqIOs9CNHkM8gws3InoOr/dJGgYGJS6KB1XFV6+eeH3/YHW7om56qrqjKGvSvCTJJEGUsBfM8MP4Tw39zczz95l4oVPx8PjE5cU5lTYobWg668DyQBPNslHgNjhOC2rdkaQlIkgU/eEZnbG0xlJIxdSL3LUNbAw6fLAz9blfr/n++uRuuURIvcAendJ0Pa2Zu6UBtu1gzF0Qxkx2Q26ur3h7eea4nSNyZTGLE8pKU1YNuVRkRfVvfr8zdBoMJhJ+AL6Mm5ZM9xBXAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.02.36 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.02.36 PM.png&quot;
        src=&quot;/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/f058b/Screen_Shot_2022-07-14_at_3.02.36_PM.png&quot;
        srcset=&quot;/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/c26ae/Screen_Shot_2022-07-14_at_3.02.36_PM.png 158w,
/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/6bdcf/Screen_Shot_2022-07-14_at_3.02.36_PM.png 315w,
/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/f058b/Screen_Shot_2022-07-14_at_3.02.36_PM.png 630w,
/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/40601/Screen_Shot_2022-07-14_at_3.02.36_PM.png 945w,
/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/78612/Screen_Shot_2022-07-14_at_3.02.36_PM.png 1260w,
/dev-blog/static/425f92df0f10fbdf7c926e59e4c7a9b8/7960f/Screen_Shot_2022-07-14_at_3.02.36_PM.png 1274w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Slack App 을 만드는 과정이나 코드를 작성하는 과정을 보았을 때 두 방법 모두 큰 차이점은 없는 것 같습니다. 그렇다면 외부 사용자 입장에선 어떤 방식이 더 좋은 접근성을 가지고 있을까요?&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;외부인 입장으로 봇 연동해보기&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;외부인의 입장으로 생각해봅시다.&lt;/p&gt;
&lt;p&gt;공책 서비스를 사용하고 슬랙으로 알림으로 받고 싶은데 Slack App 을 만드는 과정은 너무 복잡합니다.&lt;/p&gt;
&lt;p&gt;간단히 슬랙에 봇만 추가하고 싶습니다.&lt;/p&gt;
&lt;p&gt;뭔가 좋은 방법이 없을까요?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/7960f/Screen_Shot_2022-07-14_at_3.06.05_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 8.227848101265824%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAU0lEQVQI143MMQ6AIBAAQb8hgoKSI6AXiET//7O1MPYW221mWKIg+WCTjGQlph3jAqP1jO5n1mPmQEyFQYrS+o22Tj0vtHameX2nH5j5QOdJRXkAXek3UDoh/ikAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.06.05 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.06.05 PM.png&quot;
        src=&quot;/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/f058b/Screen_Shot_2022-07-14_at_3.06.05_PM.png&quot;
        srcset=&quot;/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/c26ae/Screen_Shot_2022-07-14_at_3.06.05_PM.png 158w,
/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/6bdcf/Screen_Shot_2022-07-14_at_3.06.05_PM.png 315w,
/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/f058b/Screen_Shot_2022-07-14_at_3.06.05_PM.png 630w,
/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/40601/Screen_Shot_2022-07-14_at_3.06.05_PM.png 945w,
/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/78612/Screen_Shot_2022-07-14_at_3.06.05_PM.png 1260w,
/dev-blog/static/5b442096e20bac6a05f41c6d6cf10719/7960f/Screen_Shot_2022-07-14_at_3.06.05_PM.png 1274w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Slack 에선 &lt;code class=&quot;language-text&quot;&gt;incoming-webhook&lt;/code&gt; 이라는 앱을 제공하고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/86e174019440241f9269eed983b40b7c/29114/Screen_Shot_2022-07-14_at_3.07.29_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxUlEQVQoz4WSy27TQBSG/XY8BRIPwFsgsWWBEBugElmVixCoQghYdIVUmhQlRaFp4iQk9ozHY48v9d1pfnROWsMmYvHpn/v5z5lj6SiFiHPk2y3qukZVVUjTFFEUIUkSGGMYGtNeWZas+7AAoHIVzMk5cL1F27awZzbORyMMh0MMBgP0T/uYTqdomqZ7dB/84OXbz3jz4BFQtbjGFoExUGHAB7IsY+d5nrPrOI55/peGA90Gs370B+g/7qH3sodnBy+w2Wzgax+r9RpaaziOA8/zIIRglVJCKcV7vu/DVwrqZp1KZa3GE3x79QFn30/x5egjGeYLl5MJp7lYLLBcLGHbNo+J+XzOc9L5yoUjJKQQXGfrq/0Tn2YjHNtjHP06w0xL5FcZRycX9CFhGHb675hKEJgIURQjTZOdw7uHT3Dv9VPcf3+AO88f4t3oBLGvcTG5gLNes1spJKdMuK7LqZNSmowQXBoyYWk/gJRUI4m6KNE2DVwVYOl4cFQIT/nwpGS35Io0CILOLRPs1jnl8W8F29UQOkJV7XosjhOEJoIOQoTGdIfpp/dB3VAUBSzPpEizAnVdobzpMWqHhmhutema/n/8AaTT6L8sq66aAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.07.29 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.07.29 PM.png&quot;
        src=&quot;/dev-blog/static/86e174019440241f9269eed983b40b7c/f058b/Screen_Shot_2022-07-14_at_3.07.29_PM.png&quot;
        srcset=&quot;/dev-blog/static/86e174019440241f9269eed983b40b7c/c26ae/Screen_Shot_2022-07-14_at_3.07.29_PM.png 158w,
/dev-blog/static/86e174019440241f9269eed983b40b7c/6bdcf/Screen_Shot_2022-07-14_at_3.07.29_PM.png 315w,
/dev-blog/static/86e174019440241f9269eed983b40b7c/f058b/Screen_Shot_2022-07-14_at_3.07.29_PM.png 630w,
/dev-blog/static/86e174019440241f9269eed983b40b7c/40601/Screen_Shot_2022-07-14_at_3.07.29_PM.png 945w,
/dev-blog/static/86e174019440241f9269eed983b40b7c/78612/Screen_Shot_2022-07-14_at_3.07.29_PM.png 1260w,
/dev-blog/static/86e174019440241f9269eed983b40b7c/29114/Screen_Shot_2022-07-14_at_3.07.29_PM.png 1920w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/e216b/Screen_Shot_2022-07-14_at_3.08.07_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30.37974683544304%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQY041Q2Q6DIBD0/3+vGn1ojVfTEu/aosIu04C1pw+dZMLCwg4z3jAMqOsaZVliHEesMMbgHXb/D72+7yHOAkVRQAiBqqogpXRN22vbFlaUmUFEH7RnxixkotfANE3doK7r0DTN86fvD7egNeEiJ1zkjEHOy8BV+ecyacRxjDAMEUUR/J2PIAiW2vdx2O+htYJNhtmA+GF5KyMLpRTyPEeWZW5NksTVNhrrKD+e0F1H3CaN66RAtLjwtoJdBb4z+yAbzJoxa3KkRyx33m3SF53/9iIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.08.07 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.08.07 PM.png&quot;
        src=&quot;/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/f058b/Screen_Shot_2022-07-14_at_3.08.07_PM.png&quot;
        srcset=&quot;/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/c26ae/Screen_Shot_2022-07-14_at_3.08.07_PM.png 158w,
/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/6bdcf/Screen_Shot_2022-07-14_at_3.08.07_PM.png 315w,
/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/f058b/Screen_Shot_2022-07-14_at_3.08.07_PM.png 630w,
/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/40601/Screen_Shot_2022-07-14_at_3.08.07_PM.png 945w,
/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/78612/Screen_Shot_2022-07-14_at_3.08.07_PM.png 1260w,
/dev-blog/static/f081ea8f2f41b9b4b8ec78f127966e8b/e216b/Screen_Shot_2022-07-14_at_3.08.07_PM.png 1904w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Add to Slack&lt;/code&gt; 버튼을 눌러 봇이 설치되길 원하는 채널을 지정해줍시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/c9d77/Screen_Shot_2022-07-14_at_3.09.31_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAkUlEQVQI152OWQqDMAAFvf9dWqMteJouaCUm1DUt0Zg4JTlCBwbe35vMGIOUEq0U27YROY4j+Q/ZvBiaVvKSCqnfLIshnnjvmeeZYRgYx5Fpmuj7nqqqEEJQliVFUZALwemcU16uWGvJnA981z35sRveB0IIqdA5x7quqTwat9YapVSy6xSPuuX2bLjXLbv3/AC9S+LAMnNhNgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.09.31 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.09.31 PM.png&quot;
        src=&quot;/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/f058b/Screen_Shot_2022-07-14_at_3.09.31_PM.png&quot;
        srcset=&quot;/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/c26ae/Screen_Shot_2022-07-14_at_3.09.31_PM.png 158w,
/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/6bdcf/Screen_Shot_2022-07-14_at_3.09.31_PM.png 315w,
/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/f058b/Screen_Shot_2022-07-14_at_3.09.31_PM.png 630w,
/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/40601/Screen_Shot_2022-07-14_at_3.09.31_PM.png 945w,
/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/78612/Screen_Shot_2022-07-14_at_3.09.31_PM.png 1260w,
/dev-blog/static/4be3b697f6c0e47a4b3aaf8ee5f7b7d5/c9d77/Screen_Shot_2022-07-14_at_3.09.31_PM.png 1964w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Webhook URL 이 생성되었습니다.&lt;/p&gt;
&lt;p&gt;해당 URL 을 복사하여 공책 서비스에 기입해주면 슬랙 알림 기능을 활용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/7960f/Screen_Shot_2022-07-14_at_3.12.12_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 24.050632911392405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3UlEQVQY042PzUrDQBhF50WENBOTNE2mM9M2k5/GkJbQ4iYgCiLWvS5069JXEHwPH/FIlYIihS6+zT3cw/3EzdU197sH2q5n3W/pN5c07YrZomSSGfwgRp6P/90+PzDPDznzAkYyQrTdmmEY0NahbU5RNeRFTaoMQZgcFf4WGzunri9IJhoRZTllu6Eol7iywcwccaLwZPSndEzoyZDXl2c+P95pqwaR2oplt8UVNfO8+l61f+EU2Q+L2d3d8vb0iBprRKIdrl6hppapWZAqS5qZk2QHPpIhvozwg4Qv3a+bYrnJQVUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.12.12 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.12.12 PM.png&quot;
        src=&quot;/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/f058b/Screen_Shot_2022-07-14_at_3.12.12_PM.png&quot;
        srcset=&quot;/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/c26ae/Screen_Shot_2022-07-14_at_3.12.12_PM.png 158w,
/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/6bdcf/Screen_Shot_2022-07-14_at_3.12.12_PM.png 315w,
/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/f058b/Screen_Shot_2022-07-14_at_3.12.12_PM.png 630w,
/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/40601/Screen_Shot_2022-07-14_at_3.12.12_PM.png 945w,
/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/78612/Screen_Shot_2022-07-14_at_3.12.12_PM.png 1260w,
/dev-blog/static/73ef6f152e76a1194db6992ddf774c6c/7960f/Screen_Shot_2022-07-14_at_3.12.12_PM.png 1274w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;짠. 외부인 입장에서도 손쉽게 슬랙 알림 기능을 사용할 수 있게 되었습니다.&lt;/p&gt;
&lt;p&gt;아무래도 토큰을 발급받고 권한을 설정해주는 작업보단 간단히 URL 만 기입해주는 것이 사용자 입장에선 더 간편할 것 같네요.&lt;/p&gt;
&lt;h3&gt;Incoming Webhook 앱을 통한 Webhook URL 을 통해 메시지 전송&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sendMessageWithIncomingWebhookAppUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt; slack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt; payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;INCOMING_WEBHOOK_APP_URL&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IOException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;코드 역시 Webhook URL 만 변경해주면 되기 때문에 사용자가 기입한 URL 을 가져와 사용할 수 있습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;외부 API 비동기 처리하기&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;현재 구조에선 Slack 에서 제공하는 API 를 활용해 요청을 보내고 있습니다.&lt;/p&gt;
&lt;p&gt;외부 API 를 사용하는 것이기 때문에 해당 기능에 장애가 생겼을 경우를 따져봐야합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/jobs/{jobId}/complete&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;submitJobCompletion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthenticationPrincipal&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; hostId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                &lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; jobId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                &lt;span class=&quot;token annotation punctuation&quot;&gt;@Valid&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; submissionService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submitJobCompletion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hostId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; jobId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    alertService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예를 들어, &lt;code class=&quot;language-text&quot;&gt;alertService.sendMessage(submissionResponse)&lt;/code&gt; 메서드가 정상적으로 작동하지 않아 무제한으로 대기하게 된다면, 해당 &lt;code class=&quot;language-text&quot;&gt;Controller&lt;/code&gt; 는 응답을 보내줄 수 없게됩니다.&lt;/p&gt;
&lt;p&gt;이를 방지하기 위해 우린 비동기 처리를 고려해볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;다양한 비동기 처리 방식 중에 현재 스프린트에선 스프링에서 제공하는 &lt;code class=&quot;language-text&quot;&gt;@Aysnc&lt;/code&gt; 사용하기로 했습니다.&lt;/p&gt;
&lt;h3&gt;@Aysnc 적용&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Aysnc&lt;/code&gt; 를 적용하는 방법은 단순합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@SpringBootApplication&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@EnableAsync&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GongCheckApplication&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;SpringApplication&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;GongCheckApplication&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Async&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt; slack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Slack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt; payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Payload&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Attachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAttachments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        slack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSlackUrl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; payload&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;비동기 처리가 되길 바라는 메서드에 &lt;code class=&quot;language-text&quot;&gt;@Aysnc&lt;/code&gt; 를 적용하고 &lt;code class=&quot;language-text&quot;&gt;@SpringBootApplication&lt;/code&gt; 이 적용된 클래스에 &lt;code class=&quot;language-text&quot;&gt;@EnableAsync&lt;/code&gt; 를 적용하면 됩니다.&lt;/p&gt;
&lt;h3&gt;AsyncConfigurerSupport&lt;/h3&gt;
&lt;p&gt;위와 같이 &lt;code class=&quot;language-text&quot;&gt;@Async&lt;/code&gt; 를 사용하면 단순하게 비동기 처리를 적용할 수 있지만 스레드를 관리할 수 없다는 단점이 존재합니다. 때문에 &lt;code class=&quot;language-text&quot;&gt;AsyncConfigurerSupport&lt;/code&gt; 를 상속받는 클래스를 작성하여 스레드를 관리해주도록 합시다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@EnableAsync&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AsyncConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AsyncConfigurerSupport&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Executor&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAsyncExecutor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt; taskExecutor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        taskExecutor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setCorePoolSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        taskExecutor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMaxPoolSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        taskExecutor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setQueueCapacity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        taskExecutor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; taskExecutor&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;CorePoolSize&lt;/code&gt; 기본으로 실행 대기하는 Thread 의 수&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;MaxPoolSize&lt;/code&gt; 동시 동작하는 최대 Thread 의 수&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;QueueCapacity&lt;/code&gt; MaxPoolSize 초과 요청을 저장할 수 있는 Queue 의 수&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;주의사항&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@Async&lt;/code&gt; 를 사용하기 위해선 주의해야할 점이 몇가지 존재합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;public&lt;/code&gt; 메서드에서만 사용 가능&lt;/li&gt;
&lt;li&gt;자가 호출 불가능&lt;/li&gt;
&lt;li&gt;QueueCapacity 를 초과하는 비동기 메서드 호출 시 &lt;code class=&quot;language-text&quot;&gt;TaskRejectedException&lt;/code&gt; 발생&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/jobs/{jobId}/complete&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;submitJobCompletion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthenticationPrincipal&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; hostId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                &lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; jobId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                &lt;span class=&quot;token annotation punctuation&quot;&gt;@Valid&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SubmissionRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;SubmissionResponse&lt;/span&gt; submissionResponse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; submissionService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submitJobCompletion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hostId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; jobId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        alertService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;submissionResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TaskRejectedException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;저희에게 해당하는 사항은 &lt;code class=&quot;language-text&quot;&gt;TaskRejectedException&lt;/code&gt; 에 대한 방어 처리이기 때문에 해당 메서드를 사용하는 쪽에 방어 코드를 작성해주도록 하겠습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;메시지 봇을 적용하는 두 가지 방법을 비교해본 결과 개발하는 입장에선 큰 차이를 느끼지 못했습니다.&lt;/p&gt;
&lt;p&gt;하지만, 공책 앱이 public 하게 distribute 되는 것이 아닌 이상 외부인이 공책 앱을 설치하고 사용하는 것에 불편함이 있을 수 있다는 것을 생각해볼 수 있었습니다.&lt;/p&gt;
&lt;p&gt;때문에, 외부인의 접근성을 고려했을 땐 Webhook URL 을 활용하는 것이 훨씬 더 간편하다는 것을 알 수 있었습니다.&lt;/p&gt;
&lt;p&gt;또한, 외부 API 의 의존성을 최소화하기 위해 비동기 처리를 생각해볼 수 있었습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://velog.io/@jimin3263/Spring-boot-Slack&quot;&gt;https://velog.io/@jimin3263/Spring-boot-Slack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vixxcode.tistory.com/188&quot;&gt;https://vixxcode.tistory.com/188&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://velog.io/@rudwnd33/springboot-slack&quot;&gt;https://velog.io/@rudwnd33/springboot-slack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://leeborn.tistory.com/entry/Spring-Boot-%EC%8A%AC%EB%9E%99-webhook-%EB%A9%94%EC%8B%9C%EC%A7%80-%EB%B3%B4%EB%82%B4%EA%B8%B0&quot;&gt;https://leeborn.tistory.com/entry/Spring-Boot-슬랙-webhook-메시지-보내기&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://cheese10yun.github.io/slack-bot-spring/&quot;&gt;https://cheese10yun.github.io/slack-bot-spring/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://slack.dev/java-slack-sdk/&quot;&gt;https://slack.dev/java-slack-sdk/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://steady-coding.tistory.com/611&quot;&gt;https://steady-coding.tistory.com/611&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://velog.io/@gillog/Spring-Async-Annotation%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%A9%94%EC%86%8C%EB%93%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&quot;&gt;https://velog.io/@gillog/Spring-Async-Annotation비동기-메소드-사용하기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[OAuth 2.0 흐름]]></title><description><![CDATA[안녕하세요. 공책 팀 백엔드 팀원 찬입니다! 저희 공책팀에선 회원가입 & 로그인 기능을 Github OAuth를 활용해 구현해보았는데요. 간단한 OAuth 소개와 흐름을 글로 남겨보고자 합니다. OAuth…]]></description><link>https://gong-check.github.io/dev-blog/BE/찬/게시물 제목/oauth/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/찬/게시물 제목/oauth/</guid><pubDate>Sun, 17 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. 공책 팀 백엔드 팀원 찬입니다!&lt;/p&gt;
&lt;p&gt;저희 공책팀에선 회원가입 &amp;#x26; 로그인 기능을 Github OAuth를 활용해 구현해보았는데요.&lt;/p&gt;
&lt;p&gt;간단한 OAuth 소개와 흐름을 글로 남겨보고자 합니다.&lt;/p&gt;
&lt;h2&gt;OAuth란?&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;회원가입 혹은 로그인 하실 때 아래와 같은 버튼을 통해 진행하신 경험이 있으신가요?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 22.151898734177216%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVQY032OPS8EURSG7x8Rf0LUSmqJRSQ+srI+gpJGlBqFhEJCgUKu3aGh2KxFsXZRaXZ/gCASVDOzO3PtPfeRmSkkCic5OU9y3jx5lQMwHq+tXl6aPWA0cQTR23Py4ap6zeR0nqmZPOVKldXdR4aWz1nZuqVrBRPHhGGYZp1zKEmNO+h9xemBArdNpw21egULaK0ZHhkjNz7B4fEJo+s3DBRKDC6dpZJSsYjnZWytRSXQ7ZQxH/3Yrz6+25dEBt6DzzTUuH9gdm6BwvwitbsGm0dP5NYu2NirY0UIAh/f938bgsM5sJJtwiIC4rL7zySCv/wDnBMUZFGxq34AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_2.png&quot;
        title=&quot;img_2.png&quot;
        src=&quot;/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png&quot;
        srcset=&quot;/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/c26ae/img_2.png 158w,
/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/6bdcf/img_2.png 315w,
/dev-blog/static/ae80d1642c2240fbbdaa6b50f593e137/72799/img_2.png 320w&quot;
        sizes=&quot;(max-width: 320px) 100vw, 320px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;아마 다들 경험 해보셨을거라고 생각합니다.&lt;/p&gt;
&lt;p&gt;그렇다면 여러분들은 이미 OAuth를 사용하고 있습니다!&lt;/p&gt;
&lt;p&gt;OAuth 2.0 공식 문서인 &lt;code class=&quot;language-text&quot;&gt;RFC 6749&lt;/code&gt;에는 다음과 같이 OAuth를 정의하고 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The OAuth 2.0 authorization framework enables a third-party application to obtain limited access to an HTTP service,
either on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP
service, or by allowing the third-party application to obtain access on its own behalf. This specification replaces
and obsoletes the OAuth 1.0 protocol described in RFC 5849.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OAuth 2.0 인가 프레임워크는 리소스 소유자와 HTTP 사이의 승인을 통해 사용자를 대신하여 혹은 제3의 애플리케이션이 자기 자신을 대신하여 접근을 얻도록 하여 제3의 애플리케이션이 HTTP 서비스에 대한
제한된 접근을 얻을 수 있도록 하는 표준 프로토콜이라고 소개하고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;주의 : 이 글은 OAuth2.0 기준으로 작성되었으며, RFC 5849에 기술된 OAuth1.0은 대체되었으며 사용하지 않는 상태입니다.&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;OAuth가 정의하는 역할&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;OAuth의 흐름을 알아보기 전에 OAuth가 정의하는 역할부터 알아보겠습니다.&lt;/p&gt;
&lt;p&gt;OAuth는 총 4개의 역할을 정의하고 있는데 다음과 같습니다.&lt;/p&gt;
&lt;h3&gt;1. 리소스 소유자 (Resource Owner)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;제한된 리소스에 대해 접근 요청을 할 수 있는 사용자 입니다. 쉽게 말해 카카오, 구글과 같은 외부 플랫폼의 리소스를 소유하고 있는 사용자입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2. 리소스 서버 (Resource Server)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;제한된 리소스를 호스팅하는 서버로써 Access Token을 사용해 제한된 리소스에 대한 요청을 받고 응답합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;3. 클라이언트 (Client)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;인가를 이용해 리소스 소유자를 대신하여 제한된 리소스에 대한 요청을 만드는 애플리케이션입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4. 인가 서버 (Authorization Server)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;리소스 소유자를 성공적으로 인증하고 인가를 얻어 클라이언트에게 Access Token을 발급하는 서버입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;OAuth 흐름&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;OAuth의 흐름은 앞서 정의한 4개의 역할의 상호작용으로 이루어집니다.&lt;/p&gt;
&lt;p&gt;아래는 타임라인 순으로 정리한 대략적인 OAuth의 인증 흐름입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/160a3/img_3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 102.53164556962024%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4ElEQVQ4y41UyU4iURQtYoyJOyARtvoBurE3fAjxC1y4ceXWlX6DS9euJMS4a20Q0S4moSwm24ESBFRQBBGcTufc9KugaYeXPG69++4979wJLZVKYWVlBfV6HVzPz88it7e3sbq6im63C7Xu7+9FFwqFbN3LywvW1tYQDAblrLncbmiaBp/Ph06nI8r19XUMDQ2JfmZmxnb2+/2iczgcCAQColtYWBAd9+LiIqUG79iYKAzDEKO5uTlx8nq98Hg8woxM3W43XC6X2M7Pz4vt1OQknKOjcDmdGB4ehvZjeloMZmdnbSamaWJiYkL0y8vLtn5paUl04+PjSKfTomMKRkZG4HQ6sbm5CY2vb2xsoFgsIp/P408uh7Jl4efWFnZ3d8Xp9fXVBk0kEqhWq2/ynS8UxFdyyJ+zszNkMhmwQEldR840UbIstFotO/EK9OHhAY+Pj28eolT512is6zri8TiSySRi8Tis83NcXFyg2Wzi/bq5uZGcDgLyrGw10j49PZUwCEK2V1dXwu76+lqcyIibj/OOLAcBeeZDNkPmr1AoiMzlcjg+PkalUoH1L2y+zn17eyt3nwKSIUHoXCqVRBK4XC4LKHNDUO52u41arfY1QxaEOTw6OpKQGSrZUPK+3+/j6elJvjlRXwKyocPhsADT4fLyUhhmDEMKxO+TkxPJM5mqcfwvIF8mE7UUk3ang71wGL9DvxANhRCLxSQVDLnX630PcLCBGWbWNHFoGIjpuqSClSbTT0N+D6iMyCJ1cCBjGIlEZNQI+GVRPgIkw52dHcltNpuVonEAGDbvvgXI3HErI/YmwVgkOtzd3UlrcQDYBY1GQyTTwW8bUKEPrl6/L+GSEbtAVZe9yWnhuPEB9inBbIakXcjnxZlzrO/vo3h4iHq1Kk1OJ4JREpAtpADZ6JQEtGeZWTBSKRwkk4gnEtiLRpHNpHFuWeLwfhFA/duoxTMftBl+tFSRvrsJ+BeTGdhPIMOhgQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_3.png&quot;
        title=&quot;img_3.png&quot;
        src=&quot;/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/f058b/img_3.png&quot;
        srcset=&quot;/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/c26ae/img_3.png 158w,
/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/6bdcf/img_3.png 315w,
/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/f058b/img_3.png 630w,
/dev-blog/static/1b926cdcd0b8230910665d7177d06e4c/160a3/img_3.png 682w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;편하게만 사용했던 OAuth 뒤로 수많은 상호작용이 이뤄지고 있다는 것을 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;너무 복잡하다 보니 아직 위의 흐름만 봐선 OAuth의 인증 흐름이 와닿지 않으실 수 있습니다. (제가 그랬습니다..)&lt;/p&gt;
&lt;p&gt;Github Oauth를 통해 구체적인 예시를 들어보겠습니다.&lt;/p&gt;
&lt;h2&gt;Github OAuth&lt;/h2&gt;
&lt;hr&gt;
&lt;h3&gt;인증에 앞서…&lt;/h3&gt;
&lt;p&gt;Github OAuth 뿐만 아니라 다른 플랫폼을 이용하더라도 먼저 클라이언트를 리소스 서버에 등록해야 합니다.&lt;/p&gt;
&lt;p&gt;Github에선 Setting -&gt; Developer Settings -&gt; OAuth Apps에 가시면 리소스 서버에 등록할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 582px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 106.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4UlEQVQ4y42U6W7aUBCFUZWWgLeLbWzj3cYbJoQAaTaapK2a12gjpYv6/g9wqhljQgit+uPT4IXjWc7czuX6I9b3D7i5f8BseYXzqzusLm9xfn2Py/Unvr6++8K/rz58RjSuYDoBLDeGNYpguzGE6WK+vMTTz9/oROMJ3CiHF+UwnRC2l8D2Uo6On/KzIKnghhmjGSNI2hCysCBp1iYO+b7jJ+hMZiuU0yWK6QJ5vUCcVpBVk18i+qr5AmVgQ9UdjruQMD3vhEnJ6Xf7Au96GnPUVZ45VvF2h6OWroJjWd+KtcId6olhhxgMPUa3m/5Q+cNRxP3pKcarTPubKl4JFvUZomyKrJojzqewnGdxggSpxEPsi7FgktcYlzNUJ0uU0wV008Wbt1JTXlfhyO3Yob2mzFvRVrgTxAUMO2im6yYYWD6E4TKcoeGiKw1e0xfoHxJMixO2ySgYw/ISuCFZqPkI9ZHYn+j+dF+UXE0XKGqyzBn3kcqmj7T+klRzm8EhXmVITicbUPrvegI9Wd9gQNaGTWkb/+3+8W+wDxVh8zSpZ7tTpHtt2f+dYVbNeL2icQ0/LhGkFfykhB8XGG68SINSBg4UfQNls7ctW8FiMkc+OQOtIHlyOr9APX8PP8rRpc3pa+j2NRxLYodm0mSbdq9b0Y4XZZyFvzkggrhEmFZQB06zEZqNnnDR00ZNFKPtpmj6iN3wIkOaKPvQT2FQiW7M0XSiZgXdFLpXQvcK6H4Fwy9hjiJ+j55TpH7vlDxjy9Sn56hOFkyYFJBVA7LYlCOGW2Tt+SRqebHL+WSOMJsgLOYIyiX8/IwJyhW87JSHRAOjfQ/TCZ97+9bZnXoniivIkgVF8yGpAfqqD1kLMbAzCCuAPnT5NCLrtP36pw/Tu1Oc/LjB4sct5t/XWP26R/10ATH2YLgTCCeFpJn/ZepG8PYU1eMFpo83qL9dYfa4RvZ1BZEFGDgFhB1xLw+Vd4g/wcEZc/k/ti8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_4.png&quot;
        title=&quot;img_4.png&quot;
        src=&quot;/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png&quot;
        srcset=&quot;/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/c26ae/img_4.png 158w,
/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/6bdcf/img_4.png 315w,
/dev-blog/static/95e52fc31b4fd081137aef6ac7d8eea1/7c1cd/img_4.png 582w&quot;
        sizes=&quot;(max-width: 582px) 100vw, 582px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이 때, CallBack Url을 등록해야 하는데요. CallBack Url이란 리소스 소유자가 인증을 마치고 사용자를 redirection 시킬 url을 의미합니다. 인증이 성공하면 Authorization
Code를 발급해 주는데 이를 redirection하는 url로 발급합니다.&lt;/p&gt;
&lt;p&gt;등록을 완료하셨다면 Github에서 Client_id와 Client_secret을 발급합니다. 이 데이터는 클라이언트가 추후에 인가 서버에 Access_token을 요청할 때 사용됩니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;주의 : 절대로 Client_secret은 유출되어선 안됩니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;1. 리소스 소유자의 로그인 요청&lt;/h3&gt;
&lt;p&gt;리소스 소유자가 저희가 만든 서비스(공책) 에서 Github 로그인을 요청합니다. 저희는 이를 Github의 인가 서버로 보내줘야 합니다.&lt;/p&gt;
&lt;p&gt;Github의 인가 서버의 url은 &lt;code class=&quot;language-text&quot;&gt;https://github.com/login/oauth/authorize&lt;/code&gt; 입니다.&lt;/p&gt;
&lt;p&gt;이때, 추가적으로 인가 서버에 여러 정보를 쿼리 스트링에 담아 보내는데요. 보통 아래에 기술한 정보를 같이 보냅니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;client_id&lt;/code&gt; : OAuth App에 등록할 때 발급받은 client_id를 의미합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;redirect_url&lt;/code&gt; : OAuth App에 등록할 때 등록한 CallBack url을 의미합니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;scope&lt;/code&gt; : 클라이언트가 부여받은 리소스 접근 권한&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2. 로그인 페이지 응답 &amp;#x26; 아이디, 패스워드 입력&lt;/h3&gt;
&lt;p&gt;로그인 요청이 성공적으로 인가 서버에 도달한다면, 다음과 같은 로그인 페이지를 응답합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 185.44303797468353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE5UlEQVRIx5VWSY8bRRT2b4EbSCCkgFguHBCIAwGECEQ5gLggwZETFyQEEgiBFOWAIkQyJJnJCkQggqJIYSYhIWQmYZZ4xtvYHi9tt91td3vrpaq6P/Sq2h07tmegpM+vuurVV6/e4qoEprQwDMckYwwiCMbGZrXErIkgIihXqvjk08/xxVdfo21Ze5ImZlnIuZD9bw4fwca9JP5YvIYTpxbk2HDufxEOLVxcuo6ri0v44eQ8llfujFk/lZAW7wZqnufBcZx4MxqepZ/AXm3EX3sFRFooRADGhfTLNDAJHmF3PcqEhOMxDFx/Jvq7zD2o5/kMCZcIPQZnCkjR9Tn6jhf3Sc7SvU84ohTv6HhgIsDvVxYxN38e380t4NrN26D49hxP6dO6aO2ehL2BJxcf/vYYfrt8FSdO/yhBrdt3x3RnEsYKktAFEyGOnTyL46fO4cjR47hw8VJE6Pw3QucBcjr2VmYb6VwByVQO2Xwp9uk0/ZkWDr9psccCaanPg5jEY3xCd4JwOEGLSS7fXZVI5/JIZbZl/8rVJSz9eRN/r9wFDxDrOtH6CQvJN5WaDr1pYjOVxcZmCsVyFaWKhlQmh41kCpvprCQslioo7JTj48eEo/nW6Q0kES1eXU8ild3G2kYS+WIJya0Mbt5axvUbt7B8ZxU3bt3Gyj9rMnjD/IwtpF1ogqTHg9hvJH0ewvWF9CEd02MCLABECPndj4LXd4iQKwtpB18SCQn6VuOqr4Kj+lRVlKNkQC+qoMGYD32GptmGVqtDq+uoajU0mgYMsyXH6LuuN1AslVGt1WF3uvAZbcIkwRDOkJAmS5qOlfU01re2cfdeBvcyRaTyFawmc1jbzGEjVcDyWgp3NtLY0QxYfQaz66E1gp4TEdLZCwaD3gX0bihR7wSo2cHIdwi9B6mjWRyVlo9Ki0lZbTPkGz7yDReccySsvo+c7oIL5UOfqQAw+T85CQoSBUwlewgRhOi4geQQREhmNjocRYNjx1TINzzk6g5yuqPkELqDYtNFyXCx01SgPo0ZHU/6NkFlVKlqyGSzKBR3kM8X5HXJhYDvM/hMge5m2pxIUtoA27qDbM1BWnOwVR2g3nbBiFBF2cJ2sSSroliqwrQ6Mj3IvzFcJZu2h7LhoGq6qLZc1Nqu7Ld7kYUyfxhXl1AEuhuGdwgbu1cEgkAgDAXCYByu58tUUoQ+l0wh/aMGI8xDYMrYA3BlIUSJ3Rk4MLodmL1xtHpdNDoWarYJvdOG0bUndIboDlxVehDAl7e/x6On9uO5c4fw9NmDEs+cPYgnzxzAyxffx9uXPsKrv36I5y+8i6fOvBXrEGjNIydfwbH1n6OniAA+++soHp57CftOv4knFt6I8dj8a3jhp/fwzuWPsf+XD/DsuUN4fP71MZ19pw/gobkXcXT1vCIkM61+Xx6rbrcmULWaKLbqKLcb0Cxjqk7dNmH3ByrKFFF6PVAwAhEijBBECIUKVCjn78tR0Dxx0CMqQc8IIcSuLyoV+tmgIiAOkgn6oTYYDJDJ5lCuVFCr1ZHOZJEvFFDI51ExHGzVfGxpHiotKlMmkWv4KJksfkQpwujxSKXVNExYlgXLtmXfNFswjCbsPkPN4tDaDK2+gNHl0G2Ous1hdpk8nXykEuHQ1NEjhxMvupEjhsFIBag++U8dO8C/ALTjvXn7g14AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_5.png&quot;
        title=&quot;img_5.png&quot;
        src=&quot;/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png&quot;
        srcset=&quot;/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/c26ae/img_5.png 158w,
/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/6bdcf/img_5.png 315w,
/dev-blog/static/9e237347b9f2cc3191fa59498e994b4d/72799/img_5.png 320w&quot;
        sizes=&quot;(max-width: 320px) 100vw, 320px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;리소스 소유자는 본인의 Github 아이디와 패스워드를 입력합니다.&lt;/p&gt;
&lt;h3&gt;3. Authorization Code 발급&lt;/h3&gt;
&lt;p&gt;리소스 소유자가 올바른 아이디와 패스워드를 입력했다면 인가 서버는 처음 저희가 Oauth Apps에 등록한 CallBack Url로 소유자를 redirection 시킵니다. 이 때, 깃허브는 쿼리 스트링에
Authorization Code를 발급합니다.&lt;/p&gt;
&lt;p&gt;저는 CallBack url을 &lt;code class=&quot;language-text&quot;&gt;localhost:3030/callback&lt;/code&gt; 으로 설정했으니 다음과 같은 Url로 redirection 될 것입니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt; http://localhost:3030/callback?code=24b7163439c514cdf123&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;4. Access Token 요청&lt;/h3&gt;
&lt;p&gt;클라이언트는 발급받은 Authorization Code를 client_id, client_secret과 함께 전달해 Access Token을 요청합니다.&lt;/p&gt;
&lt;p&gt;Github에서 제공하는 Access Token 발급 api의 형식은 아래와 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/cab43/img_6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQoz51S2W7DMAzL4462a07Ht3N2bdf//zwOVJPsADZgeyAkyxZJ2c5KFWDTCSZM0GGCjbNEE+cPLOvG9ijbgKqNKL+h0hFF45GR0A9nuO4Vcbyim29bJNL0JmtGkrK5NgmV/oradChUQFa1ASaMovC4L/F0qH7E80uN3bH5FZmyPbrpKqQs7HP1L2yEretRKo+HXSFR+wF5bdHPN7g0/5k4I4lLJxwrIwXtR9Q6IQ5nca1X+AEmTlKzaZaacj1snCRfXcodxuEih/PGyWFlO/Snm+RsoCDdcu26e+4l3nOKU3BzSCV+BY7KnK8Yx8umblaHSy4ul+9EQ5yIUQjZTFK+8KHQcqjWcVPlHX8mWkdf9zgmX58g4Tt/EelKXKrRZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_6.png&quot;
        title=&quot;img_6.png&quot;
        src=&quot;/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/f058b/img_6.png&quot;
        srcset=&quot;/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/c26ae/img_6.png 158w,
/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/6bdcf/img_6.png 315w,
/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/f058b/img_6.png 630w,
/dev-blog/static/4e260fa0ec68325306be8d154b0a4137/cab43/img_6.png 755w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;클라이언트(공책)에선 다음과 같은 HTTP 요청을 통해 Access Token을 요청할 것입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;POST https://github.com/login/oauth/access_token

{
    &quot;client_id&quot; : &quot;공책 client_id&quot;,
    &quot;client_secret&quot; : &quot;공책 client_secret&quot;,
    &quot;code&quot; : &quot;code&quot; 
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;올바른 데이터를 보냈다면 Acess Token을 발급할 것입니다.&lt;/p&gt;
&lt;p&gt;HTTP 응답 형식은 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bbf7/img_7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20.88607594936709%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlklEQVQY032Pyw6DIBBF/QlF8QkMBWMFutBquuv//9NtKF3UpHVxcpKZyc3cTBoHGm+QxoPGAGU94qyoJXI+IOfiL+nm6IyLC0SYIdwM6T3UdUnMd1DEbZDTAu12kNvfjvvvkEMg6xRo86AlwK4PTOsTgwkoagXW6kRDYO2HJvHru+is6jTKnlAOhBhe9RasUadVzyq/AFJgblVZm752AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img_7.png&quot;
        title=&quot;img_7.png&quot;
        src=&quot;/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/f058b/img_7.png&quot;
        srcset=&quot;/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/c26ae/img_7.png 158w,
/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bdcf/img_7.png 315w,
/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/f058b/img_7.png 630w,
/dev-blog/static/484bc699274c83a9d35dbf249b7aa0da/6bbf7/img_7.png 716w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;5. Github Profile 요청&lt;/h3&gt;
&lt;p&gt;발급받은 Access Token을 통해 클라이언트(공책)는 Github에게 리소스 소유자의 Github Profile을 요청할 것입니다.&lt;/p&gt;
&lt;p&gt;Github에서 제공하는 사용자 Profile api의 형식은 아래와 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;GET https://api.github.com/user&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;클라이언트(공책)에선 다음과 같은 HTTP 요청을 통해 Access Token을 요청할 것입니다. 이 때 Authorization 헤더에 발급받은 토큰을 담아 보냅니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;GET https://api.github.com/user

&quot;Authorization&quot; : &quot;Bearer access_token&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;올바른 Access Token 이라면 Github는 사용자 Profile을 응답합니다.&lt;/p&gt;
&lt;h3&gt;6. Jwt Token 발급&lt;/h3&gt;
&lt;p&gt;클라이언트(공책)에선 payload에 사용자 식별값을 넣어 Jwt Token을 생성해 전달합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Accept: application/json
{
    &quot;token&quot; : &quot;jwt.token.here&quot;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr&gt;
&lt;h2&gt;마무리&lt;/h2&gt;
&lt;p&gt;이번 공책 프로젝트를 통해 처음으로 OAuth 인증 과정을 구현해 보았는데요. 생각보다 구현할 양이 많아 굉장히 놀랐습니다. 외부 API를 사용하기 때문에 테스트 작성에 대한 고민도 많았습니다. 글이 꽤 길지만
처음으로 OAuth를 접하시는 분이라면 이 글이 도움이 됐으면 좋겠습니다. 저에게 OAuth 인증 과정을 믿고 맡겨준 공책 팀원들 너무 감사합니다!&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://datatracker.ietf.org/doc/html/rfc6749&quot;&gt;https://datatracker.ietf.org/doc/html/rfc6749&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps&quot;&gt;https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.github.com/en/rest/users/users#get-a-user&quot;&gt;https://docs.github.com/en/rest/users/users#get-a-user&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://jaeseo.tistory.com/entry/OAuth-20-%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95&quot;&gt;https://jaeseo.tistory.com/entry/OAuth-20-%EC%9D%B8%EC%A6%9D-%EA%B3%BC%EC%A0%95&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[SonarCloud 적용기]]></title><description><![CDATA[안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 오리입니다 :) 이번 글에서는 저희 팀에서 SonarCloud를 적용하면서 생겼던 문제들에 대해서 이야기해볼까 해요. SonarCloud…]]></description><link>https://gong-check.github.io/dev-blog/BE/오리/sonarcloud/sonarcloud/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/오리/sonarcloud/sonarcloud/</guid><pubDate>Thu, 14 Jul 2022 10:30:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 오리입니다 :)&lt;/p&gt;
&lt;p&gt;이번 글에서는 저희 팀에서 SonarCloud를 적용하면서 생겼던 문제들에 대해서 이야기해볼까 해요.&lt;/p&gt;
&lt;h2&gt;SonarCloud 도입 배경&lt;/h2&gt;
&lt;p&gt;프로젝트를 진행하다보면 많은 코드리뷰가 진행이 되고 진행이 될수록 아래와 같은 고민을 하게 되었어요.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;프로젝트의 코드 수준을 올리고 싶다.&lt;/p&gt;
&lt;p&gt;이를 위해서 모두가 코드리뷰를 하지만 정확한 분석이 있었으면 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;백엔드의 경우 5명의 팀원이 코드리뷰를 잘해주고 있기는 하지만 사람마다 보는 기준이 다르기도 하고, 사람인지라 보지못하고 넘어가는 코드들도 많았어요.
코드에 대한 일관성을 지키고나가야 프로젝트가 오래 진행되었을 때 유지보수하기 편한 코드가 된다라는 생각을 하게 되었습니다.&lt;/p&gt;
&lt;p&gt;결국 코드 품질을 올리는 여러가지의 방법이 있지만, 아무래도 백엔드 개발자이다보니 눈에 보이는 리포트가 있으면 좋겠다라는 생각을 했어요.
&lt;code class=&quot;language-text&quot;&gt;테스트코드&lt;/code&gt;에서 테스트가 모두 통과하면 정상적으로 로직을 잘 구현한지 확인할 수 있다거나, &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt;가 정상적으로 돌아간다거나 하는 등과 같은 가시적인 리포트가 필요했던 거죠.&lt;/p&gt;
&lt;p&gt;그러던 와중 &lt;code class=&quot;language-text&quot;&gt;SonarCloud&lt;/code&gt;라는 code analysis 서비스를 확인하게 되었고 Pull Request에서 리포트 형식의 결과물을 보여주는 코드 품질을 확인하기 위해서 도입하게 되었습니다 :)&lt;/p&gt;
&lt;h2&gt;SonarCloud란&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;SonarCloud is a cloud-based code analysis service designed to detect code quality issues in 25 different programming languages, continuously ensuring the maintainability, reliability and security of your code.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;SonarCloud는 말그대로 정적 코드 분석입니다. 각각의 개발 언어에서 지정된 코드 품질에 대한 포맷을 가지고 코드를 분석하여 코드의 유지보수성, 안정성 및 보안 등을 지속적으로 관리해주죠.&lt;/p&gt;
&lt;p&gt;SonarCloud는 issue와 security hotspot이라는 클 틀안에 &lt;a href=&quot;https://docs.sonarcloud.io/#what-does-sonarcloud-detect&quot;&gt;관리&lt;/a&gt; 를 해주며, 수정할 수 있는 각각의 문제들에 대한 리포트를 제공해줍니다.&lt;/p&gt;
&lt;p&gt;위처럼 제공한다면 36개의 code smell과 커버리지에 대한 이슈를 확인할 수 있을 것 같아요.&lt;/p&gt;
&lt;p&gt;다만 SonarCloud는 기본적으로 Automatic Analysis 방식을 default옵션으로 제공하는데요, 지금부터 진행하게될 SonarCloud의 방식은 해당 옵션을 사용하는 것이 아닌 CI-based Analysis 방식을 사용하게되기 때문에 어떻게 CI-based 방식으로 변경하였는지를 이야기해볼까 합니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Automatic Analysis 방식은 Jenkins나 github action과 같은 CI 툴을 사용하지 않고 자동으로 SonarCloud에서 분석해주는 방식을 말해요. SonarCloud 서비스에 저희 github repository에 대한 권한이 있고 등록하여 설정만 해둔다면 repository에 올라온 코드에 대해서 트리거를 알아서 발생시키고, 자동으로 분석 결과를 보내주는 방식이죠.&lt;/p&gt;
&lt;p&gt;해당 방식을 고려하지 않은 이유는 Automatic Analysis를 사용하게 되었을 때 자동적으로 들어오는 리포트의 타이밍을 제가 컨트롤하고 싶다라는 생각이 들었고, 굳이 CI를 따로 진행하는데 해당 스크립트에 CI-based를 추가하여 사용하지 않을 이유가 없었기 때문입니다.
Automatic Analysis에 대한 설명은 아래 링크를 참고해주시면 좋을 것 같아요!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.sonarcloud.io/advanced-setup/automatic-analysis/&quot;&gt;https://docs.sonarcloud.io/advanced-setup/automatic-analysis/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;SonarCloud 간단 적용&lt;/h2&gt;
&lt;p&gt;앞서 이야기한대로 CI-based 방식을 사용하고자했기 때문에 몇가지 작업들을 거쳐야해요. CI build 스크립트를 짜고, (gradle프로젝트를 기준으로) build.gradle에 스크립트를 수정하는 등과 같은 작업들을 거쳐야합니다. 하지만 기본적으로 SonarCloud에서는 튜토리얼에 맞게 모든 튜토리얼 코드들을 잘 제공해주기 때문에 “잘” 따라서 가기만한다면 문제없이 적용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;먼저 SonarCloud에서 분석할 Repository의 상위 Organization account에 SonarCloud를 설치해야합니다.&lt;/p&gt;
&lt;p&gt;본인이 아닌데 코드분석을 요구하게 될 경우 보안적인 이슈가 많을 것이므로 많은 보안 정책을 따라주어야해요. 따라서 SonarCloud에서 분석을 진행하기 위해서는 repository를 관리하는 상위단의 Organization account에 SonarCloud를 설치해두는 것이죠. (개인이라면 개인 계정에 설치합니다.)&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/398007a19ea862836f25b28c29a8426a/67d6a/2.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 160.126582278481%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAAAsTAAALEwEAmpwYAAADlUlEQVRIx51WyY7jNhD15+U3gvmM5JZ8QS6dc05zzCmHmSBAjoPMIUG327a8SN7bi3aJ4ia+oEq22nbbTiMEHoqmpOJ7tZDuCKlxibJSrSUoABJo1++hc/PhwZm2Duafz7DeF6ianMqzTd/tkD/UDjYLUf74DcTDB1hiKWS72X86vJRaCAlpaujHP6BHX1FZ8Fp54vDScedW/JSpYaxrLMBQxnIIaO2W7KsM87LCJJijNxjBG/kYjsYYjX0MhhN4Yx/BfMlMrzJs5R1Ac3I4XazYAX0czJYY+VOek50t1q3sS3QqqWFsDVs7tsf55aClI+i50oYhD1Zr2zDUxiJJEqxfXthGUYQwjPCy2WCz2WK722G9fmGnzrkWp4NICHZqGoeizBHFMcpSIMtyxna7wz6MEEYxkjRF7RxsXaN+AwfyIU3DtGFYAXlRIk1TJEmKvChwb5wyPWVL8jtEd5tZDMcBHp+e0e31OatRnDA7As0Ju32IqpKt09MNWofEEKjfsLDWwlKCrIUxBMMgmbdYNgyNRVGW6A08PHV7zJDmj09ddJ/7kFJdlXwp/4IhUJQCpaggCJVEKQSyvGBW9zL8lqGtEUUxVus19vsQu/2eM0wlUxyScynv6OCqZGJYliWKomxLhkClIqrqZpZfY9zEmdbasnFwXC5pmnE8q6riTQhxnCDPcy4lKitSoJS6ulGbFKErDLwhl8t8vsDEDzBfLBFMZ5hOZ/x7uVqxHQ5H/A51FZGgMBGIpTo6NLXBbL6A7wdYLJaY+D5bYlVJyQyFEMyYLCmhkNB6nCSsoq7tq2Q4cHbJAbVfwTG93y03JXMMnbv6AvVpg5rfef3tuLdPn505pDIhySTTD6ZYrtYck3vFfHbaHDpIHevQDwLujMHAQ3/gsX3qPvPc84Zse/0BJhOfk9J97nESaX088bEPQ2RZBm3qhqFWGkppaK2htIZUClJKbruSO0hwjKmcyNIal5Zo7JuyUVZjs9tx+il7aZZx97w3MRTLs8K2tUVMx1QUc/GSwzhJ77bezdPmeDjcGtdP6fMT+5hpZuhq4IcvD/jw+Xt8++k7/PT3L1AaGG0VKvM/6tBah197v+Pnrx/x8NdH/Nb/E2kqsNpniNMcGfVxXnDR0zXBV0XWrB97miU7dyLZHQ5t1/xFoPbSSraZpKzSyUPHP7fgAVQRp4Ml070stUalFYPmXErvgNIWUjV3M4Hu5X8B376sxMAjukwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;2&quot; title=&quot;2&quot; src=&quot;/dev-blog/static/398007a19ea862836f25b28c29a8426a/67d6a/2.png&quot; srcset=&quot;/dev-blog/static/398007a19ea862836f25b28c29a8426a/c26ae/2.png 158w,
/dev-blog/static/398007a19ea862836f25b28c29a8426a/6bdcf/2.png 315w,
/dev-blog/static/398007a19ea862836f25b28c29a8426a/67d6a/2.png 529w&quot; sizes=&quot;(max-width: 529px) 100vw, 529px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Organization을 생성하기는 하지만 해당 Organization에서 분석을 진행할 수 있는 Repository 목록 또한 제어할 수 있어요. All을 누르지 않고 select를 누르게 된다면 SonarCloud에서는 해당 repository에 대한 추가만 가능하게 됩니다. github단에서 먼저 Organization에서 분석 접근할 수 있는 Repository에 대한 제한을 두는 것이죠.&lt;/p&gt;
&lt;p&gt;까다롭기는 하지만 repository에 대한 보안적인 부분들도 많이 있을테니 어쩔수없는 불편함이라고 생각합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/2689f816a3a43a405150050e693327de/00d43/4.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 60.12658227848101%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVQoz5WSy27bMBRE/f8/ka7ST/AmTmAU6aJAAzSLQnLkwqoFSY0e1ouSJT5OYTpO5FoNWgIDEpfD4R0OZwDGGIv/HVNnZuOilNJCKUUYhmw2Gzv7vo/neeR5bkVOnKlmzgSFENR1Tdu2DFJSVRVZlpEmCWm+Y1dWr5yu66YFp4qH9XK5JI7jNy+9gH39b5bNcffVxuf7ez5cXfHx+po8y2mFQD19Yfj+CTPsLd8Ybc+YP4RnJzG78VKM4phvj498fXhA2YskJv2J/rUesbgQO1o+dagkMsvooghdFKhDAEXBkCQMaUqfF/T5jj5J2Mcx/fMzZhTMRSi6LOnXaxrHoXEdhOtatE8r2tUKFWyR2y0y2KLCEB1FmL5/R1AITJoi45jO31D/WJM7DjvXtSg9j9b36YMAk2VwcDAMl4LjwjjtIAiYz+fc3d1yu1iwuLmhLIojT+sz7ruhnB5atC1N01A2grw6oun6tzD+8nVmF929zFprC6XNCPqMM9XhbxT4o5BxMt83AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;4&quot; title=&quot;4&quot; src=&quot;/dev-blog/static/2689f816a3a43a405150050e693327de/f058b/4.png&quot; srcset=&quot;/dev-blog/static/2689f816a3a43a405150050e693327de/c26ae/4.png 158w,
/dev-blog/static/2689f816a3a43a405150050e693327de/6bdcf/4.png 315w,
/dev-blog/static/2689f816a3a43a405150050e693327de/f058b/4.png 630w,
/dev-blog/static/2689f816a3a43a405150050e693327de/40601/4.png 945w,
/dev-blog/static/2689f816a3a43a405150050e693327de/00d43/4.png 1000w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;잘 진행했다면 아래와 같은 빈 화면을 볼 수 있습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/ab387/3.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 36.708860759493675%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmklEQVQoz5XOTQ6DIBQEYO5/qCbVEPEk3RQEHkjFn2kw1qrFNl18m8fMBFZerijKAlVVzTjnEEJk1XW9OsuwGHv0/dswDJim6cM4johdN0u5XCZhxhhsaa2zmqaBlBJ3qaCUOs0xay2OiGgn3bxzMD7gpj0eIcBkcgl7FXKP20EiC+db+DaAnFs7x+7PwV1xcTb25w8JdvGt8wSf1RFTrcqKDAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;3&quot; title=&quot;3&quot; src=&quot;/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/f058b/3.png&quot; srcset=&quot;/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/c26ae/3.png 158w,
/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/6bdcf/3.png 315w,
/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/f058b/3.png 630w,
/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/40601/3.png 945w,
/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/78612/3.png 1260w,
/dev-blog/static/d2c68024e85a3198d197f4c2bea4ff70/ab387/3.png 2097w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;그럼 이제는 분석을 진행할 repository를 선택하면 자동으로 Automatic Analysis가 진행됩니다. 다만 저희는 Automatic Analysis를 사용하는 것이 아닌 CI-based Anaylsis를 사용하기 때문에 해당 옵션을 꺼주어야해요. (SonarCloud에서는 두가지의 Anaylsis를 중복해서 사용하는 것을 막고있으므로 Automatic Anaylsis를 꺼주어야합니다.)&lt;/p&gt;
&lt;p&gt;따라서 아래와 같이 Anaylsis Mode로 이동하도록 하겠습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/c3fd4/5.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACAklEQVQ4y6WUfW/aMBDG+/0/TTe0dkyr2D/rNLXdyhiVUCEQCOQNEseJkxDHfqYzL4MirUuJdLJin3/33J3tC7zyaa3NWFUVEsYgsgy5EBDi78iTZG8X/wtclyUqrcHzAhFPEacZloyZUZEfAC7yBkBZQzo2gs8fsLi5gntzBfv6Es6nFmT3DvrxO/jgdwNgXaO47WB8/4B+t4/Brz76P7oY9J4QLELE9gxJ+7IBUCmsew9YfXwHp92C225hfv0ey04bxd0tyq8d8G9fGgDXa8haYeV7mFkjRL4HZzIGCwNA14CswNO0IVBKRHEM1/MQhEvEjG18tr6c8+bAJEngui5WqxWiKDryeRPQ930EQQDLsszcWcC6rs0mUkfzSqnzgXEcG+Dh+lkpE2w+n2MymRyB98BdhJf2MvoOmGWZaQYppQYVRWGUvxlIDbFtG4vFwjSImrNTmvzrcdjATlMmZZSy53kGcJIyRRJCmGij0QjD4dA4b6n7Y7sDMsaMujAMDeCky5R/rTQqKc2bV5blviZSabNWa6DYzlPg6XQKx3GMkBPgo+3DiQWskOPectGbhfg58TAOOTIJ8LVCWmkwQcDNTaE65nl+BNsDn+ZLuElu7NmLYAUMQz+GlxTIKo10C0y2QGoAqTtMd2evnkNFt4GcTQ0ro46ODaWapqn5PzSq7x/lVRCbPh/HfwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;5&quot; title=&quot;5&quot; src=&quot;/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/f058b/5.png&quot; srcset=&quot;/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/c26ae/5.png 158w,
/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/6bdcf/5.png 315w,
/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/f058b/5.png 630w,
/dev-blog/static/8a38adeb5a7ef1d238e689698ed44391/c3fd4/5.png 854w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;이동하게 된다면 아래와 같은 페이지가 나오게 되는데요. 당연하게도 &lt;code class=&quot;language-text&quot;&gt;SonarCloud Automatic Analysis&lt;/code&gt;는 OFF로 두고 그 아래에 있는 옵션들을 보려고 해요.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/acb5a/6.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7klEQVQoz6WSiYrDMAxE/f/fGWg2RxvH95FMGZWEUNrSdAWDDLafR5ZU27ZomgZd12EcRwzDgL7vJRtjTkt576G13uW9hXMOOWeUWlGXBcsX4vkYIxQvP79irRXNziOmjForSimSX4l7FKHKC3AWEf7q9Xego7ZzyliLy18H5pQiUkpY1xW/BKHKOofJWKScH/9WigB/kQDpbLhO8CGIO34sGxVCkPVpoDjUM2JMAtygzHT8LWwvWRzeNEKMyP8AHkp2GCfO36PEo1j6s9hJxluHLPk2G+Rc9nnaGnM2eEfp2aDtr6DTo5NPg/xpwO/B9q2mgcUergAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;6&quot; title=&quot;6&quot; src=&quot;/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/f058b/6.png&quot; srcset=&quot;/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/c26ae/6.png 158w,
/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/6bdcf/6.png 315w,
/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/f058b/6.png 630w,
/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/40601/6.png 945w,
/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/78612/6.png 1260w,
/dev-blog/static/0540c230fb1ac9421ea2645716625ef6/acb5a/6.png 2632w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;각각의 Supporting 해주는 튜토리얼들이 나와있습니다. SonarCloud에서는 튜토리얼을 잘 제공해주고 있기 때문에 사용하는 CI도구들에 따라서 맞게 해주면 될 것 같아요.&lt;/p&gt;
&lt;p&gt;지금은 간단하게 Github에서 제공하는 Github Actions를 통해서 튜토리얼을 진행해보려고 합니다. 그래서 들어가면,&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/1f6288c51300239544bb444aaeb19099/ab986/7.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA2klEQVQoz42R3YqDMBSEff8XaK+sVz6EL7NQZK2amFTzZ2Kc5YSmlNJ198BHMnAYJpmi6wf0wwDOOcZxxLIssMbAaA1D5xta619RSqFomcSNTeCcgTEGax183OG3CO/9E+ccrLXYtg00+74jT76v64oihAChTDKbpgnfXYeva4u2ZxBCJKSUKR0Z0n42eeVp6EMAWxy4kAjeo2kanE8nlJcLqqpCWZao6xo9F/hrHgk97sbhrt3hcozxEEqZDKkErVT6UIJ0hnR+6n+gYop5npEhk3d91Oqnln8AZgYamGmcaWEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;7&quot; title=&quot;7&quot; src=&quot;/dev-blog/static/1f6288c51300239544bb444aaeb19099/f058b/7.png&quot; srcset=&quot;/dev-blog/static/1f6288c51300239544bb444aaeb19099/c26ae/7.png 158w,
/dev-blog/static/1f6288c51300239544bb444aaeb19099/6bdcf/7.png 315w,
/dev-blog/static/1f6288c51300239544bb444aaeb19099/f058b/7.png 630w,
/dev-blog/static/1f6288c51300239544bb444aaeb19099/40601/7.png 945w,
/dev-blog/static/1f6288c51300239544bb444aaeb19099/78612/7.png 1260w,
/dev-blog/static/1f6288c51300239544bb444aaeb19099/ab986/7.png 2114w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
의 형태로 `SONAR_TOKEN`을 제공합니다. 이때 해당 토큰의 경우 SonarCloud로 전달하는 키가 되기 때문에 Guthub Actions에서 트리거를 확인하고 리포트를 전달하기 위해서는 해당 토큰이 필요해요. 따라서 제공되어있는 Repository의 `Settings &amp;gt; Secrets` 경로에 가서 해당 토큰을 추가하는 것으로 튜토리얼을 시작합니다.
&lt;p&gt;이후에는 각자가 사용하는 build 환경에 맞게 스크립트를 제공하므로 적절한 환경에서 사용하면 될 것 같아요.
저희 프로젝트의 경우 백엔드는 Gradle, 프론트는 SonarSource에서 제공하는 sonarcloud-github-action@master를 사용하였습니다.&lt;/p&gt;
&lt;p&gt;이때 주의해야할 점은 SonarCloud로 리포트를 만들어내기 위해서 sonar에 대한 속성값을 지정해주어야합니다. Gradle의 경우 &lt;code class=&quot;language-text&quot;&gt;build.gradle&lt;/code&gt;에 존재하고, 다른 스크립트도 properties를 추가하는 등 속성값을 지정해주어야 스크립트 진행시에 전달할 repository의 올바른 경로로 진행이 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// build.gradle&lt;/span&gt;

sonarqube &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  properties &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    property &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sonar.projectKey&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;woowa-git_java-baseball-precourse&quot;&lt;/span&gt;&lt;/span&gt;
    property &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sonar.organization&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;woowa-git&quot;&lt;/span&gt;&lt;/span&gt;
    property &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sonar.host.url&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://sonarcloud.io&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;properties&quot;&gt;&lt;pre class=&quot;language-properties&quot;&gt;&lt;code class=&quot;language-properties&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;## sonar-project.properties&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;sonar.projectKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;woowa-git_java-baseball-precourse&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;sonar.organization&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;woowa-git&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 속성들은 기본적으로 무조건 명시해주어야하는 조건이므로 추가적으로 속성값을 커스텀할 수도 있습니다.&lt;/p&gt;
&lt;p&gt;자세한건 &lt;a href=&quot;https://docs.sonarcloud.io/advanced-setup/analysis-parameters&quot;&gt;공식 docs 링크&lt;/a&gt; 를 참고하면 좋을 것 같습니다 :)&lt;/p&gt;
&lt;h2&gt;진행했던 트러블 슈팅&lt;/h2&gt;
&lt;h3&gt;1. Jacoco&lt;/h3&gt;
&lt;p&gt;스프링 백엔드 환경에서 가장 처음 실수는 테스트 커버리지였습니다. 일단 이전에 이야기한대로 “정적” 분석이기 때문에 SonarCloud에서는 본인들이 알아서 테스트를 돌려 커버리지에 대한 리포트를 남기기가 힘듭니다.&lt;/p&gt;
&lt;p&gt;따라서 build를 진행하고 리포트를 만들 때 테스트커버리지에 대한 리포트도 남겨주어야해요. 아니면 찾지못하고 아래와 같은 메시지를 남기죠.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;No coverage report can be found with sonar.coverage.jacoco.xmlReportPaths=&apos;build/reports/jacoco/test/jacocoTestReport.xml&apos;. Using default locations: target/site/jacoco/jacoco.xml,target/site/jacoco-it/jacoco.xml,build/reports/jacoco/test/jacocoTestReport.xml
No report imported, no coverage information will be imported by JaCoCo XML Report Importer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;build.gradle&lt;/code&gt;에서는 따로 이 환경을 제공하지 않고 &lt;code class=&quot;language-text&quot;&gt;jacoco&lt;/code&gt;라는 java 코드 커버리지 라이브러리를 사용해야합니다. &lt;code class=&quot;language-text&quot;&gt;jacoco&lt;/code&gt;가 build진행 시 돌렸던 테스트에 대한 &lt;code class=&quot;language-text&quot;&gt;.xml&lt;/code&gt; 리포트문서를 만들고 SonarCloud는 그걸 받아 분석용으로 보여주기만 하는거죠.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
    id &lt;span class=&quot;token string&quot;&gt;&apos;jacoco&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

tasks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;useJUnitPlatform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    finalizedBy &lt;span class=&quot;token string&quot;&gt;&apos;jacocoTestReport&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

jacocoTestReport &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    reports &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        html&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;enabled &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
        xml&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;enabled &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

sonarqube &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    properties &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
        property &lt;span class=&quot;token string&quot;&gt;&apos;sonar.coverage.jacoco.xmlReportPaths&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;build/reports/jacoco/test/jacocoTestReport.xml&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;(jacocoTestReport의 진행 스크립트는 finalizedBy나 dependsOn이나 동작구동하게끔만 진행하면 괜찮습니다.)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;따라서 위와 같이 플러그인을 추가하고, &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; Task를 진행한 후 jacocoTestReport를 실행하여 테스트에 대한 &lt;code class=&quot;language-text&quot;&gt;.xml&lt;/code&gt; 분석파일을 내보내도록하면 완성입니다.&lt;/p&gt;
&lt;p&gt;별다른 옵션을 두지 않는다면 &lt;code class=&quot;language-text&quot;&gt;.xml&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;build/reports/jacoco/test/jacocoTestReport.xml&lt;/code&gt;의 경로에 생성이 되는데요, &lt;code class=&quot;language-text&quot;&gt;build.gradle&lt;/code&gt;에서 sonar가 인식하는 default 경로가 해당 경로이기 때문에 위 코드처럼 굳이 추가는 하지않아도 됩니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;2. sonar-project.properties&lt;/h3&gt;
&lt;p&gt;저희 팀 프로젝트는 프론트엔드, 백엔드의 프로젝트를 하나의 repository에서 관리하기 때문에 프론트의 &lt;code class=&quot;language-text&quot;&gt;sonar-project.properties&lt;/code&gt;를 분리할 필요가 있었는데요.&lt;/p&gt;
&lt;p&gt;여기서 프론트 폴더의 build 스크립트 상에서는 아래와 같이 고정된 경로를 두고&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;defaults&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;working-directory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; frontend&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/frontend/sonar-project.properties&lt;/code&gt;로 설정파일을 두었습니다.&lt;/p&gt;
&lt;p&gt;의도된 SonarSource 측의 방향인지는 모르겠으나 &lt;code class=&quot;language-text&quot;&gt;working-directory&lt;/code&gt;를 frontend 폴더로 두어도 루트를 경로로 &lt;code class=&quot;language-text&quot;&gt;sonar-project.properties&lt;/code&gt;를 검색하다보니 결국 원하는 &lt;code class=&quot;language-text&quot;&gt;sonar-project.properties&lt;/code&gt;를 제대로 인식하지 못해서 action이 터지는 상황이 발생했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ERROR: You must define the following mandatory properties for &apos;Unknown&apos;: sonar.projectKey, sonar.organization&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;따라서 위와 같이 &lt;code class=&quot;language-text&quot;&gt;sonar.projectKey&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;sonar.organization&lt;/code&gt;은 필수값인데 properties를 찾지못해 에러가 발생하는거죠.&lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;SonarSource/sonarcloud-github-action@master&lt;/code&gt;의 경우 &lt;code class=&quot;language-text&quot;&gt;working-directory&lt;/code&gt;를 인식하지 못하고 루트 디랙토리로 찾게 되니 이점 유의하고 properties를 배치하면 좋을 것 같습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;3. Fork repositoy에서 pull request 시 github secret key 권한 에러&lt;/h3&gt;
&lt;p&gt;이부분이 가장 당황스러웠던 부분인 것 같아요.&lt;/p&gt;
&lt;p&gt;처음에도 이야기했지만 Repository의 분석을 진행하다보니 해당 repository에 대한 권한인증이 상당히 까다로운 편이었는데요. 이 내용이 Fork된 repository에서 요청을 할 때 포함이 되어버립니다.&lt;/p&gt;
&lt;p&gt;분석에 대한 권한의 경우 아래의 Permission 옵션에서 &lt;code class=&quot;language-text&quot;&gt;Execute Analysis&lt;/code&gt; 옵션을 키게 되면 해결이 되는데요.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/fc83e/8.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 18.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAq0lEQVQY021Q2Q7CMAzb/3/nEBMP7OiRq4lRM8ETkaxYrtO6WY5KqJ1BRGDmhJnBbMDdcTZC6QxE4PkuyadeSdI3xsBeOmwMqCqW136hi0HNUhCRHIgIzKqsINHk21HRWJI3VthweAT2SnCPvHx5rCvKdeE8z1/CL2ZqEcbVKLmKoHT6nbVOEGZ0YtR+e5dt27AfR5rmC//Aen9trkHU4H73qYc7SAxiI1fwAZxjOIM4HRdvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;8&quot; title=&quot;8&quot; src=&quot;/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/f058b/8.png&quot; srcset=&quot;/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/c26ae/8.png 158w,
/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/6bdcf/8.png 315w,
/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/f058b/8.png 630w,
/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/40601/8.png 945w,
/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/78612/8.png 1260w,
/dev-blog/static/ab471ed4a9da0be6394f9284e43f40de/fc83e/8.png 2596w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
지금 옵션의 경우 organization에 대해서 Member, Owner 권한이 있는 모든 사람의 요청은 분석이 가능하고, 다른 Anyone은 불가능합니다. Anyone에 대해서 분석을 풀어두면 organization의 유저가 아니더라고 분석 요청이 가능하겠죠. (정상적으로 돌렸는데 scret key의 에러로 권한 요청이 필요하다면 해당 부분을 수정하면 됩니다.)
&lt;p&gt;여기서의 문제는 Fork Repository 였습니다.&lt;/p&gt;
&lt;p&gt;현재는 아니지만 이전에는 저희 팀 프로젝트에서 open source project contribution 방식의 fork된 repository에서 pull request를 전송하고 있었는데요. 이때 fork repository에서의 요청에 대해서 저는 Anyone의 권한이 되어버렸어요. 따라서 백엔드, 프론트엔드의 빌드가 전체가 터져버리는 상황이 발생했습니다.&lt;/p&gt;
&lt;p&gt;이를 아래와 같이 Anyone에 대한 권한을 풀고나니 백엔드는 되었지만, 프론트는 여전히 실패했었습니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/879d33380a7853a35a826c7710273b4a/3a4f1/9.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsUlEQVQY002P22rEMAxE8/9f2Ye0oU3SZe3YunuKFbbsw4GDkAbN8nUWdBZ0YjDfqCrcPTF37M8LZg41w3o8/72xIMIhanjUjojA8vH9i8YGVssgEYGZYYyRxBh4XJRuHliPkocegUqSc/XAWecOsGyfK87zQCkFrbUMfH06EWYQM65OUGGwSLoIg4jQ6farM1onLNu24WffUWvNz15V35mVJtN5tlBDuINEs9n0xvf8D1hJOA1gda8oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;9&quot; title=&quot;9&quot; src=&quot;/dev-blog/static/879d33380a7853a35a826c7710273b4a/f058b/9.png&quot; srcset=&quot;/dev-blog/static/879d33380a7853a35a826c7710273b4a/c26ae/9.png 158w,
/dev-blog/static/879d33380a7853a35a826c7710273b4a/6bdcf/9.png 315w,
/dev-blog/static/879d33380a7853a35a826c7710273b4a/f058b/9.png 630w,
/dev-blog/static/879d33380a7853a35a826c7710273b4a/40601/9.png 945w,
/dev-blog/static/879d33380a7853a35a826c7710273b4a/78612/9.png 1260w,
/dev-blog/static/879d33380a7853a35a826c7710273b4a/3a4f1/9.png 2588w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;찾아보니 fork된 repository에서 요청을 하는 경우 Github에서는 scret key에 대한 권한 자체를 막아버리는 듯 했어요. &lt;a href=&quot;https://community.sonarsource.com/t/github-action-ci-build-fail-with-set-the-sonar-token-env-variable/38997/25&quot;&gt;SonarSource 커뮤니티글&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;문제가 되는 부분은 &lt;code class=&quot;language-text&quot;&gt;SonarSource/sonarcloud-github-action@master&lt;/code&gt;를 통해서 secret key를 사용하는 것이 었기때문에 당시 기준으로는 Anyone으로 모든 요청에 대한 권한은 풀어두고, 프론트에서 &lt;code class=&quot;language-text&quot;&gt;sonarqube-scanner&lt;/code&gt;를 직접 돌려 전송하는 방식으로 진행하였습니다.&lt;/p&gt;
&lt;p&gt;언급했던 것처럼 현재는 fork방식을 사용하지 않고 있지만 혹시 해당 방법을 통해 전달하고 싶다면 아래의 스크립트를 추가하면 될 것 같습니다 :)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;sonarcloud&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; SonarCloud
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;fetch-depth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# Shallow clones should be disabled for a better relevancy of analysis&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install dependencies
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  npm install
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; install sonarqube&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;scanner
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install sonarqube&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;scanner &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;D
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; run sonar
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm run sonar&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// sonar-project.js &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sonarqubeScanner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sonarqube-scanner&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;sonarqubeScanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;serverUrl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://sonarcloud.io&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string-property property&quot;&gt;&quot;sonar.sources&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./src&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sonar-project.js&lt;/code&gt;의 경우 options에서 properties와 동일하게 커스텀하여 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// package.json&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ...
    &lt;span class=&quot;token property&quot;&gt;&quot;sonar&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;node sonar-project.js&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;생각 정리&lt;/h2&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/596380d599aec6dca3d2826c3abbe238/b6e50/10.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 31.645569620253163%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvElEQVQY042Oy07DMBBF8/9/029gw64bFqiIBVJR4gZiG4f4OT5V3ILEgrQjHc1irs7crkw93mrehxE1fqLtzMdkGto6YiqEmPExbWLd3HZXUyDFgPv6xhjTmLRGTxZlR3bHHWpRUKGIbFOEDiCmyL5/4qgDsy/tKCLUKuSaqavtjqm1XoQ+LDy8PfKsPC9DwgW5Bn6Sl/AW64hchSEtHMaB11OmN/n3W+POdn+ERQouJOwizKHcbPMfq/AMI7zVsbOwxvMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;10&quot; title=&quot;10&quot; src=&quot;/dev-blog/static/596380d599aec6dca3d2826c3abbe238/f058b/10.png&quot; srcset=&quot;/dev-blog/static/596380d599aec6dca3d2826c3abbe238/c26ae/10.png 158w,
/dev-blog/static/596380d599aec6dca3d2826c3abbe238/6bdcf/10.png 315w,
/dev-blog/static/596380d599aec6dca3d2826c3abbe238/f058b/10.png 630w,
/dev-blog/static/596380d599aec6dca3d2826c3abbe238/40601/10.png 945w,
/dev-blog/static/596380d599aec6dca3d2826c3abbe238/78612/10.png 1260w,
/dev-blog/static/596380d599aec6dca3d2826c3abbe238/b6e50/10.png 1862w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
사실 아직까지는 SonarCloud를 적용하고난 이후 &quot;이건 정말 몰랐던 것들이네&quot;의 케이스는 적었던 것 같아요. 여러명이 꼼꼼히 코드리뷰를 진행했던 덕이라고 생각합니다.
&lt;p&gt;다만 언젠가 발생할 클린하지 않은, 잘못된 사용법의 코드에 대한 안전망이 생겼다라는 사실로 인해 조금 더 안심하고 pr을 볼 수 있게 되었다라는 생각이 들어요. 혹시나 넘어가는 부분이 있더라도 리포팅이 다 되니까요! (그렇다고 100%신임하고 코드리뷰를 안하지는 않겠지만요 ㅎㅎ)&lt;/p&gt;
&lt;p&gt;트러블 슈팅 과정에서도 어설프게 적용한 부분들이 없지않아 있어 시간소요를 많이 했다라고는 생각하지만 꽤나 좋은 경험들이었고, 그런 과정이 없다면 SonarCloud는 적용하기 쉬운 서비스인 것 같습니다.&lt;/p&gt;
&lt;p&gt;pull request에서 날아오는 또하나의 리뷰어가 생긴 것 같네요 :)&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.sonarcloud.io/&quot;&gt;https://docs.sonarcloud.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://community.sonarsource.com/t/github-action-ci-build-fail-with-set-the-sonar-token-env-variable/38997/22&quot;&gt;https://community.sonarsource.com/t/github-action-ci-build-fail-with-set-the-sonar-token-env-variable/38997/22&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.gradle.org/current/userguide/jacoco_plugin.html&quot;&gt;https://docs.gradle.org/current/userguide/jacoco_plugin.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nickkorbel.com/2020/02/05/configuring-sonar-with-a-create-react-app-in-typescript/&quot;&gt;https://nickkorbel.com/2020/02/05/configuring-sonar-with-a-create-react-app-in-typescript/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://javascript.plainenglish.io/how-to-set-up-sonarqube-locally-on-a-react-typescript-project-ec02cd8e2626&quot;&gt;https://javascript.plainenglish.io/how-to-set-up-sonarqube-locally-on-a-react-typescript-project-ec02cd8e2626&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[WebMvcTest 사용 시 HandlerInterceptor 빈 등록해야 할까?]]></title><description><![CDATA[개요 안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 쿼리치입니다. 1차 스프린트를 진행하면서 다양한 상황들을 마주했는데요. 이번 글을 통해 1차 스프린트 진행 중 마주치게 된 한 상황에 대해 기록해보고자 합니다. @WebMvcTest…]]></description><link>https://gong-check.github.io/dev-blog/BE/쿼리치/webmvctest-handlerinterceptor/webmvctest-handlerinterceptor/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/쿼리치/webmvctest-handlerinterceptor/webmvctest-handlerinterceptor/</guid><pubDate>Mon, 11 Jul 2022 22:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;개요&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;안녕하세요 공책팀에서 백엔드 개발을 맡고 있는 쿼리치입니다.&lt;/p&gt;
&lt;p&gt;1차 스프린트를 진행하면서 다양한 상황들을 마주했는데요.&lt;/p&gt;
&lt;p&gt;이번 글을 통해 1차 스프린트 진행 중 마주치게 된 한 상황에 대해 기록해보고자 합니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;@WebMvcTest 사용 중..&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Presentation Layer 를 테스트하기 위해 우린 흔히 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt; 를 사용합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@SpringBootTest&lt;/code&gt; 는 Application Context 를 완전히 실행하여 모든 빈을 등록하는 반면, &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt; 는 Presentation Layer 관련 빈만을 스캔 및 등록하기 때문에 보다 쾌적한 슬라이스 테스트를 진행할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이러한 이유 때문에 저희 공책팀 역시 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt; 를 사용했습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/248b0/Screen_Shot_2022-07-12_at_5.03.00_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABgklEQVQoz5VSy3LkIAz07wTQA4zxYHsml1z2srX//zO9JWFPJpU9bA5dLQlovZh0E8jKkNtg7QJpDDG+veC8o4d+i5sGFUKkiMkFu3jQxbogHzr83aCfsHiXr3zaJm6iU76rCxjbIc0EXnigvfBl14vJO7nu2rvECZNcLXpL9tAuEmQlz+gClqRaohOVnqJ2TktHyhUhBEz5ociPDDk2cN8gxw45Duh993h5z8iPeeDIoCrgRb5W3gRUGTH6DG2otoQMXjO4ZcitgJu1n0AlIZWGVDqSFkTtiFyQNA1IGu1qGoKyzZA+Q7YM7ezw7fUCrhk0W5ICXvTZ6nN25s9jNCbqgtQ28LqDlmXM0TdWwOsGvvWTd/DafPPXd7lsyqM6W4jPUFoC5QDSgCQRpBGU08knNAy/jMde0YttVdofdEHbUhKDIERCTIwQR7YQIsJbHGz+W/jkf9ijZatgfQfdf4P2X+DHH1D/eArapf+FV+htLhVy38G9Q3abafUNX3P5iehfTJZ2dOtTOTcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-12 at 5.03.00 PM.png&quot;
        title=&quot;Screen Shot 2022-07-12 at 5.03.00 PM.png&quot;
        src=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/f058b/Screen_Shot_2022-07-12_at_5.03.00_PM.png&quot;
        srcset=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/c26ae/Screen_Shot_2022-07-12_at_5.03.00_PM.png 158w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/6bdcf/Screen_Shot_2022-07-12_at_5.03.00_PM.png 315w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/f058b/Screen_Shot_2022-07-12_at_5.03.00_PM.png 630w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/40601/Screen_Shot_2022-07-12_at_5.03.00_PM.png 945w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/78612/Screen_Shot_2022-07-12_at_5.03.00_PM.png 1260w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/248b0/Screen_Shot_2022-07-12_at_5.03.00_PM.png 1316w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;공식 문서를 찾아보면, 해당 어노테이션을 사용할 때 Auto-Configuration 을 비활성화하고 MVC 테스트에 필요한 컴포넌트만 등록해준다고 합니다. 이는 아래와 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@Controller&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@ControllerAdvice&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@JsonComponent&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Converter/GenericConverter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Filter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;WebMvcConfigurer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;HandlerMethodArgumentResolver&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;반면 아래와 같은 컴포넌트는 등록되지 않는다고 하네요.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@Component&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@Service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@Repository&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;저희 공책팀에선 토큰을 활용한 인증 인가를 구현하기 위해 &lt;code class=&quot;language-text&quot;&gt;WebMvcConfigurer&lt;/code&gt; 를 통해 &lt;code class=&quot;language-text&quot;&gt;HandlerMethodArgumentResolver&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;HandlerInterceptor&lt;/code&gt; 를 적용했습니다.&lt;/p&gt;
&lt;p&gt;이후 Presentation Layer 단의 인증 인가 테스트를 진행하며 한 가지 의문점이 들게 됩니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;분명 &lt;code class=&quot;language-text&quot;&gt;WebMvcConfigurer&lt;/code&gt; 랑 &lt;code class=&quot;language-text&quot;&gt;HandlerMethodArgumentResolver&lt;/code&gt; 는 자동으로 등록해준다고 공식 문서에 명시되어 있는데, &lt;code class=&quot;language-text&quot;&gt;HandlerInterceptor&lt;/code&gt; 는 없네? 근데 따로 등록해주지 않아도 작동하네? 왜지?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;찾아보자&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/f680b/Screen_Shot_2022-07-14_at_3.41.37_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.708860759493675%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABWElEQVQozz1RWW7CUAzkHK0q1pCQxwtZgGwN2ckCVIillfrJHfrVG/QKPUSPOJUdxMdobD9rPH7u/f594fvnBlUEiKs3LMP8jgK2n8IJMs4pntvBA9IJGRRbbgLbSyEsH73rrUJ9TqHMVpBOAN30IEyPWV+40E2XWZMrqPMlNGPFmAoHim5DETbXGXKJ3tOLwHNfQBEWO8naM9L6hPLwgay9oNy/I23OWEclsuaM+viJvL0gKg6I8j1e8x0sN+aBY22B3lgzMFIlT/CTGmHawI22LJzvLszF/oqsOSGpjg/2kwZeXHMvseNnneBQlSAousWrCsvDbLFmdOt2TDmtxO/GCv2JYAyUOYZTicFEdIIj1eACWQ6SGn5cwYurR0yug7Rh52HWwttsERV7jqm+KQ8w1xFIZ9QJShakD5Z2wG7IBR2CHM8tn90Rc91078dzH70kRIJjzcQ/mhbmS1m8LY0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.41.37 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.41.37 PM.png&quot;
        src=&quot;/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/f058b/Screen_Shot_2022-07-14_at_3.41.37_PM.png&quot;
        srcset=&quot;/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/c26ae/Screen_Shot_2022-07-14_at_3.41.37_PM.png 158w,
/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/6bdcf/Screen_Shot_2022-07-14_at_3.41.37_PM.png 315w,
/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/f058b/Screen_Shot_2022-07-14_at_3.41.37_PM.png 630w,
/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/40601/Screen_Shot_2022-07-14_at_3.41.37_PM.png 945w,
/dev-blog/static/de626a3e8c3a8928b0f27061869a0fe8/f680b/Screen_Shot_2022-07-14_at_3.41.37_PM.png 1108w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이유를 열심히 찾다보니 spring-boot GitHub 에서 &lt;a href=&quot;https://github.com/spring-projects/spring-boot/issues/17572&quot;&gt;이런 이슈&lt;/a&gt;를 발견하게 됩니다.&lt;/p&gt;
&lt;p&gt;해당 이슈는 &lt;a href=&quot;https://github.com/spring-projects/spring-boot/pull/17600&quot;&gt;이 PR&lt;/a&gt; 을 통해 수정되게 되는데요. &lt;a href=&quot;https://github.com/spring-projects/spring-boot/commit/9f69b61d493c29ff5026bbbee306d507d60a0eac&quot;&gt;어떤 코드들이 추가&lt;/a&gt;되었는지 확인해봅시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/799f3/Screen_Shot_2022-07-12_at_5.01.07_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACCUlEQVQoz3WS64rbMBBG/Sjd3diJ5Isk3xRfZCeOc9kNlFIolEKhv/r+b3CKlTTtUvrjcD4sjWBmHOjakfcDquxJi5a06P5DS/ZX/uOWJG/utAR2d2U7XamHM/VwoXZnyv5I2d2o+pNnyXZ89ecLlbt9K7ojaTmQlo6sGgjS6Qey+4KqDujtmax5RTWvxNUJWc7E9cnntdkTqpFQ7e6+5Ui/J1gJzUoYcqkxxqKWEWxHj6p6jB0xdvAtxdo+2gulYal9Xmc8RalnyUHitmR9S1eWtP2AnU6084XueMHuZ7bTkeZwujGfvQu3wyxzbzoinRNmmlBpImUIQhETxYpEZiRpjtQ1SW5JjEWqEqkq71jXSF15C1UisoIoMTxFkqco9jyvE4Jk9x3RfGadT34Gq8x5wswR+TkN3h59Y212Dzb5/s7kHSTjN8T2E5FyyOKA6a6U/Ufy7orp3jyquSDy6faAZ3/3vwShjFknig+hYJ0YanfAjW+044myHam6PVnZ+LMPq827Ft8jby2nrkG5jlWqkKag6kfqYaYeDxTDjrwf0cOMGmaEdWxK6++GmXoswzu7L+Vlo3nZqMfqhdB+EULVxMqyySrWqSU2Dpl3CGWJ4pxVXLDU/q57/DbZ8SfSfSXSeyIzEeoJUZ5I7RtJ/UpcX4irM8peSeoz8YK9IKoLm2L295e66O5fCUiAC1bJTBAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-12 at 5.01.07 PM.png&quot;
        title=&quot;Screen Shot 2022-07-12 at 5.01.07 PM.png&quot;
        src=&quot;/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/f058b/Screen_Shot_2022-07-12_at_5.01.07_PM.png&quot;
        srcset=&quot;/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/c26ae/Screen_Shot_2022-07-12_at_5.01.07_PM.png 158w,
/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/6bdcf/Screen_Shot_2022-07-12_at_5.01.07_PM.png 315w,
/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/f058b/Screen_Shot_2022-07-12_at_5.01.07_PM.png 630w,
/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/40601/Screen_Shot_2022-07-12_at_5.01.07_PM.png 945w,
/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/78612/Screen_Shot_2022-07-12_at_5.01.07_PM.png 1260w,
/dev-blog/static/c34b86f9f94abc6c039a03ff91a5bba2/799f3/Screen_Shot_2022-07-12_at_5.01.07_PM.png 1642w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 커밋을 보면 &lt;code class=&quot;language-text&quot;&gt;HandlerInterceptor&lt;/code&gt; 가 추가된 것을 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;이로써 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt; 수행 시 &lt;code class=&quot;language-text&quot;&gt;HandlerInterceptor&lt;/code&gt; 가 자동으로 빈 등록된다는 것을 알 수 있습니다.&lt;/p&gt;
&lt;h3&gt;그렇다면 왜 공식 문서에는 해당 내용이 반영되지 않은 것일까?&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/248b0/Screen_Shot_2022-07-12_at_5.03.00_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABgklEQVQoz5VSy3LkIAz07wTQA4zxYHsml1z2srX//zO9JWFPJpU9bA5dLQlovZh0E8jKkNtg7QJpDDG+veC8o4d+i5sGFUKkiMkFu3jQxbogHzr83aCfsHiXr3zaJm6iU76rCxjbIc0EXnigvfBl14vJO7nu2rvECZNcLXpL9tAuEmQlz+gClqRaohOVnqJ2TktHyhUhBEz5ociPDDk2cN8gxw45Duh993h5z8iPeeDIoCrgRb5W3gRUGTH6DG2otoQMXjO4ZcitgJu1n0AlIZWGVDqSFkTtiFyQNA1IGu1qGoKyzZA+Q7YM7ezw7fUCrhk0W5ICXvTZ6nN25s9jNCbqgtQ28LqDlmXM0TdWwOsGvvWTd/DafPPXd7lsyqM6W4jPUFoC5QDSgCQRpBGU08knNAy/jMde0YttVdofdEHbUhKDIERCTIwQR7YQIsJbHGz+W/jkf9ijZatgfQfdf4P2X+DHH1D/eArapf+FV+htLhVy38G9Q3abafUNX3P5iehfTJZ2dOtTOTcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-12 at 5.03.00 PM.png&quot;
        title=&quot;Screen Shot 2022-07-12 at 5.03.00 PM.png&quot;
        src=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/f058b/Screen_Shot_2022-07-12_at_5.03.00_PM.png&quot;
        srcset=&quot;/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/c26ae/Screen_Shot_2022-07-12_at_5.03.00_PM.png 158w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/6bdcf/Screen_Shot_2022-07-12_at_5.03.00_PM.png 315w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/f058b/Screen_Shot_2022-07-12_at_5.03.00_PM.png 630w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/40601/Screen_Shot_2022-07-12_at_5.03.00_PM.png 945w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/78612/Screen_Shot_2022-07-12_at_5.03.00_PM.png 1260w,
/dev-blog/static/3d48f4a67f78092704c7514d2b11ce06/248b0/Screen_Shot_2022-07-12_at_5.03.00_PM.png 1316w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;해당 공식문서는 spring-boot 1.4.0 버전에 작성된 글인 반면, 위 PR 은 2.2.0 단계에서 적용되었기 때문에 아직 공식 문서에 반영되지 않은 것으로 판단됩니다.&lt;/p&gt;
&lt;p&gt;확실하게 알고 넘어가기 위해 &lt;a href=&quot;https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.2.0-Release-Notes&quot;&gt;Spring Boot 2.2.0 Release Notes&lt;/a&gt; 를 찾아봅시다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/99072/Screen_Shot_2022-07-14_at_3.40.02_PM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 7.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQI1zWN2wrCMBBE+0Mitl7W2qQm3fRCkgqVWPz/DxnZBR8GljNn2MotG2xYYThrjheD083i0LSo6akRJs7f64YEwysePuotnPpZ3Wp6fRHSB355g2NBTQ7XjtHcHciOoH5SNuYdIe/gVODmDUMsupGtdPLg3Hr8AB3eRz68juQ0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2022-07-14 at 3.40.02 PM.png&quot;
        title=&quot;Screen Shot 2022-07-14 at 3.40.02 PM.png&quot;
        src=&quot;/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/f058b/Screen_Shot_2022-07-14_at_3.40.02_PM.png&quot;
        srcset=&quot;/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/c26ae/Screen_Shot_2022-07-14_at_3.40.02_PM.png 158w,
/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/6bdcf/Screen_Shot_2022-07-14_at_3.40.02_PM.png 315w,
/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/f058b/Screen_Shot_2022-07-14_at_3.40.02_PM.png 630w,
/dev-blog/static/eb58af4f20577e278052e2e8a1f2f4ef/99072/Screen_Shot_2022-07-14_at_3.40.02_PM.png 842w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;놀랍게도 위와 같은 문장이 적혀있는 것을 확인하실 수 있습니다.&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;이번 사건을 통해 버전 확인에 대한 중요성을 알 수 있었고 공식 문서에 아직 반영되지 않은 기능들이 있을 수 있기 때문에 spring-boot GitHub 의 Release Note 를 잘 활용한다면 원하는 정보를 공식적으로 찾을 수 있다는 것을 알 수 있었습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[프로젝트에 Emotion 적용기]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 온스타입니다.
저희 팀은 우아한테크코스…]]></description><link>https://gong-check.github.io/dev-blog/FE/온스타/emotion 적용기/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/온스타/emotion 적용기/</guid><pubDate>Mon, 11 Jul 2022 12:10:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 온스타입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 체크리스트 애플리케이션을 개발하고 있습니다.&lt;/p&gt;
&lt;p&gt;리액트 프로젝트를 시작하고, CSS 작성에 대한 고민과 emotion 라이브러리 도입에 대한 이유에 대해 작성한 글입니다.&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;💡 우리는 왜 emotion을 선택했는가?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;다양한 방식의 CSS 작성법 있고 각 방식마다 장단점이 있으므로,
이번 프로젝트에 들어가기에 앞서 어떤 방식으로 CSS 코드를 작성할지에 대해 먼저 고민했습니다.&lt;/p&gt;
&lt;p&gt;이전의 경험에서 &lt;strong&gt;SCSS 문법&lt;/strong&gt;의 효용을 느꼈고 이번 프로젝트에서도 SCSS를 사용하고 싶었기 때문에, 이를 지원하지 않는 기본적인 CSS 등은 처음부터 배제하고 생각했습니다.&lt;/p&gt;
&lt;p&gt;따라서 SCSS 문법을 지원하는 &lt;code class=&quot;language-text&quot;&gt;CSS in JS&lt;/code&gt; 라이브러리와 &lt;code class=&quot;language-text&quot;&gt;module.scss&lt;/code&gt; 방식 중, 어떤 것 방법을 선택하는 것이 좋을지 먼저 고민하는 시간을 가졌습니다.&lt;/p&gt;
&lt;h3&gt;CSS in JS vs module.scss&lt;/h3&gt;
&lt;p&gt;module.scss 와 CSS 라이브러리 모두 유니크한 클래스 네임을 부여해주어, 클래스 네임에 대한 고민은 하지 않아도 되었습니다.&lt;/p&gt;
&lt;p&gt;다만 module.scss에 비해 CSS 라이브러리는 컴포넌트의 상태를 이용한 스타일 분기처리가 가능하여, 상태에 따른 css 코드를 작성하기 수월했고 라이브러리가 제공하는 ThemeProvider를 이용하면 css 변수 처리도 수월했습니다.&lt;/p&gt;
&lt;p&gt;하지만, CSS 라이브러리에서 스타일링을 위해 선언된 컴포넌트와 로직을 갖고있는 컴포넌트와의 구분이 쉽지 않아 해당 컴포넌트가 단순한 엘리먼트인지, 로직을 갖고있는 컴포넌트인지 파악하기 힘들었습니다.&lt;/p&gt;
&lt;h2&gt;풀리지 않은 고민&lt;/h2&gt;
&lt;p&gt;이에 따라 상태에 따른 스타일링이 보다 손쉬운 CSS in JS 라이브러리를 사용하기로 결정했습니다.&lt;/p&gt;
&lt;p&gt;다만, 라이브러리의 스타일링을 위해 선언된 컴포넌트와 일반 컴포넌트를 하나의 jsx 내부에서 사용해야 된다는 점이 계속 마음에 걸렸습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PostContainer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PostContainer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PostConatiner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; styled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Styled.PostContainer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Post&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Styled.PostContainer&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PostConatiner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; styled&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;역할을 가진 컴포넌트와 구분이 안되어서 아래와 같이 prefix를 붙이기도 하는데, 이 방식보다도 좀 더 코드 레벨에서 한 눈에 코드가 들어왔으면 좋겠다는 니즈가 있었습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;styled-compoents vs emotion&lt;/h2&gt;
&lt;p&gt;CSS in JS 방식으로 CSS를 작성하기로하였다고해서 고민이 끝난 것은 아니었습니다. CSS in JS 방식을 대표하는 두 가지 라이브러리 &lt;code class=&quot;language-text&quot;&gt;styled-compoents&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;emotion&lt;/code&gt; 중 어떤 것을 선택해야 하는가였습니다.&lt;/p&gt;
&lt;p&gt;그 이유는 emotion이 가지고 있는 장점들이 조금 더 명확해보여 emotion을 사용하자는 결론이 났는데, 그 이유는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;emotion&lt;/code&gt;은 크리티컬할 만큼은 아니지만 라이브러리의 사이즈가 styled-components 보다 작았으며 SSR에 대한 별도의 처리가 필요 없었습니다.&lt;/p&gt;
&lt;p&gt;하지만 무엇보다 매력적이었던 포인트는 emotion의 &lt;code class=&quot;language-text&quot;&gt;css prop&lt;/code&gt; 기능이 styled-components 컴포넌트보다 필요한 코드 주입의 자동화가 잘 되어있다는 것입니다.&lt;/p&gt;
&lt;p&gt;styled-components는 emotion과 달리 매번 css prop을 사용할 때마다 css가 컴파일이 되기 위해 &lt;code class=&quot;language-text&quot;&gt;import styled from &apos;styled-components/macro&apos;&lt;/code&gt; 를 가져와야 했으며, babel의 설정으로도 자동으로 주입할 수 없었습니다.&lt;/p&gt;
&lt;h3&gt;css prop?&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//emotion&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;
  &lt;span class=&quot;token attr-name&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;css&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
    color: blue;
  &lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  text color is blue
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;라이브러리가 제공해주는 기능 중 하나로 inline style과 유사하게 작성되지만, class로 변환되어 스타일링이 적용됩니다.&lt;/p&gt;
&lt;p&gt;이 기능을 이용하면 css 코드를 따로 뺀 뒤 module.scss 처럼 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;blueColor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  text color is blue
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blueColor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; css&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;
  color: blue;
&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;emotion의 css prop을 사용하면 지속적인 고민거리였던 컴포넌트로 스타일리을 하는 방식의 단점을 보완할 수도있으며, 다른 니즈를 모두 충족시켜줄 수 있는 방법이었습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;pragma?&lt;/h2&gt;
&lt;p&gt;emotion의 css prop을 제대로 사용하기위해서는 파일 상단에 pragma 선언해 주어야합니다.
&lt;code class=&quot;language-text&quot;&gt;pragma&lt;/code&gt;란 컴파일러에게하는 전처리 명령이라 생각하면 되는데,&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/** @jsx jsx */&lt;/code&gt; 를 통해 컴파일 전처리 단계에서 jsx 문법들을 React.createElement 대신 jsx로 해석해야 css prop이 정상적으로 작동하기 때문입니다.&lt;/p&gt;
&lt;p&gt;하지만, 프로젝트에서는 &lt;code class=&quot;language-text&quot;&gt;/** @jsx jsx */&lt;/code&gt; 를 선언해주어도 css props을 제대로 사용할 수 없었는데, 그 이유는 @babel/preset-react의 runtime: “automatic” 옵션을 켜주었기 때문입니다. (CRA v4 이후와 같은 환경)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 문법이 필요없도록하는 &lt;a href=&quot;https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html&quot;&gt;리액트: 새로운 jsx 변환&lt;/a&gt;을 이용했을 시,&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/** @jsxImportSource @emotion/react */&lt;/code&gt;
를 선언해주어야 비로소 jsx 파일이 css prop을 읽을 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://emotion.sh/docs/css-prop#babel-preset&quot;&gt;emotion css prop&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://babeljs.io/blog/2020/03/16/7.9.0#a-new-jsx-transform-11154httpsgithubcombabelbabelpull11154&quot;&gt;babel: 새로운 jsx 변환&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;pragma 지우기&lt;/h2&gt;
&lt;p&gt;css prop을 통해 CSS 코드를 작성하니, 가독성이 훨씬 좋을 뿐더러, 필요한 경우 인라인 스타일링을 할 수 도 있었습니다.&lt;/p&gt;
&lt;p&gt;다만, 지속적으로 pragma를 작성하다보니 피로감이 들기 시작했습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@emotion/babel-preset-css-prop&lt;/code&gt; 같은 babel 플러그인으로 해결할 수 있을까 해서 적용해보았지만 해당 플러그인은 &lt;code class=&quot;language-text&quot;&gt;/** @jsx jsx */&lt;/code&gt; 구문에 대한 해결 방법이었고,&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;/** @jsxImportSource @emotion/react */&lt;/code&gt; pragma를 제거하기 위해서는 @babel/preset-react 의 importSource 옵션을 @emotion/react 로 명시적으로 변경해주면 됩니다.&lt;/p&gt;
&lt;p&gt;앞의 내용들에 대한 babel.config.json 설정은 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;presets&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-env&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;runtime&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;automatic&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;&quot;importSource&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@emotion/react&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;@babel/preset-typescript&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;해당 설정을 통해 pragma 선언 없이도 emotion의 css prop을 사용할 수 있게 되었습니다.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;공책팀은 emotion의 css prop 기능을 이용해 CSS 작성을 하고있으며, 해당 스타일링 방식을 통해 빠른 개발을 이어나가고 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[개발자란 무엇일까?]]></title><description><![CDATA[안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.
저희 팀은 우아한테크코스…]]></description><link>https://gong-check.github.io/dev-blog/FE/코카콜라/개발자란-무엇일까/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/FE/코카콜라/개발자란-무엇일까/</guid><pubDate>Mon, 11 Jul 2022 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. “함께 사용하는 우리의 공간, 우리가 체크하자!”&lt;/br&gt;
GongCheck 팀에서 프론트엔드 개발을 맡고 있는 코카콜라입니다.&lt;/br&gt;
저희 팀은 우아한테크코스 4기 과정에서 공간관리 체크리스트 애플리케이션 개발을 하고 있습니다. 이번 프로젝트를 시작하면서 무엇을 해결하기 위해 GongCheck을 기획하게 된 이유를 소개하고자 합니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;개발자를 설명하면 코딩을 하는 사람일까? 정확히는 우리가 살고 있는 세상에 존재하는 문제를 해결하는 사람이라고 생각한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2&gt;지금 우리는 공간을 어떻게 사용하고 있지?&lt;/h2&gt;
&lt;p&gt;현재 우아한테크코스 크루들이 생활하고 있는 공간은 잠실, 선릉 두 곳입니다. 밤 11시까지 공간을 사용할 수 있고 마지막에 남아 있는 사람이 해당 공간의 마감을 해야 합니다. &lt;strong&gt;여기서 마감이란?&lt;/strong&gt; 모든 전등과 에어컨을 끄고 다음과 같은 퇴실 체크리스트의 항목을 확인 한 뒤 공간을 닫아야 합니다.&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/9a86a/checklist.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACV0lEQVQ4y4VT2W7TUBD1rzRxFyde4z2xHW+JY7tNm1QUVaoAsaRqEQ/QR1TRViAVgcQ3IMF3HjQTHIjU5WE811e+x2eZKyxenmDx+hlOT1/h7fkC52dv8OL5CZ7MM+Spg75nwHMUmMYONEWErm4+WMK37z9w++UKNzdXuLz8iOvrT7i4eI/jowmqSQDHUtD3dZiGBFVu8SECvg9cKIsU9cjDdFqgLIbYrXPs1RkmRYLpXgHXVtDTt2GbXVg96VGWgtLdgCKLfDCOXORpH5NiiGIcIUv7GI9CXufpAL6rQpXbDwPSgxiEgYVk6DJYXabIEh+jbMAVRw57+BgYsRfoYWhbGIY2ktjDKAtQTRJkSR/jPGRmxDoKLfZQ6bYYuOl0ftnb/xhS0QdWr8MB1FWG3SpjuWns4XBeI018/tF8VrGCp0f7mO2XSGOf3+Ohy8Arhp6jMkPybZQHqMqEwcg32+qip+/AsWT22tC2eZRss8NkqDeBCU1qri3DdzUGpRDKImZWtE+HB76BcGDyD4aRw+uBr7Mdji2zwpVkAm02CIA+KicxDqYFilHEva5SZk2ezg9K7O3mbA8FRqybwARNWU+JBpgSprTJJ2J6OKu40436evuZFVCIarcFubOxAluTbGibLCcKLDaZ2NAY0cFxHrDMiw/v8PvXTwZqFP1P5i/DZSiuayIMbAYhmZQegVN6zZBzaEkfHg+4uHYNmxJ0VYSpb+HsWEfgyRxElng8c8R6OV8id4PYMBOR13eV0JHa6EgiskCCpm7B0LvQVAnSznL//mrfWX8AygzwT04H2SoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;checklist&quot; title=&quot;checklist&quot; src=&quot;/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/f058b/checklist.png&quot; srcset=&quot;/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/c26ae/checklist.png 158w,
/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/6bdcf/checklist.png 315w,
/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/f058b/checklist.png 630w,
/dev-blog/static/36bf2a7f7b0fe469165f82fe107fbccd/9a86a/checklist.png 792w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;퇴실시 체크 리스트&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/3cb0f/closed.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 127.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAADwklEQVRIx42VTW9UVRiAzz1f95xz78ztzNAWpi1T6tBpx/IhFFqlKKkfNUZNMLIwaVCiCIlxqaRRgyYuAHcuXKgJiQujLt3pxoXEhLU/gI2/we1jzr1tgfYKXTw5HznzzPve87454oPL61y+9BbPnnue08srLD29wpmz51h+5iz92SEHJnpMTB2iOzn9WOI50Zvu0zvUZzC/wPzwKHPDowzmjzDTn2Oq90R5aC9sC+Nkf/cg/dl55oZHGAyP0B8M6c0cLve7kz0OPIqJXnlmSyompqaZPDjDSHsfiVLokKKDwwSHzQM28yVpHol7Dps5TEmK9RYX/MMRVsLOptCXQuUdKnikj8R53EtRzqCcRvlqlFaiU7v9re8LOzFCg8oydKOBzpqovEJncZ2jsoDKPSpz6GArqVUYWyMsotDGCHJUaCKzAplvksV1AxkyZAgol6JSg7aaREt0vXCsiiYU6LyDaY1jijFMMYppdtDNdilOXIa0Dm0NymgSJTFpun0xDwmTrMAU4wjfQagGQhcI3UCoDJHEFJuYrED7DOVcGaUyitTXCkfRjTYibXPmlXf5+NavXP3sRy5v3Oa9a99x5foPTB0+jjIeGxoo41DaIrXCebdb2CxTbiFUYOX851z5Bt744l8+/OofNm78xtUbd5lfXEVKi/M5xgisEhgl8K5GWLTHkKFAmMBg+SJHL92j9/odVt/+mbU3N3h1/Uv6C8soacuLE2aA0IsIfQDr7O46bLZHkT5+L8+xsxe4+dM9Pvr6Tza+/YtPv7/LrV/+Zma4iJaGEzbwXDLgvDzJRTlONzWM7RQW7VGSNCB9k9bEgJXXrnLqpXc4tXaJxRfXWVy9QNHp0jKB61bzSUPwhxLcEYLZNGXfZI/JXZ1iLSrWXxlpitC+wmQk0mFdTmE8N5ua3/uO28ZwTSTktZ3S7pQ3JkOOdBnK51WR+0Y5N2mGso7COs5JzZqQvCAlx2WCTg3d/xPGHpbOIdOI30bZFG1SUptircFYhTaq7JS43t0prTaJEmWxSmeRcbQWaatR2arVjNGlSOuIRMUITa2wVQmNLNtJbJMgZEKyRfIwQgi0rkk5CoWshFEgErEbsUUlui/UNcKRFkkiUDohUZvCUvwAQtRSKxzZIUw2JTvTS2rE9SmPjJDEH8id6T0eKWVdHY4hdUreyPEh4ENGljUIWf5oQkajOXK/l2O7jO4/yPLp47y//jJT07OcWFziqZNLbP3ZXnjg1TvEeLfHwpPzrK0u0Z2aYbhwrHybqydyes/ECP8Dw6GUOGp+Q0EAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;closed&quot; title=&quot;closed&quot; src=&quot;/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/f058b/closed.png&quot; srcset=&quot;/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/c26ae/closed.png 158w,
/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/6bdcf/closed.png 315w,
/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/f058b/closed.png 630w,
/dev-blog/static/5cb14dc309f8b687047a38c58cf96001/3cb0f/closed.png 708w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;퇴실&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;h2&gt;우리가 마주하고 있는 문제 상황은 무엇일까?&lt;/h2&gt;
&lt;p&gt;우아한테크코스 교육과정이 태어난지 벌써 4년, 그리고 4기가 시작한지 대략 5개월이 지났지만 별다른 문제 없이 공간을 사용해왔습니다. 하지만 난생처음 마감을 하게 된다면? 어떻게 될까요?&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/9a86a/how.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 131.64556962025318%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAF50lEQVRIx32V6VNb5xWH/Re0acGWAQlJaEVik5Bs9i1QMISEBEs2NpuDELuEQewgIUAIITYZswkLgzGY2NR27XbGmSxO+8XNdKadTidupzOZ6Zd+afs/PB1dO41xMv1w7vveO/d95pzfOe85pyorLrA41IatuZHi0goqKqupuFBNSWk56QYTKo0efaoBWZKauAQpCRL5/7VTNVVV7Lnb6GxpxmDKpqCwhLyCYgqLSzGfzyHDeA6FKhlxYhLiRPkPLAqJF8u+B0plSjRKFUqVFqUmBZU2FYVah0qTgjo5FU1yGuJEBaJ4KadFYs6clQh2WjAxZ197/R30VJxYJvwcfckymygrKSQ/L5+cnBzy8/MoLi6isKCArHMmzpvNGA1GMjMzMZlMmE1mVGotcQlveCiWyIUPGrUGx9VfEBhoZMTRxPXORq53NTHYa8M30sOSx0nA42LaPYR3vA/3iIN5rwvrR9XEisSCJAIw+hDFJZKi0xEYbGR+uJm5oWYmXc24epqZ6G9nbqQT/6gDn3uQ0JIfz/gAA047q8EJ6i/XEnsm4STwTBSo17M0YWfV28OKu5ObswPcWPIxPdzN4mQf89OjBGbG2Ly5wO1b60S2lrmztSAAY94Eil8DU/V6Qp4O1qadrHq7WfW5mJ5w4RnsYml+hs2NEPsHuxwfH3J4Z5vgzBg1VWXI5W9l+XugjrWpLrb8/WzO9rHud7EZmuPu7jbPnv2Gv3/7Lb/77Zesry7iHXZQUZLPT2NiSZQrTwIFDeOl6LVaVifa2An0szrewdqUk6eP7/HN377h3//5F08eHTM16mLQaSc05+ZavZV4qRSlRkv8iSwnJgn1lGk0c7gyxe5sF322OlqvWvjDiy/56vnnOLs7BNiCz8OS30045Kf946vEJcSjUKnfCjlRLgANGWYOVmbwOBtor30fR817rAdH8XtGsNTWEL65xOZKkNCch42FKbpt9eiSdWSdy0YUJzkZcrQOk+RK7JYLrE12EGy8SHtxCUtuB66OJmqryrBUlVF7oZSq0gKqyksoKcxHLE1CrtD+WFIkpKcZ8I8NCBrOOuyMd7RwbyvA5w/3efZgj4P1IMsTvQzbLNhrirhUYsRaqCPXoEf0Aw1FCRgzs9iOPGBnxcv+uoejiI+jNS+PN2b57CjC7z97zF/++IKXf/6av/7pBV8/f8oXv9zB3nCJn79d2GfjpajVWtrqatgMDHJ3Y5L99Uke7gT4dG+Zo6UJloda2Z4f51cHm3x6P8xXz4755z9eEgz4+cnPTiORKk4CNRotvdes3Foc5XBrmsPwDIcbU9xf9fLg5iR7C8PcDbm5v+Vj2+dkb3mMJ+EZupqtJz18FbKYzMxzPD/+hCd7Ie6FZzja9rG/5mFl1MatqS4+CY3w64iPR+FpIrMOwj4n+8E+Wq/UEHNGfPLqRXubMd1AZKKLiL+PR/uLPNwLcrDpwdNZy3xfHWGPnTuBXg4WXdyeu8723HUi0220WCuJEUn+12xf3xQZyWoVQ5Ys5vvridxwMzNkY6itlmFbNf7eOkLDTWx7O7jtd7Ib6GM32MfOtJ366qIfA0rRqtUM1JXgaf8Id/cVpnrqmO29zLyrgTlXAzdGrhH2tLLtaWVtuJ6FnhoWOiqwvGsi9qwU8ZuFLWRZpcXZbGV+qJ3FsR5mnVfwOi8x0v4BblsVI03leFoq6LfmMlRXgMuay3BdHu/lGzgd9xYwQSwjXiInTaFFq0/nfFE5qbXd5GZXU1FmQ/9uLS0NV9HpUrhosZKWloHRmInBYBTOnph63w2YqAYGjQKpTIEptxxlZTfqlDJyy9rRFH1ITfX7yBUaPvjQglKjR61NEYZZtNtHz0dHbHQVmkOMSEaOWcXLp+VMOawUF15Bl2whNzuPi5cv0lh3mXdkOuINBcTKtKg1OjTJqSTr09HqXq3JujShdF5pmCBDqUzCWqmlqCgPhdqARJpBttlMelo6upQMxEkaEhQ6JEkapHKVMPhlchWJMuWrfZJaCPm/Vxfylm1RZvkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;how&quot; title=&quot;how&quot; src=&quot;/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/f058b/how.png&quot; srcset=&quot;/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/c26ae/how.png 158w,
/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/6bdcf/how.png 315w,
/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/f058b/how.png 630w,
/dev-blog/static/168d0bf9e83e8baa623f639a953d66bf/9a86a/how.png 792w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;p&gt;퇴실시 체크리스트 확인해도 전등이 어디에 있는 모르겠다구...&lt;/p&gt;
&lt;/div&gt;
&lt;h3&gt;여기 불 어떻게 꺼요?&lt;/h3&gt;
&lt;p&gt;열심히 공부를 하다 보니 밤 11시! 나 혼자 캠퍼스에 남아 있다면! 오늘 처음 마감을 하게 된 상황이라면! &lt;strong&gt;여기 불 어떻게 꺼요?&lt;/strong&gt; 이런 상황에 직면하게 된다면 식은땀이 날 꺼예요 ㅎㅎ. 여기 전등은 어디서 끄는지, 저기 전등은 안꺼도 되는지 엘리베이터 앞 로비의 불은 꺼야 하는지, 캠퍼스 안에 있는 에어컨도 꺼야 하는데 에어컨이 한두개도 아니고 “언제 다 확인하지?” 이런 고민을 하신 분들이 많을 거라고 생각이 듭니다. 이런저런 생각 속에 “에이 몰라 대충 하고 도망가야지~” 이렇게 마감하고 가신 분들이 있을 거라 확신합니다.&lt;/p&gt;
&lt;/br&gt;
&lt;hr&gt;
&lt;h2&gt;공책(GongCheck)&lt;/h2&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; &quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/dev-blog/static/26dd2c00becde753f9b12f85125c4c4f/0b533/profile-pic.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACw0lEQVQ4y5WT208TQRTG+w/6LIkPPqo8GImJMWrBqojxXh98JBKMChE1QjQYIIIotKXQAmpLr3SVll7oxbY7s3P5zM62ZbfFBE8y2c3unG9+851zXOgKKaVaZojWsx3C9s++zx6uQyE4NnNxKDoZZ9gocIfwv0RdR1G131NVgSurBDcCFBe/EoxFjE6ieaCTtiV4FJUZ75IM/UsE02mGnwcCWyWOu+sUl1cI0jXRyemm7SHcbwp4AhRDfqqEXuwYOPNZV0LBPMfHXYZziwRvk+xIC1x2DxZ+cfQvEuWZKXbVRzC8RlHSJb5muRJ6GTMQKQsM+qmyIt90FrBD+HTbwPkvRJnfpphOMYfhBV3g5hqF208QLQs8j1r0JnlbVAkaQmJOYyBcYirBMLBMsOvwCWBC2Pzl6F/SFflWkSNUsAl2l/3OOsUnzSJjwtokpJWwU9/Ek9QFEFHCoE9gLc8c/eu4MmtV+FGY4sOuKcBhKzoOjDzckZMY026pg9x+inCRtw62FaW7/PdDOhY0YKU8gcfJAUUnpMC9xFl4kwPmxdS+az69I2ifqB7BByGC2QxQ5xrckT6MZjwY10ZwPXoKVeOgRcTh9tHjCT4MUcykqXrP6hoGo3249OMEtGa8lczBJeD2keMLzmZ452p5mkRG3263cCdxyH9MQm+Yqh4cDprTouN2EBgJAp6ADk/AnGtrnZ5v4nvJrLJ0zL+re3z26gK+HId/31qrOQO+nMC3rPkdaq3mgHDBait7yzgIzTAbNVYRoFxCZxINJsAFUDYKyNIQ9ugmDFkEQxGGLCHRCEPnjd4+bNPFKwLvUwyv4wyvYgbeJCjGI8Cz+AY2a/OYy09hOjeKid9eLJdmMLnnRaweat1Q9BJyKVHQJcpEokqlGsXAPke6xlFlWTR4HQ1eQ51V8IdVUGUlENHsJez24X/D7uFfRJflaCtMr7UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;profile pic&quot; title=&quot;profile pic&quot; src=&quot;/dev-blog/static/26dd2c00becde753f9b12f85125c4c4f/0b533/profile-pic.png&quot; srcset=&quot;/dev-blog/static/26dd2c00becde753f9b12f85125c4c4f/c26ae/profile-pic.png 158w,
/dev-blog/static/26dd2c00becde753f9b12f85125c4c4f/6bdcf/profile-pic.png 315w,
/dev-blog/static/26dd2c00becde753f9b12f85125c4c4f/0b533/profile-pic.png 500w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/div&gt;
&lt;p&gt;이러한 문제상황 속에서 공간관리 애플리케이션 GongCheck이 기획되었습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;무엇을 해야 할지, 무엇이 어디에 있는지 모르는 사용자를 위해 체크리스트로 알려줍니다.&lt;/li&gt;
&lt;li&gt;마감의 상황뿐만 아니라 청소 등 범용적으로 사용되는 체크리스트를 제공합니다.&lt;/li&gt;
&lt;li&gt;한명의 사용자가 아닌 여러 명의 사용자가 동시에 체크리스트를 체크하는 동시성을 제공합니다.&lt;/li&gt;
&lt;li&gt;공간을 관리하는 관리자 유저에게 공간관리 체크리스트 생성 기능을 제공합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;br&gt;
&lt;div align=&quot;center&quot;&gt;
	&lt;img src=&quot;/dev-blog/3d95a1f24cf88c8b03b8c67c7842f8cc/demo.gif&quot; width=&quot;300&quot;&gt;
    &lt;p&gt;1차 데모 프로토타입(조만간 이쁜UI로 변경될듯??)&lt;/p&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;h2&gt;마치며&lt;/h2&gt;
&lt;p&gt;평소 “세상에 존재하는 문제를 디지털 기술로 해결하자”라는 생각으로 개발을 해왔습니다. 세상에 존재하는 문제가 사소한 문제일 수도 있고 사회적으로 영향을 끼치는 큰 문제일 수도 있지만, 그 문제를 디지털 기술로 해결하기 위한 첫 시작을 우아한테크코스 4기 GongCheck 팀원들과 이제 막 시작했습니다.&lt;/br&gt;
저희의 과정에 대해 많은 관심 부탁드립니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JWT 기반 인증, 인가 구현기]]></title><description><![CDATA[안녕하세요. 공책 팀의 어썸오입니다. 공책 프로젝트는 JWT 기반의 인증 방식을 채택했는데요, 이번 포스팅에서는 JWT 기반 인증을 어떻게 구현을 했고 어떤 고민들을 했는지에 대해 이야기 해보도록 하겠습니다. JWT…]]></description><link>https://gong-check.github.io/dev-blog/BE/어썸오/jwt_impl/jwt_impl/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/어썸오/jwt_impl/jwt_impl/</guid><pubDate>Mon, 11 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요. 공책 팀의 어썸오입니다.&lt;/p&gt;
&lt;p&gt;공책 프로젝트는 JWT 기반의 인증 방식을 채택했는데요, 이번 포스팅에서는 JWT 기반 인증을 어떻게 구현을 했고 어떤 고민들을 했는지에 대해 이야기 해보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;JWT 인증 방식이 무엇인지에 대해서는 오리가
작성한 &lt;a href=&quot;https://velog.io/@jinyoungchoi95/JWTJson-Web-Token-%EC%9D%B8%EC%A6%9D%EB%B0%A9%EC%8B%9D&quot;&gt;JWT(Json Web Token) 인증방식&lt;/a&gt;을
참고해주세요.&lt;/p&gt;
&lt;h2&gt;의존성 추가&lt;/h2&gt;
&lt;p&gt;저희 팀은 &lt;a href=&quot;https://github.com/jwtk/jjwt&quot;&gt;jjwt 라이브러리&lt;/a&gt;를 사용하기로 결정했습니다. jwt 라이브러리 중 팀원들에게 가장 익숙한 라이브러리였기 때문에 큰 고민없이 선택할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;jjwt 라이브러리를 사용하려면 아래와 같은 의존성을 추가해주어야 합니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Gradle&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;implementation &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-api:0.11.5&apos;&lt;/span&gt;
runtimeOnly &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-impl:0.11.5&apos;&lt;/span&gt;
runtimeOnly &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-jackson:0.11.5&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;인증&lt;/h2&gt;
&lt;h3&gt;JwtTokenProvider&lt;/h3&gt;
&lt;p&gt;우선 토큰을 발급하고, 서버로 넘어온 토큰을 검증 및 해석할 객체가 필요합니다.&lt;/p&gt;
&lt;p&gt;토큰을 발급하려면 토큰의 위변조를 확인하는데 사용할 시크릿 키와 토큰의 만료 시간을 설정해야합니다.&lt;/p&gt;
&lt;p&gt;시크릿 키로는 &lt;a href=&quot;https://github.com/jwtk/jjwt#jws-create-key&quot;&gt;여러 포맷&lt;/a&gt;을 사용할 수 있는데 가장 일반적인 방식인 BASE_64 인코딩된 문자열을 사용하는 방식을 사용하겠습니다.&lt;/p&gt;
&lt;p&gt;암호화 알고리즘은 SHA-256을 사용할 건데요, 이를 사용하려면 시크릿 키의 길이가 충분히 길어야(256비트)합니다.&lt;/p&gt;
&lt;p&gt;BASE_64로 인코딩된 문자열은 터미널에서 간단하게 확인할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gongcheck-gongcheck-gongcheck&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; base64
&lt;span class=&quot;token assign-left variable&quot;&gt;Z29uZ2NoZWNrLWdvbmdjaGVjay1nb25nY2hlY2stZ29uZ2NoZWNrCg&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ExpiredJwtException&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtException&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Jwts&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SignatureAlgorithm&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Decoders&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonwebtoken&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Keys&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;security&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Key&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;util&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Key&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hmacShaKeyFor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Decoders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BASE64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Z29uZ2NoZWNrLWdvbmdjaGVjay1nb25nY2hlY2stZ29uZ2NoZWNrCg==&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; expireTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;360000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; subject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt; now &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt; expireDate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;now&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; expireTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Jwts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;subject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setIssuedAt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;now&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setExpiration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expireDate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;signWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SignatureAlgorithm&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HS256&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compact&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Jwts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parserBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSigningKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parseClaimsJws&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBody&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ExpiredJwtException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;만료된 토큰입니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;올바르지 않은 토큰입니다.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 &lt;code class=&quot;language-text&quot;&gt;JwtTokenProvider&lt;/code&gt;가 가지고 있는 상태는 읽기 전용이고, 이후에 등록될 스프링 빈들에 의해 사용될 일이 많으므로 빈으로 등록해도 될 것 같습니다.
또한 secret key는 외부에 노출되면 안되기 때문에 프로퍼티로 따로 관리하는 것이 좋을 것 같습니다.&lt;/p&gt;
&lt;p&gt;application.properties&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;properties&quot;&gt;&lt;pre class=&quot;language-properties&quot;&gt;&lt;code class=&quot;language-properties&quot;&gt;&lt;span class=&quot;token key attr-name&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;Z29uZy1jaGVjay1nb25nLWNoZWNrLWdvbmctY2hlY2stZ29uZy1jaGVjay1nb25nLWNoZWNrLWdvbmctY2hlY2stZ29uZy1jaGVjay1nb25nLWNoZWNrCg==&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;security.jwt.token.expire-time&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;3600000&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이를 적용하면 아래와 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Key&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; expireTime&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;${security.jwt.token.secret-key}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                            &lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;${security.jwt.token.expire-time}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; expireTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hmacShaKeyFor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Decoders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BASE64&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;secretKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expireTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; expireTime&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;이제 사용자가 로그인 요청을 보내면 아이디와 패스워드를 확인한 후 토큰을 생성하여 반환해주면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthService&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jwtTokenProvider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;memberRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findByUsername&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkPassword&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsername&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;subject는 username으로 설정했습니다.&lt;/p&gt;
&lt;br&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthService&lt;/span&gt; authService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthService&lt;/span&gt; authService&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authService &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/login&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LoginRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsername&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPassword&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;accessToken&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;인가&lt;/h2&gt;
&lt;p&gt;이번엔 클라이언트에서 보낸 토큰을 이용해 인가처리를 구현해보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;클라이언트는 인가가 필요한 요청에 대해 &lt;code class=&quot;language-text&quot;&gt;Authorization&lt;/code&gt; 헤더에 토큰 값을 담아 요청을 보낼 것입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;http&quot;&gt;&lt;pre class=&quot;language-http&quot;&gt;&lt;code class=&quot;language-http&quot;&gt;&apos;Authorization: Bearer jwt.token.here&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ArgumentResolver&lt;/h3&gt;
&lt;p&gt;가장 간단하게 생각해볼 수 있는 방법은 애너테이션을 이용해 아규먼트 리졸버에서 subject를 뽑아 넘겨주는 것입니다.&lt;/p&gt;
&lt;p&gt;핸들러 메서드는 다음과 같은 형태가 될 것입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;showProfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthenticatePrincipal&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Profile&lt;/span&gt; profile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getProfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;profile&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;핸들러 메서드의 파라미터에 &lt;code class=&quot;language-text&quot;&gt;@AuthenticationPrincipal&lt;/code&gt;처럼 특정 애너테이션이 붙어있는 경우 특정 타입을 반환하고 싶다면 커스텀 아규먼트 리졸버를 등록하고 여기서 적절한 처리를 해주도록 하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Retention&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RetentionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RUNTIME&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Target&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ElementType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PARAMETER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticatePrincipal&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jwtTokenProvider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;supportsParameter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasParameterAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthenticatePrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolveArgument&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ModelAndViewContainer&lt;/span&gt; mavContainer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token class-name&quot;&gt;NativeWebRequest&lt;/span&gt; webRequest&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebDataBinderFactory&lt;/span&gt; binderFactory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; webRequest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AUTHORIZATION&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extractSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;커스텀 아규먼트 리졸버는 설정정보를 통해 따로 등록해주어야 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebMvcConfigurer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;principalArgumentResolver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addArgumentResolvers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; resolvers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        resolvers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 인가 처리를 구현했습니다.&lt;/p&gt;
&lt;h2&gt;책임분리&lt;/h2&gt;
&lt;p&gt;하지만 고민할 사항이 하나 있습니다. 아규먼트 리졸버는 요청으로 넘어온 값을 핸들러에게 필요한 적절한 타입으로 변환해 넘겨주는 책임을 가집니다. 하지만
우리가 만든 아규먼트 리졸버는 토큰 값을 추출하고 핸들러가 필요한 값을 넘겨주는 두 가지 책임을 가지고 있습니다.&lt;/p&gt;
&lt;p&gt;인가 처리라는 하나의 관심사만을 담당하는 새로운 객체를 고민해볼 수 있을 것 같습니다. 인가 처리는 다른 핸들러에서도 필요한 공통 관심사이죠. 웹 요청에 대한 공통 관심사 처리는 인터셉터에게 위임하는 것이 적절해보입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HandlerInterceptor&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jwtTokenProvider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;preHandle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpServletRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpServletResponse&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; handler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AUTHORIZATION&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; subject &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extractSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// subject를 어떻게 전달하지?&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;HandlerInterceptor&lt;/code&gt;에서 추출한 subject를 컨트롤러까지 전달하려면 어떻게 해야할까요?&lt;/p&gt;
&lt;p&gt;가장 간단한 방법으로는 request 객체에 값을 담아서 보내는 것을 생각해볼 수 있습니다. 하지만 토큰을 resolve한 값을 전달하는 것이 HttpServletRequest의 책임일지는 고민해볼만한 것 같습니다.&lt;/p&gt;
&lt;p&gt;저희 팀은 HttpServletRequest의 책임을 온전히 클라이언트 쪽에서 넘어온 데이터를 전달하는 것으로 보고, 추출한 subject를 담아두는 책임을 가지는 새로운 객체를 정의하기로 했습니다.&lt;/p&gt;
&lt;h3&gt;AuthenticationContext&lt;/h3&gt;
&lt;p&gt;인증 정보를 담는 컨텍스트 역할을 하는 객체를 정의하고 이를 활용해보도록 하겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestScope&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationContext&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; principal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; principal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setPrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; principal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;principal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; principal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;인증 정보는 하나의 웹 요청 안에서만 사용되므로 해당 빈의 Scope를 Request로 제한해줍니다.&lt;/p&gt;
&lt;p&gt;인터셉터에서 뽑아낸 값을 AuthenticationContext에 담아두고 아규먼트 리졸버에서 꺼내 핸들러로 넘겨주도록 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Slf4j&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HandlerInterceptor&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationContext&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JwtTokenProvider&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationContext&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jwtTokenProvider &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authenticationContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;preHandle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpServletRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpServletResponse&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; handler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AUTHORIZATION&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; subject &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; jwtTokenProvider&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extractSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setPrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;subject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;extractToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; header&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationContext&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthenticationContext&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authenticationContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;supportsParameter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasParameterAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthenticatePrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolveArgument&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ModelAndViewContainer&lt;/span&gt; mavContainer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token class-name&quot;&gt;NativeWebRequest&lt;/span&gt; webRequest&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebDataBinderFactory&lt;/span&gt; binderFactory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; authenticationContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPrincipal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
&lt;p&gt;인터셉터 또한 설정 정보를 통해 등록하고 인터셉터가 동작하도록 할 URI Path를 정해줄 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebMvcConfigurer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt; authenticationInterceptor&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthenticationPrincipalArgumentResolver&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                     &lt;span class=&quot;token class-name&quot;&gt;AuthenticationInterceptor&lt;/span&gt; authenticationInterceptor&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;principalArgumentResolver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;authenticationInterceptor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; authenticationInterceptor&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addArgumentResolvers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; resolvers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        resolvers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;principalArgumentResolver&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addInterceptors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;InterceptorRegistry&lt;/span&gt; registry&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        registry&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addInterceptor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;authenticationInterceptor&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addPathPatterns&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/profile&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 토큰 기반 인증, 인가 구현 로직을 작성해보았습니다. 감사합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[공책 팀의 REST Docs]]></title><description><![CDATA[REST Docs란? 테스트 코드를 기반으로 API 문서를 만들어주는 도구입니다.
Asccidoctor…]]></description><link>https://gong-check.github.io/dev-blog/BE/범고래/RESTDocs/RESTDocs/</link><guid isPermaLink="false">https://gong-check.github.io/dev-blog/BE/범고래/RESTDocs/RESTDocs/</guid><pubDate>Sun, 10 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;REST Docs란?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;테스트 코드를 기반으로 API 문서를 만들어주는 도구입니다.
Asccidoctor를 사용해서 다양한 포맷으로 문서를 자동으로 생성해줍니다.
테스트 코드를 기반으로 문서화를 해주기 때문에, 테스트 코드로 검증된 문서라는 것을 보장할 수 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;REST Docs로 어떤 테스트를 해야 하는가?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;REST Docs를 통해 테스트 하는 방식은 RestAssured, MockMvc, WebClient 등 다양한 방식으로 구상할 수 있습니다.
어떤 방식으로 테스트하여 만들지는 팀원들과 합의 하에 정하면 됩니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;공책 팀은 REST Docs를 어떻게 사용했는가?&lt;/h2&gt;
&lt;p&gt;공책 팀은 테스트 단위를 다음과 같이 구상했습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Domain 테스트&lt;br&gt;
Repository Layer 테스트&lt;br&gt;
Service Layer 테스트
&lt;code class=&quot;language-text&quot;&gt;Acceptance 테스트&lt;/code&gt;&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;Documetation 테스트&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Domain, Service, Repository의 테스트는 크게 고민하지 않고 진행했습니다.
하지만 Documetation(REST Docs), Acceptance 테스트부터는 팀원과의 협의가 필요했는데요!
각각 어디까지 테스트를 할 것인지, 그에 대한 타당한 이유는 무엇인지 서로 의견을 공유하여 결정했습니다.
저희 팀은 Documetation에서 Controller단의 슬라이스 테스트를 위해 Service는 Mocking한 후, Controller 단의 성공과 실패 케이스를 테스트하여 문서화했습니다.&lt;/p&gt;
&lt;h3&gt;Q. 인수 테스트에서 어차피 Controller 테스트가 포함되지 않나요?&lt;/h3&gt;
&lt;p&gt;물론 좀 더 큰 단위의 테스트(ex. AcceptanceTest)에서 작은 단위의 테스트(ex. Controller Test)가 포함될 수는 있습니다. 하지만 포함된다고 해서 작은 단위의 테스트를 하지 않는다면, 큰
단위의 테스트에서 문제가 발생했을 때 어느 부분에서 문제가 발생했는지 찾기 어렵습니다. 또한 Controller의 실패 케이스(ex. RequestBody에 관한 Valid 테스트)는 인수 테스트에서 진행하기엔 하나의 Acceptance 테스트에 너무 많은 케이스가 존재하여 가독성 또한 떨어진다고 판단했습니다.
이러한 이유들로 Documentation에서 Controller의 실패 성공에 대한 슬라이스 테스트하기로 결정했습니다.&lt;/p&gt;
&lt;h3&gt;Q. Documentation 테스트랑 Controller Test랑 합치면 안되나요?&lt;/h3&gt;
&lt;p&gt;이 부분은 어디까지 문서화를 시킬 것이냐에 대한 고민이 필요할 것 같은데요. 저희 팀은 실패 케이스는 제외하고 성공 케이스만 문서화를 하는 것이 가독성 측면에서 더 좋다는 판단하에 결정했습니다. 또한 실패 케이스에 대해서까지
문서화가 필요하진 않을 것 같다는 의견도 존재했습니다.&lt;/p&gt;
&lt;h3&gt;Q. 왜 SpringBootTest를 사용하지 않고 WebMvcTest를 사용했나요?&lt;/h3&gt;
&lt;p&gt;Controller 테스트가 Acceptance 테스트에 존재하지만, Controller만 독립적으로 테스트하려고 했던 이유(Service, domain 등 까지 전부 협력해서 테스트를 하면, 문제 발생 시 오류를 찾기 어렵기
떄문에)로 슬라이스 테스트를 하기로 했습니다.
Controller Layer를 독립적으로 테스트하기 위해 Mockito를 사용했기 때문에, 모든 빈들까지 등록해서 테스트할 필요는 없었는데요. 테스트도 어찌보면 적지 않은 비용이 들어가고, 테스트를 돌리는데 들어가는
시간도 그 비용에 속하기 때문에 최대한 줄이려 했습니다.
이런 이유들로 &lt;code class=&quot;language-text&quot;&gt;@WebMvcTest&lt;/code&gt;를 사용해서 필요한 빈들만 관리하고, Controller의 독립적인 테스트를 하기 위해 필요한 Service 빈들은 Mocking을 해주게 되었습니.&lt;/p&gt;
&lt;h3&gt;빌드 구성&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre class=&quot;language-groovy&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.boot&apos;&lt;/span&gt; verstion &lt;span class=&quot;token string&quot;&gt;&apos;2.6.9&apos;&lt;/span&gt;
    id &lt;span class=&quot;token string&quot;&gt;&apos;io.spring.dependency-management&apos;&lt;/span&gt; version &lt;span class=&quot;token string&quot;&gt;&apos;1.0.11.RELEASE&apos;&lt;/span&gt;
    id &lt;span class=&quot;token string&quot;&gt;&apos;org.asciidoctor.convert&apos;&lt;/span&gt; version &lt;span class=&quot;token string&quot;&gt;&apos;1.5.8&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// asciidoctor 플러그인을 적용하는 것이다. HTMl, PDF 등을 포함한 다양한 형식으로 Asciidoctor 문서를 번약하기 위한 플러그인이다.&lt;/span&gt;
    id &lt;span class=&quot;token string&quot;&gt;&apos;java&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;com.woowacourse&apos;&lt;/span&gt;
version &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0.0.1-SNAPSHOT&apos;&lt;/span&gt;
sourceCompatibility &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;11&apos;&lt;/span&gt;

configurations &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    compileOnly &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        extendsFrom annotationProcessor
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

repositories &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;mavenCentral&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

ext &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;snippetsDir&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build/generated-snippets&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 아래에서 snippetsDir라는 변수를 사용하게 되는데, 이 변수를 선언하는 것이다.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// spring&lt;/span&gt;
    implementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.boot:spring-boot-starter-data-jpa&apos;&lt;/span&gt;
    implementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.boot:spring-boot-starter-validation&apos;&lt;/span&gt;
    implementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.boot:spring-boot-starter-web&apos;&lt;/span&gt;
    testImplementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.boot:spring-boot-starter-test&apos;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// database-driver&lt;/span&gt;
    runtimeOnly &lt;span class=&quot;token string&quot;&gt;&apos;com.h2database:h2&apos;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// lombok&lt;/span&gt;
    compileOnly &lt;span class=&quot;token string&quot;&gt;&apos;org.projectlombok:lombok&apos;&lt;/span&gt;
    annotationProcessor &lt;span class=&quot;token string&quot;&gt;&apos;org.projectlombok:lombok&apos;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// jwt&lt;/span&gt;
    implementation &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-api:0.11.5&apos;&lt;/span&gt;
    runtimeOnly &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-impl:0.11.5&apos;&lt;/span&gt;
    runtimeOnly &lt;span class=&quot;token string&quot;&gt;&apos;io.jsonwebtoken:jjwt-jackson:0.11.5&apos;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// rest-assured&lt;/span&gt;
    testImplementation &lt;span class=&quot;token string&quot;&gt;&apos;io.rest-assured:rest-assured:4.4.0&apos;&lt;/span&gt;
    testImplementation &lt;span class=&quot;token string&quot;&gt;&apos;io.rest-assured:spring-mock-mvc:4.4.0&apos;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// rest-docs&lt;/span&gt;
    asciidoctor &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.restdocs:spring-restdocs-asciidoctor:2.0.5.RELEASE&apos;&lt;/span&gt;
    testImplementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.restdocs:spring-restdocs-mockmvc&apos;&lt;/span&gt;
    testImplementation &lt;span class=&quot;token string&quot;&gt;&apos;org.springframework.restdocs:spring-restdocs-restassured&apos;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// build/generated-snippets에 생긴 adoc들을 모아서 .adoc파일에서 읽어들일 수 있도록 연동해준다. 이를 통해 최종적으로 .adoc 파일을 HTML로 만들어 export해준다.&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// `testImplementation &apos;org.springframework.restdocs:spring-restdocs-mockmvc&apos;`은  RestDocs를 사용할 때 mockMVC를 통해서 하기 위해 필요한 것이다. 만약 테스트를 MockMVC로 하지 않고, *`restassured`로 하고 싶다면 다른 것을 선언하면 된다.*&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

tasks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    outputs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dir snippetsDir &lt;span class=&quot;token comment&quot;&gt;// .adoc파일을 아까 작성한 scippetsDir 변수 값인 &quot;build/generated-snippets&quot;에 output으로 구성하는 설정이다.&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;useJUnitPlatform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 

tasks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;named&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;asciidoctor&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    inputs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dir snippetsDir &lt;span class=&quot;token comment&quot;&gt;// .adoc파일을 아까 작성한 scippetsDir 변수 값인 &quot;build/generated-snippets&quot;에 input으로 구성하는 설정이다.&lt;/span&gt;
    dependsOn test
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

task &lt;span class=&quot;token function&quot;&gt;createDocument&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Copy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    dependsOn asciidoctor

    from &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build/asciidoc/html5/index.html&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    into &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src/main/resources/static&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 위에 선언한 `tasks.named(&apos;asciidoctor&apos;), tasks.named(&apos;test&apos;)` 를 실행한 후, `&quot;build/asciidoc/html5/index.html&quot;` 의 파일을 `src/main/resources/static` 경로로 옮겨 서버에 접속해서 볼 수 있는 형태로 바꿔준다.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

bootJar &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    dependsOn createDocument
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;테스트 구성&lt;/h2&gt;
&lt;p&gt;Documentation에 @WebMvcTest를 붙이고, 그 안에 사용되는 Controller를 등록했습니다.
또한 필요한 Service빈들을 Mocking하여 Controller의 성공 케이스만 추가해 문서화했다. 현재 공책은 &lt;code class=&quot;language-text&quot;&gt;MockMvcRequestSpecification&lt;/code&gt; 을
사용한 슬라이스 테스트를 했지만, &lt;a href=&quot;https://docs.spring.io/spring-restdocs/docs/current/reference/html5/&quot;&gt;링크&lt;/a&gt;를 참고해서 현재 팀에 맞는 방식을 적용해 보면 될 것 같습니다.&lt;/p&gt;</content:encoded></item></channel></rss>